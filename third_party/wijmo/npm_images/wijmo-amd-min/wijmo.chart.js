/*
    *
    * Wijmo Library 5.20171.282
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the Wijmo Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */
var __extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)};define(["require","exports",'wijmo/wijmo','wijmo/wijmo.chart'],function(n,t,i,r){"use strict";var cr,et,yi,dt,gt,ni,pi,at,it,ti,ii,w,nt,ot,wi,h,ri,e,u,f,s,wt,l,st,bi,o,v,vt,ui,ki,ht,di,y,yt,gi,nr,tt,a,fi,lr,kt,c,b,tr,ei,rt,ut,ir,oi,si,rr,ar,ur,k,d,hi,vr,p,ct,g,pt,lt,ci,fr,ft,li,ai,er,or,sr,hr,bt,vi;window.wijmo=window.wijmo||{};window.wijmo.chart=r;cr=function(){function n(n,t){n===void 0&&(n=0);t===void 0&&(t=0);this.x=n;this.y=t}return n}();t.DataPoint=cr;et=function(n){function t(t){n.call(this);this._engine=t}return __extends(t,n),Object.defineProperty(t.prototype,"engine",{get:function(){return this._engine},enumerable:!0,configurable:!0}),t}(i.CancelEventArgs);t.RenderEventArgs=et;yi=function(n){function t(t,i,r){n.call(this,t);this._index=i;this._count=r}return __extends(t,n),Object.defineProperty(t.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),t}(et);t.SeriesRenderingEventArgs=yi,function(n){n[n.Png=0]="Png";n[n.Jpeg=1]="Jpeg";n[n.Svg=2]="Svg"}(t.ImageFormat||(t.ImageFormat={}));dt=t.ImageFormat;gt=function(n){function t(){n.apply(this,arguments);this._palette=null;this._selectionMode=nt.None;this._defPalette=tr.standard;this._notifyCurrentChanged=!0;this._legendHost=null;this._needBind=!1;this.rendering=new i.Event;this.rendered=new i.Event;this.selectionChanged=new i.Event}return __extends(t,n),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._items},set:function(n){this._items!=n&&(this._cv&&(this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=n,this._cv=i.asCollectionView(n),this._cv!=null&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)),this._clearCachedValues(),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"palette",{get:function(){return this._palette},set:function(n){n!=this._palette&&(this._palette=i.asArray(n),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"plotMargin",{get:function(){return this._plotMargin},set:function(n){n!=this._plotMargin&&(this._plotMargin=n,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"legend",{get:function(){return this._legend},set:function(n){n!=this._legend&&(this._legend=i.asType(n,kt),this._legend!=null&&(this._legend._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"header",{get:function(){return this._header},set:function(n){n!=this._header&&(this._header=i.asString(n,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"footer",{get:function(){return this._footer},set:function(n){n!=this._footer&&(this._footer=i.asString(n,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headerStyle",{get:function(){return this._headerStyle},set:function(n){n!=this._headerStyle&&(this._headerStyle=n,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"footerStyle",{get:function(){return this._footerStyle},set:function(n){n!=this._footerStyle&&(this._footerStyle=n,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectionMode",{get:function(){return this._selectionMode},set:function(n){n!=this._selectionMode&&(this._selectionMode=i.asEnum(n,nt),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(n){n!=this._itemFormatter&&(this._itemFormatter=i.asFunction(n),this.invalidate())},enumerable:!0,configurable:!0}),t.prototype.onRendered=function(n){this.rendered.raise(this,n)},t.prototype.onRendering=function(n){this.rendering.raise(this,n)},t.prototype.saveImageToFile=function(n){var r,t,u,i;n&&n.length!==0&&n.indexOf('.')!==-1||(n='image.png');i=n.split('.');r=i[0].toLowerCase();t=i[1].toLowerCase();u=dt[t[0].toUpperCase()+t.substring(1)];this.saveImageToDataUrl(u,function(n){pi.downloadImage(n,r,t)})},t.prototype.saveImageToDataUrl=function(n,t){var u=i.asEnum(n,dt,!1),r=dt[u].toLowerCase();r&&r.length&&this._exportToImage(r,function(n){t.call(t,n)})},t.prototype._exportToImage=function(n,t){var r=new Image,f=this._currentRenderEngine.element,u;u=pi.getDataUri(f);n==='svg'?t.call(null,u):(r.onload=function(){var u=document.createElement('canvas'),e=i.getElementRect(f),s,o;u.width=e.width;u.height=e.height;o=u.getContext('2d');o.fillStyle='#ffffff';o.fillRect(0,0,e.width,e.height);o.drawImage(r,0,0);s=u.toDataURL('image/'+n);t.call(null,s);u=null},r.src=u)},t.prototype.refresh=function(t){t===void 0&&(t=!0);n.prototype.refresh.call(this,t);this.isUpdating||this._refreshChart()},t.prototype.containsFocus=function(){var t=n.prototype.containsFocus.call(this),r;return t||(r=i.getActiveElement(),r&&(t=r.parentNode===this.hostElement)),t},t.prototype.onSelectionChanged=function(n){this.selectionChanged.raise(this,n)},t.prototype.onLostFocus=function(t){this._tooltip&&this._tooltip.isVisible&&this._tooltip.hide();n.prototype.onLostFocus.call(this,t)},t.prototype._cvCollectionChanged=function(){this._clearCachedValues();this._bindChart()},t.prototype._cvCurrentChanged=function(){this._notifyCurrentChanged&&this._bindChart()},t.prototype._getColor=function(n){var t=this._defPalette;return this._palette!=null&&this._palette.length>0&&(t=this._palette),t[n%t.length]},t.prototype._getColorLight=function(n){var t=this._getColor(n),r=new i.Color(t);return r!=null&&t.indexOf('-')===-1&&(r.a==1&&t.indexOf('rgba')==-1&&(r.a*=.7),t=r.toString()),t},t.prototype._bindChart=function(){this._needBind=!0;this.invalidate()},t.prototype._clearCachedValues=function(){},t.prototype._render=function(){},t.prototype._performBind=function(){},t.prototype._refreshChart=function(){this._needBind&&(this._needBind=!1,this._performBind());this.hostElement&&this._render(this._currentRenderEngine)},t.prototype._drawTitle=function(n,t,r,f,e){var o=u._CSS_TITLE,s=e?u._CSS_FOOTER:u._CSS_HEADER,h=null;if(e?this._rectFooter=null:this._rectHeader=null,r!=null){var a=null,c=null,v=null,l=null;f&&(f.fontSize&&(a=f.fontSize),f.foreground&&(c=f.foreground),f.fill&&(c=f.fill),f.fontFamily&&(v=f.fontFamily),f.halign&&(l=f.halign));n.fontSize=a;n.fontFamily=v;h=n.measureString(r,o,s,f);t.height-=h.height;c||(c=u._FG);n.textFill=c;e?(l=='left'?u._renderText(n,r,new i.Point(t.left,t.bottom),0,0,o,s,f):l=='right'?u._renderText(n,r,new i.Point(t.left+t.width,t.bottom),2,0,o,s,f):u._renderText(n,r,new i.Point(t.left+.5*t.width,t.bottom),1,0,o,s,f),this._rectFooter=new i.Rect(t.left,t.bottom,t.width,h.height)):(this._rectHeader=new i.Rect(t.left,t.top,t.width,h.height),t.top+=h.height,l=='left'?u._renderText(n,r,new i.Point(t.left,0),0,0,o,s,f):l=='right'?u._renderText(n,r,new i.Point(t.left+t.width,0),2,0,o,s,f):u._renderText(n,r,new i.Point(t.left+.5*t.width,0),1,0,o,s,f));n.textFill=null;n.fontSize=null;n.fontFamily=null}return t},t.prototype._toControl=function(n,t){var r,o,u,f,e;return i.isNumber(n)&&i.isNumber(t)?n=new i.Point(n,t):n instanceof MouseEvent&&(n=new i.Point(n.pageX,n.pageY)),i.asType(n,i.Point),r=n.clone(),o=this._getHostOffset(),r.x-=o.x,r.y-=o.y,u=this._getHostComputedStyle(),u&&(f=parseInt(u.paddingLeft.replace('px','')),f&&!isNaN(f)&&(r.x-=f),e=parseInt(u.paddingTop.replace('px','')),e&&!isNaN(e)&&(r.y-=e)),r},t.prototype._highlightItems=function(n,t,r){var u;if(r)for(u=0;u<n.length;u++)i.addClass(n[u],t);else for(u=0;u<n.length;u++)i.removeClass(n[u],t)},t.prototype._parseMargin=function(n){var r={};if(i.isNumber(n)&&!isNaN(n))r.top=r.bottom=r.left=r.right=i.asNumber(n);else if(i.isString(n)){var s=i.asString(n),t=s.split(' ',4),u=NaN,f=NaN,e=NaN,o=NaN;t&&(t.length==4?(u=parseFloat(t[0]),o=parseFloat(t[1]),f=parseFloat(t[2]),e=parseFloat(t[3])):t.length==2?(u=f=parseFloat(t[0]),e=o=parseFloat(t[1])):t.length==1&&(u=f=e=o=parseFloat(t[1])),isNaN(u)||(r.top=u),isNaN(f)||(r.bottom=f),isNaN(e)||(r.left=e),isNaN(o)||(r.right=o))}return r},t.prototype._showToolTip=function(n,t){var i=this,r=this._tooltip.showDelay;i._clearTimeouts();r>0?i._toShow=setTimeout(function(){i._tooltip.show(i.hostElement,n,t);i._tooltip.hideDelay>0&&(i._toHide=setTimeout(function(){i._tooltip.hide()},i._tooltip.hideDelay))},r):(i._tooltip.show(i.hostElement,n,t),i._tooltip.hideDelay>0&&(i._toHide=setTimeout(function(){i._tooltip.hide()},i._tooltip.hideDelay)))},t.prototype._hideToolTip=function(){this._clearTimeouts();this._tooltip.hide()},t.prototype._clearTimeouts=function(){this._toShow&&(clearTimeout(this._toShow),this._toShow=null);this._toHide&&(clearTimeout(this._toHide),this._toHide=null)},t.prototype._getHostOffset=function(){var n=i.getElementRect(this.hostElement);return new i.Point(n.left,n.top)},t.prototype._getHostSize=function(){var t=new i.Size,f=this.hostElement,n=this._getHostComputedStyle(),r=f.offsetWidth,u=f.offsetHeight;if(n){var e=parseFloat(n.paddingLeft.replace('px','')),o=parseFloat(n.paddingRight.replace('px','')),s=parseFloat(n.paddingTop.replace('px','')),h=parseFloat(n.paddingBottom.replace('px',''));isNaN(e)||(r-=e);isNaN(o)||(r-=o);isNaN(s)||(u-=s);isNaN(h)||(u-=h);t.width=r;t.height=u}return t},t.prototype._getHostComputedStyle=function(){var n=this.hostElement;return n&&n.ownerDocument&&n.ownerDocument.defaultView?n.ownerDocument.defaultView.getComputedStyle(this.hostElement):null},t.prototype._find=function(n,t){for(var i,r,u,f=[],e=0;e<n.childElementCount;e++)if(i=n.childNodes.item(e),t.indexOf(i.nodeName)>=0)f.push(i);else if(r=this._find(i,t),r.length>0)for(u=0;u<r.length;u++)f.push(r[u]);return f},t._WIDTH=300,t._HEIGHT=200,t._SELECTION_THRESHOLD=15,t}(i.Control);t.FlexChartBase=gt;ni=function(){function n(){this._keys={};this._keys.seriesName=null;this._keys.pointIndex=null;this._keys.x=null;this._keys.y=null;this._keys.value=null;this._keys.name=null}return n.prototype.replace=function(n,t){var r=this;return i.format(n,{},function(n,i,u){return r.getValue(i,t,u)})},n.prototype.getValue=function(n,t,r){switch(n){case'seriesName':return t.series?t.series.name:'';case'pointIndex':return t.pointIndex!=null?t.pointIndex.toFixed():'';case'x':return r?i.Globalize.format(t.x,r):t._xfmt;case'y':return r?i.Globalize.format(t.y,r):t._yfmt;case'value':return r?i.Globalize.format(t.value,r):t.value;case'name':return t.name}return t.item&&(n.indexOf('item.')==0&&(n=n.substr(5)),n in t.item)?r?i.Globalize.format(t.item[n],r):t.item[n]:''},n}();t._KeyWords=ni;pi=function(){function n(){}return n.downloadImage=function(n,t,i){var r=document.createElement('a'),v='image/'+i,o,f,a;if(navigator.msSaveOrOpenBlob){n=n.substring(n.indexOf(',')+1);for(var s=atob(n),h=[],c=512,e,l,u=0;u<s.length;u+=c){for(e=s.slice(u,u+c),o=new Array(e.length),f=0;f<e.length;f++)o[f]=e.charCodeAt(f);a=new Uint8Array(o);h.push(a)}l=new Blob(h,{type:v});navigator.msSaveOrOpenBlob(l,t+'.'+i)}else r.download=t+'.'+i,r.href=n,document.body.appendChild(r),r.addEventListener("click",function(){r.parentNode.removeChild(r)}),r.click()},n.getDataUri=function(t){var v=document.createElement('div'),r=t.cloneNode(!0),s,u,f,h,c,e,y,l,o,a;return t.tagName=='svg'?(s=i.getElementRect(t),u=s.width||0,f=s.height||0,h=t.viewBox.baseVal&&t.viewBox.baseVal.width!==0?t.viewBox.baseVal.width:u,c=t.viewBox.baseVal&&t.viewBox.baseVal.height!==0?t.viewBox.baseVal.height:f):(e=t.getBBox(),u=e.x+e.width,f=e.y+e.height,r.setAttribute('transform',r.getAttribute('transform').replace(/translate\(.*?\)/,'')),h=u,c=f,l=document.createElementNS('http://www.w3.org/2000/svg','svg'),l.appendChild(r),r=l),r.setAttribute('version','1.1'),r.setAttributeNS(n.xmlns,'xmlns','http://www.w3.org/2000/svg'),r.setAttributeNS(n.xmlns,'xmlns:xlink','http://www.w3.org/1999/xlink'),r.setAttribute('width',u),r.setAttribute('height',f),r.setAttribute('viewBox','0 0 '+h+' '+c),i.addClass(r,t.parentNode&&t.parentNode.getAttribute('class')||''),v.appendChild(r),y=n.getStyles(t),o=document.createElement('style'),o.setAttribute('type','text/css'),o.innerHTML="<![CDATA[\n"+y+"\n]]>",a=document.createElement('defs'),a.appendChild(o),r.insertBefore(a,r.firstChild),'data:image/svg+xml;base64,'+window.btoa(window.unescape(encodeURIComponent(n.doctype+v.innerHTML)))},n.getStyles=function(n){var t='',i=document.styleSheets;return i==null||i.length===0?null:([].forEach.call(i,function(i){var r;try{if(i.cssRules==null||i.cssRules.length===0)return!0}catch(u){if(u.name=='SecurityError')return console.log("SecurityError. Can't read: "+i.href),!0}r=i.cssRules;[].forEach.call(r,function(i){var r=i.style,u;if(r==null)return!0;try{u=n.querySelector(i.selectorText)}catch(f){console.warn('Invalid CSS selector "'+i.selectorText+'"',f)}u?t+=i.selectorText+" { "+r.cssText+" }\n":i.cssText.match(/^@font-face/)&&(t+=i.cssText+'\n')})}),t)},n.doctype='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',n.xmlns='http://www.w3.org/2000/xmlns/',n}();at=function(n){function t(t,r){n.call(this,t,null,!0);this._areas=[];this._keywords=new ni;this._startAngle=0;this._innerRadius=0;this._offset=0;this._reversed=!1;this._isAnimated=!1;this._selectedItemPosition=f.None;this._selectedItemOffset=0;this._rotationAngle=0;this._center=new i.Point;this._selectedOffset=new i.Point;this._selectedIndex=-1;this._angles=[];this._values=[];this._labels=[];this._pels=[];this._sum=0;this.applyTemplate('wj-control wj-flexchart',null,null);this._currentRenderEngine=new fi(this.hostElement);this._legend=new kt(this);this._tooltip=new ri;this._tooltip.content='<b>{name}</b><br/>{value}';this._tooltip.showDelay=0;this._lbl=new rr;this._lbl._chart=this;var e=this;this.hostElement.addEventListener('mousemove',function(n){var r=e._tooltip,f=r.content,t,u;f&&!e.isTouching&&(t=e.hitTest(n),t.distance<=r.threshold?(u=e._getLabelContent(t,e.tooltip.content),e._showToolTip(u,new i.Rect(n.clientX,n.clientY,5,5))):e._hideToolTip())});this.hostElement.addEventListener('click',function(n){var s=!0,r,o,h,t,c;e.selectionMode!=nt.None&&(t=e.hitTest(n),r=u._SELECTION_THRESHOLD,e.tooltip&&e.tooltip.threshold&&(r=e.tooltip.threshold),t.distance<=r?(t.pointIndex!=e._selectionIndex&&e.selectedItemPosition!=f.None&&(s=!1),t.pointIndex!=e._selectionIndex&&e._select(t.pointIndex,!0)):e._selectedIndex>=0&&e._select(null));s&&e.isTouching&&(o=e._tooltip,h=o.content,h&&(t=e.hitTest(n),t.distance<=o.threshold?(c=e._getLabelContent(t,e.tooltip.content),e._showToolTip(c,new i.Rect(n.clientX,n.clientY,5,5))):e._hideToolTip()))});this.hostElement.addEventListener('mouseleave',function(){e._hideToolTip()});this.initialize(r);this.refresh()}return __extends(t,n),Object.defineProperty(t.prototype,"binding",{get:function(){return this._binding},set:function(n){n!=this._binding&&(this._binding=i.asString(n,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bindingName",{get:function(){return this._bindingName},set:function(n){n!=this._bindingName&&(this._bindingName=i.asString(n,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startAngle",{get:function(){return this._startAngle},set:function(n){n!=this._startAngle&&(this._startAngle=i.asNumber(n,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offset",{get:function(){return this._offset},set:function(n){n!=this._offset&&(this._offset=i.asNumber(n,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this._innerRadius},set:function(n){n!=this._innerRadius&&(this._innerRadius=i.asNumber(n,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reversed",{get:function(){return this._reversed},set:function(n){n!=this._reversed&&(this._reversed=i.asBoolean(n,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedItemPosition",{get:function(){return this._selectedItemPosition},set:function(n){n!=this._selectedItemPosition&&(this._selectedItemPosition=i.asEnum(n,f,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedItemOffset",{get:function(){return this._selectedItemOffset},set:function(n){n!=this._selectedItemOffset&&(this._selectedItemOffset=i.asNumber(n,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAnimated",{get:function(){return this._isAnimated},set:function(n){n!=this._isAnimated&&(this._isAnimated=n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataLabel",{get:function(){return this._lbl},set:function(n){n!=this._lbl&&(this._lbl=n,this._lbl&&(this._lbl._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(n){if(n!=this._selectedIndex){var t=i.asNumber(n,!0);this._select(t,!0)}},enumerable:!0,configurable:!0}),t.prototype._getLabelsForLegend=function(){return this._labels},t.prototype.hitTest=function(n,t){var f=this._toControl(n,t),i=new b(this,f),o=null,p,s,a,e,r,h,l;if(u._contains(this._rectHeader,f))i._chartElement=c.Header;else if(u._contains(this._rectFooter,f))i._chartElement=c.Footer;else if(u._contains(this._rectLegend,f))i._chartElement=c.Legend,o=this.legend._hitTest(f),o!==null&&o>=0&&o<this._areas.length&&i._setData(null,o);else if(u._contains(this._rectChart,f)){for(p=this._areas.length,s=NaN,e=0;e<p;e++){if(r=f.clone(),this._rotationAngle!=0){var w=this._center.x,k=this._center.y,v=-w+r.x,y=-k+r.y,d=Math.sqrt(v*v+y*y),g=Math.atan2(y,v)-this._rotationAngle*Math.PI/180;r.x=w+d*Math.cos(g);r.y=k+d*Math.sin(g)}if(e==this._selectedIndex&&(r.x-=this._selectedOffset.x,r.y-=this._selectedOffset.y),h=this._areas[e],h.contains(r)&&(i._setData(null,h.tag),i._dist=0,e!=this._selectedIndex))break;l=h.distance(r);l!==undefined&&(isNaN(s)||l<s)&&(s=l,a=h)}i._dist!==0&&a!=null&&(i._setData(null,a.tag),i._dist=s);i._chartElement=c.ChartArea}else i._chartElement=c.None;return i},t.prototype._performBind=function(){var n,i,t,r;if(this._initData(),this._cv&&(this._selectionIndex=this._cv.currentPosition,n=this._cv.items,n))for(i=n.length,t=0;t<i;t++)r=n[t],this._sum+=Math.abs(this._getBindData(r,this._values,this._labels,this.binding,this.bindingName))},t.prototype._initData=function(){this._sum=0;this._values=[];this._labels=[]},t.prototype._getBindData=function(n,t,r,u,f){var o,e=0,s;return u&&(o=n[u]),e=0,i.isNumber(o)?e=i.asNumber(o):o&&(e=parseFloat(o.toString())),!isNaN(e)&&isFinite(e)?t.push(e):(e=0,t.push(e)),f&&n?(s=n[f],s&&(s=s.toString()),r.push(s)):r.push(e.toString()),e},t.prototype._render=function(n){var b,p,s,c,r,a,o,e;this._selectionAnimationID&&clearInterval(this._selectionAnimationID);var k=this.hostElement,w=this._getHostSize(),e=w.width,o=w.height;if((e==0||isNaN(e))&&(e=u._WIDTH),(o==0||isNaN(o))&&(o=u._HEIGHT),b=new i.Size(e,o),n.beginRender(),e>0&&o>0){n.setViewportSize(e,o);this._areas=[];p=this.legend;r=new i.Rect(0,0,e,o);this._rectChart=r.clone();n.startGroup(u._CSS_HEADER);r=this._drawTitle(n,r,this.header,this.headerStyle,!1);n.endGroup();n.startGroup(u._CSS_FOOTER);r=this._drawTitle(n,r,this.footer,this.footerStyle,!0);n.endGroup();this.onRendering(new et(n));e=r.width;o=r.height;a=p._getPosition(e,o);s=p._getDesiredSize(n,a,e,o);switch(a){case f.Right:e-=s.width;c=new i.Point(e,r.top+.5*(o-s.height));break;case f.Left:r.left+=s.width;e-=s.width;c=new i.Point(0,r.top+.5*(o-s.height));break;case f.Top:o-=s.height;c=new i.Point(.5*(e-s.width),r.top);r.top+=s.height;break;case f.Bottom:o-=s.height;c=new i.Point(.5*(e-s.width),r.top+o)}r.width=e;r.height=o;this._pieGroup=n.startGroup(null,null,!0);var h=this._parseMargin(this.plotMargin),v=this.dataLabel,l=v.content&&v.position==ut.Outside,y=l?(i.isNumber(v.offset)?v.offset:0)+24:0;isNaN(h.left)&&(h.left=l?y:t._MARGIN);isNaN(h.right)&&(h.right=l?y:t._MARGIN);isNaN(h.top)&&(h.top=l?y:t._MARGIN);isNaN(h.bottom)&&(h.bottom=l?y:t._MARGIN);r.top+=h.top;o=r.height-(h.top+h.bottom);r.height=o>0?o:24;r.left+=h.left;e=r.width-(h.left+h.right);r.width=e>0?e:24;this._renderData(n,r,this._pieGroup);n.endGroup();s?(this._legendHost=n.startGroup(u._CSS_LEGEND),this._rectLegend=new i.Rect(c.x,c.y,s.width,s.height),this.legend._render(n,c,a,s.width,s.height),n.endGroup()):(this._legendHost=null,this._rectLegend=null);this._rotationAngle=0;this._highlightCurrent();this.dataLabel.content&&this.dataLabel.position!=ut.None&&this._renderLabels(n);this.onRendered(new et(n))}n.endRender()},t.prototype._renderData=function(n,t){var u,f;this._pels=[];this._angles=[];var e=this._sum,o=this.startAngle+180,s=this.innerRadius,r=this.offset;if(e>0){var h=o*Math.PI/180,c=t.left+.5*t.width,l=t.top+.5*t.height,i=Math.min(.5*t.width,.5*t.height);this._center.x=c;this._center.y=l;u=Math.max(r,this.selectedItemOffset);u>0&&(i=i/(1+u),r=r*i);this._radius=i;f=s*i;this._renderPie(n,i,f,h,r);this._highlightCurrent()}},t.prototype._renderPie=function(n,t,i,r,u){this._renderSlices(n,this._values,this._sum,t,i,r,2*Math.PI,u)},t.prototype._getCenter=function(){return this._center},t.prototype._renderSlices=function(n,t,i,r,u,f,e,o){for(var k=t.length,c=f,y=this.reversed==!0,p=this._center,s,w,l,a,h=0;h<k;h++){l=p.x;a=p.y;w=n.startGroup();n.fill=this._getColorLight(h);n.stroke=this._getColor(h);var b=Math.abs(t[h]),s=Math.abs(b-i)<1e-10?e:e*b/i,v=y?c-.5*s:c+.5*s;o>0&&s<e&&(l+=o*Math.cos(v),a+=o*Math.sin(v));this._renderSlice(n,l,a,v,h,r,u,c,s,e);y?c-=s:c+=s;n.endGroup();this._pels.push(w)}},t.prototype._renderSlice=function(n,t,r,u,f,e,o,s,h){var v=this,a=!!this.reversed,l;this._angles.push(u);this.itemFormatter?(l=new b(this,new i.Point(t+e*Math.cos(u),r+e*Math.sin(u)),c.SeriesSymbol),l._setData(null,f),this.itemFormatter(n,l,function(){v._drawSlice(n,f,a,t,r,e,o,s,h)})):this._drawSlice(n,f,a,t,r,e,o,s,h)},t.prototype._renderLabels=function(n){var ct=this._areas.length,h=this.dataLabel,l=h.position,s=2,lt=this._rotationAngle,at=h.connectingLine,ht=h.offset?h.offset:0,c,e,a,rt,ft,o,et,ot,v,st;for(n.stroke='null',n.fill='transparent',n.strokeWidth=1,n.startGroup('wj-data-labels'),c=0;c<ct;c++)if(e=this._areas[c],e){var y=e.radius,t=e.langle+lt,r=1,f=1;l==ut.Center?y*=.5*(1+(e.innerRadius||0)/e.radius):(t=it.clampAngle(t),t<=-170||t>=170?(r=2,f=1):t>=-100&&t<=-80?(r=1,f=2):t>=-10&&t<=10?(r=0,f=1):t>=80&&t<=100?(r=1,f=0):-180<t&&t<-90?(r=2,f=2):-90<=t&&t<0?(r=0,f=2):0<t&&t<90?(r=0,f=0):90<t&&t<180&&(r=2,f=0),l==ut.Inside&&(r=2-r,f=2-f));t*=Math.PI/180;var w=0,k=0,p=0;c==this._selectedIndex&&this.selectedItemOffset>0&&(p=this.selectedItemOffset);p>0&&(w=Math.cos(t)*p*this._radius,k=Math.sin(t)*p*this._radius);a=y;l==ut.Outside?a+=ht:l==ut.Inside&&(a-=ht);var d=e.center.x,g=e.center.y,nt=d-this._center.x,tt=g-this._center.y;this._rotationAngle!=0&&(rt=Math.sqrt(nt*nt+tt*tt),ft=Math.atan2(tt,nt)+this._rotationAngle*Math.PI/180,d=this._center.x+rt*Math.cos(ft),g=this._center.y+rt*Math.sin(ft));o=new i.Point(d+w+a*Math.cos(t),g+k+a*Math.sin(t));h.border&&l!=ut.Center&&(r==0?o.x+=s:r==2&&(o.x-=s),f==0?o.y+=s:f==2&&(o.y-=s));et=new b(this,o);et._setData(null,c);ot=this._getLabelContent(et,h.content);ot&&(v=u._renderText(n,ot,o,r,f,'wj-data-label'),h.border&&n.drawRect(v.left-s,v.top-s,v.width+2*s,v.height+2*s,'wj-data-label-border'),at&&(st=new i.Point(e.center.x+w+y*Math.cos(t),e.center.y+k+y*Math.sin(t)),n.drawLine(o.x,o.y,st.x,st.y,'wj-data-label-line')))}n.endGroup()},t.prototype._drawSlice=function(n,t,r,u,f,e,o,s,h){var c;r?o>0?(h!=0&&n.drawDonutSegment(u,f,e,o,s-h,h),c=new ii(new i.Point(u,f),e,o,s-h,h),c.tag=t,this._areas.push(c)):(h!=0&&n.drawPieSegment(u,f,e,s-h,h),c=new ti(new i.Point(u,f),e,s-h,h),c.tag=t,this._areas.push(c)):(o>0?(h!=0&&n.drawDonutSegment(u,f,e,o,s,h),c=new ii(new i.Point(u,f),e,o,s,h),c.tag=t,this._areas.push(c)):(h!=0&&n.drawPieSegment(u,f,e,s,h),c=new ti(new i.Point(u,f),e,s,h),c.tag=t,this._areas.push(c)),s+=h)},t.prototype._measureLegendItem=function(n,t){var r=new i.Size,f;return r.width=a._LEGEND_ITEM_WIDTH,r.height=a._LEGEND_ITEM_HEIGHT,t&&(f=n.measureString(t,u._CSS_LABEL),r.width+=f.width,r.height<f.height&&(r.height=f.height)),r.width+=3*a._LEGEND_ITEM_MARGIN,r.height+=2*a._LEGEND_ITEM_MARGIN,r},t.prototype._drawLegendItem=function(n,t,r,f){n.strokeWidth=1;var h=a._LEGEND_ITEM_MARGIN,e=null,o=null;e===null&&(e=this._getColorLight(r));o===null&&(o=this._getColor(r));n.fill=e;n.stroke=o;var c=t.top+.5*t.height,l=a._LEGEND_ITEM_WIDTH,s=a._LEGEND_ITEM_HEIGHT;n.drawRect(t.left+h,c-.5*s,l,s,null);f&&u._renderText(n,f,new i.Point(t.left+s+2*h,c),0,1,u._CSS_LABEL)},t.prototype._getLabelContent=function(n,t){return i.isString(t)?this._keywords.replace(t,n):i.isFunction(t)?t(n):null},t.prototype._select=function(n,t){if(t===void 0&&(t=!1),this._highlight(!1,this._selectionIndex),this._selectionIndex=n,this.selectionMode==nt.Point){var i=this._cv;i&&(this._notifyCurrentChanged=!1,i.moveCurrentToPosition(n),this._notifyCurrentChanged=!0)}this.onSelectionChanged();!this.isAnimated&&(this.selectedItemOffset>0||this.selectedItemPosition!=f.None)?this.invalidate():this._highlight(!0,this._selectionIndex,t)},t.prototype._highlightCurrent=function(){if(this.selectionMode!=nt.None){var n=-1,t=this._cv;t&&(n=t.currentPosition);this._highlight(!0,n)}},t.prototype._highlight=function(n,t,i){var r,c,e,o,s,h,l,a;i===void 0&&(i=!1);this.selectionMode==nt.Point&&t!==undefined&&t!==null&&t>=0&&(r=this._pels[t],n?(r&&(r.parentNode.appendChild(r),c=this._find(r,['ellipse']),this._highlightItems(this._find(r,['path','ellipse']),u._CSS_SELECTION,n)),e=this._angles[t],this.selectedItemPosition!=f.None&&e!=0&&(o=0,this.selectedItemPosition==f.Left?o=180:this.selectedItemPosition==f.Top?o=-90:this.selectedItemPosition==f.Bottom&&(o=90),s=o*Math.PI/180-e,s*=180/Math.PI,i&&this.isAnimated?this._animateSelectionAngle(s,.5):(this._rotationAngle=s,this._pieGroup.transform.baseVal.getItem(0).setRotate(s,this._center.x,this._center.y))),h=this.selectedItemOffset,h>0&&c.length==0&&(l=this._selectedOffset.x=Math.cos(e)*h*this._radius,a=this._selectedOffset.y=Math.sin(e)*h*this._radius,r&&r.setAttribute('transform','translate('+l.toFixed()+','+a.toFixed()+')')),this._selectedIndex=t):(r&&(r.parentNode.insertBefore(r,r.parentNode.childNodes.item(t)),r.removeAttribute('transform'),this._highlightItems(this._find(r,['path','ellipse']),u._CSS_SELECTION,n)),this._selectedIndex==t&&(this._selectedIndex=-1)))},t.prototype._animateSelectionAngle=function(n,t){var u=it.clampAngle(this._rotationAngle);n=it.clampAngle(n);var e=n-u,r=this,o=u,s=r._pieGroup;r._selectionAnimationID&&clearInterval(this._selectionAnimationID);this._selectionAnimationID=i.animate(function(n){s==r._pieGroup&&(r._rotationAngle=u=o+e*n,r._pieGroup.transform.baseVal.getItem(0).setRotate(u,r._center.x,r._center.y),n==1&&clearInterval(r._selectionAnimationID),n>.99&&(r.selectedItemOffset>0||r.selectedItemPosition!=f.None)&&r.invalidate())},t*1e3)},t._MARGIN=4,t}(gt);t.FlexPie=at;it=function(){function n(){}return n.clampAngle=function(n){var t=(n+180)%360-180;return t<-180&&(t+=360),t},n}();ti=function(){function n(n,t,i,r){this._isFull=!1;this._center=n;this._radius=t;this._originAngle=i;this._originSweep=r;r>=2*Math.PI&&(this._isFull=!0);this._sweep=.5*r*180/Math.PI;this._angle=it.clampAngle(i*180/Math.PI+this._sweep);this._radius2=t*t}return n.prototype.contains=function(n){var t=n.x-this._center.x,i=n.y-this._center.y,f=t*t+i*i,r,u;return f<=this._radius2&&(r=Math.atan2(i,t)*180/Math.PI,u=it.clampAngle(this._angle)-it.clampAngle(r),this._isFull||Math.abs(u)<=this._sweep)?!0:!1},n.prototype.distance=function(n){if(this.contains(n))return 0;var t=n.x-this._center.x,i=n.y-this._center.y,r=t*t+i*i,u=Math.atan2(i,t)*180/Math.PI,f=it.clampAngle(this._angle)-it.clampAngle(u);return this._isFull||Math.abs(f)<=this._sweep?Math.sqrt(r)-this._radius:undefined},Object.defineProperty(n.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"radius",{get:function(){return this._radius},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"langle",{get:function(){return this._angle},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"angle",{get:function(){return this._originAngle},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sweep",{get:function(){return this._originSweep},enumerable:!0,configurable:!0}),n}();t._PieSegment=ti;ii=function(){function n(n,t,i,r,u){this._isFull=!1;this._center=n;this._radius=t;this._iradius=i;this._originAngle=r;this._originSweep=u;u>=2*Math.PI&&(this._isFull=!0);this._sweep=.5*u*180/Math.PI;this._angle=it.clampAngle(r*180/Math.PI+this._sweep);this._radius2=t*t;this._iradius2=i*i}return n.prototype.contains=function(n){var t=n.x-this._center.x,i=n.y-this._center.y,r=t*t+i*i,u,f;return r>=this._iradius2&&r<=this._radius2&&(u=Math.atan2(i,t)*180/Math.PI,f=it.clampAngle(this._angle-u),this._isFull||Math.abs(f)<=this._sweep)?!0:!1},n.prototype.distance=function(n){return this.contains(n)?0:undefined},Object.defineProperty(n.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"radius",{get:function(){return this._radius},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"langle",{get:function(){return this._angle},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"angle",{get:function(){return this._originAngle},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sweep",{get:function(){return this._originSweep},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"innerRadius",{get:function(){return this._iradius},enumerable:!0,configurable:!0}),n}();t._DonutSegment=ii,function(n){n[n.None=0]="None";n[n.Stacked=1]="Stacked";n[n.Stacked100pc=2]="Stacked100pc"}(t.Stacking||(t.Stacking={}));w=t.Stacking,function(n){n[n.None=0]="None";n[n.Series=1]="Series";n[n.Point=2]="Point"}(t.SelectionMode||(t.SelectionMode={}));nt=t.SelectionMode;ot=function(n){function t(t,r){n.call(this,t,null,!0);this._series=new i.ObservableArray;this._axes=new bi;this._pareas=new ki;this._interpolateNulls=!1;this._legendToggle=!1;this._symbolSize=10;this._dataInfo=new h;this.__barPlotter=null;this.__linePlotter=null;this.__areaPlotter=null;this.__bubblePlotter=null;this.__financePlotter=null;this.__funnelPlotter=null;this._plotters=[];this._rotated=!1;this._stacking=w.None;this._xlabels=[];this._xvals=[];this._lblAreas=[];this.seriesVisibilityChanged=new i.Event;this.applyTemplate('wj-control wj-flexchart',null,null);var f=this;f._series.collectionChanged.addHandler(function(){for(var n,r=f._series,t=0;t<r.length;t++){if(n=i.tryCast(r[t],tt),!n)throw'chartSeries array must contain SeriesBase objects.';n._chart=f;n.axisX&&(n.axisX._chart=f);n.axisY&&(n.axisY._chart=f)}f.refresh()});this._currentRenderEngine=new fi(this.hostElement);this._hitTester=new fr(this);this._legend=new kt(this);this._tooltip=new ri;this._tooltip.showDelay=0;this._lbl=new si;this._lbl._chart=this;this._initAxes();f._axes.collectionChanged.addHandler(function(){for(var t,r=f._axes,n=0;n<r.length;n++){if(t=i.tryCast(r[n],st),!t)throw'axes array must contain Axis objects.';t._chart=f}f.refresh()});f._pareas.collectionChanged.addHandler(function(){for(var t,r=f._pareas,n=0;n<r.length;n++){if(t=i.tryCast(r[n],ui),!t)throw'plotAreas array must contain PlotArea objects.';t._chart=f}f.refresh()});this._keywords=new ni;this.hostElement.addEventListener('click',function(n){var r=f._tooltip,e=r.content,t,u;e&&f.isTouching&&(t=f.hitTest(n),t.distance<=r.threshold?(u=f._getLabelContent(t,f._tooltip.content),f._showToolTip(u,new i.Rect(n.clientX,n.clientY,5,5))):f._hideToolTip())});this.hostElement.addEventListener('mousemove',function(n){var r=f._tooltip,e=r.content,t,u;e&&!f.isTouching&&(t=f.hitTest(n),t.distance<=r.threshold?(u=f._getLabelContent(t,f._tooltip.content),f._showToolTip(u,new i.Rect(n.clientX,n.clientY,5,5))):f._hideToolTip())});this.hostElement.addEventListener('mouseleave',function(){f._hideToolTip()});this.hostElement.addEventListener('click',function(n){if(f.selectionMode!=nt.None){var t=f._hitTestData(n),i=u._SELECTION_THRESHOLD;f.tooltip&&f.tooltip.threshold&&(i=f.tooltip.threshold);t.distance<=i&&t.series?f._select(t.series,t.pointIndex):f.selectionMode==nt.Series?(t=f.hitTest(n),t.chartElement==c.Legend&&t.series?f._select(t.series,null):f._select(null,null)):f._select(null,null)}f.legendToggle===!0&&(t=f.hitTest(n),t.chartElement==c.Legend&&t.series&&(t.series.visibility==y.Legend?t.series.visibility=y.Visible:t.series.visibility==y.Visible&&(t.series.visibility=y.Legend),f.focus()))});this.initialize(r)}return __extends(t,n),t.prototype._initAxes=function(){this._axisX=new st(f.Bottom);this._axisY=new st(f.Left);this._axisX.majorGrid=!1;this._axisX.name='axisX';this._axisY.majorGrid=!0;this._axisY.majorTickMarks=l.None;this._axisY.name='axisY';this._axisX._chart=this;this._axisY._chart=this;this._axes.push(this._axisX);this._axes.push(this._axisY)},Object.defineProperty(t.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axes",{get:function(){return this._axes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axisX",{get:function(){return this._axisX},set:function(n){if(n!=this._axisX){var t=this._axisX=i.asType(n,st);this.beginUpdate();t&&(t.majorGrid===undefined&&(t.majorGrid=!1),t.name===undefined&&(t.name='axisX'),t.position===undefined&&(t.position=f.Bottom),t._axisType=s.X,t._chart=this);this.endUpdate()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axisY",{get:function(){return this._axisY},set:function(n){if(n!=this._axisY){var t=this._axisY=i.asType(n,st);this.beginUpdate();t&&(t.majorGrid===undefined&&(t.majorGrid=!0),t.name===undefined&&(t.name='axisY'),t.majorTickMarks=l.None,t.position===undefined&&(t.position=f.Left),t._axisType=s.Y,t._chart=this);this.endUpdate()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"plotAreas",{get:function(){return this._pareas},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"binding",{get:function(){return this._binding},set:function(n){n!=this._binding&&(this._binding=i.asString(n,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bindingX",{get:function(){return this._bindingX},set:function(n){n!=this._bindingX&&(this._bindingX=i.asString(n,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(n){n!=this._symbolSize&&(this._symbolSize=i.asNumber(n,!1,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"interpolateNulls",{get:function(){return this._interpolateNulls},set:function(n){n!=this._interpolateNulls&&(this._interpolateNulls=i.asBoolean(n),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"legendToggle",{get:function(){return this._legendToggle},set:function(n){n!=this._legendToggle&&(this._legendToggle=i.asBoolean(n))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataLabel",{get:function(){return this._lbl},set:function(n){n!=this._lbl&&(this._lbl=i.asType(n,si),this._lbl&&(this._lbl._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){return this._selection},set:function(n){n!=this._selection&&(this._selection=i.asType(n,tt,!0),this.invalidate())},enumerable:!0,configurable:!0}),t.prototype.onSeriesVisibilityChanged=function(n){this.seriesVisibilityChanged.raise(this,n)},t.prototype.hitTest=function(n,t){var r=this._toControl(n,t),i=new b(this,r),s=null,l,o,h;if(u._contains(this._rectHeader,r))i._chartElement=c.Header;else if(u._contains(this._rectFooter,r))i._chartElement=c.Footer;else if(u._contains(this._rectLegend,r))i._chartElement=c.Legend,s=this.legend._hitTest(r),s!==null&&s>=0&&s<this.series.length&&i._setData(this.series[s]);else if(u._contains(this._rectChart,r))if(l=this._hitTestLabels(r),l)i._chartElement=c.DataLabel,i._dist=0,i._setDataPoint(l.tag);else{var e=this._hitTester.hitTest(r),f=null,v=null;for(o=this.series.length-1;o>=0;o--)if(this.series[o].hitTest!==a.prototype.hitTest&&(h=this.series[o].hitTest(n),h&&((!f||h.distance<f.distance)&&(f=h,v=o),h.distance===0)))break;e&&e.area?f&&f.distance<e.distance?i=f:f&&f.distance==e.distance&&v>e.area.tag.seriesIndex?i=f:(i._setDataPoint(e.area.tag),i._dist=e.distance):f&&(i=f);u._contains(this.axisX._axrect,r)?i._chartElement=c.AxisX:u._contains(this.axisY._axrect,r)?i._chartElement=c.AxisY:u._contains(this._plotRect,r)?i._chartElement=c.PlotArea:u._contains(this._rectChart,r)&&(i._chartElement=c.ChartArea)}else i._chartElement=c.None;return i},t.prototype.pointToData=function(n,t){return i.isNumber(n)&&i.isNumber(t)&&(n=new i.Point(n,t)),n instanceof MouseEvent?(n=new i.Point(n.pageX,n.pageY),n=this._toControl(n)):n=n.clone(),n.x=this.axisX.convertBack(n.x),n.y=this.axisY.convertBack(n.y),n},t.prototype.dataToPoint=function(n,t){i.isNumber(n)&&i.isNumber(t)&&(n=new i.Point(n,t));i.asType(n,i.Point);var r=n.clone();return r.x=this.axisX.convert(r.x),r.y=this.axisY.convert(r.y),r},t.prototype._copy=function(n,t){var u,r,f;if(n=='series'){for(this.series.clear(),u=i.asArray(t),r=0;r<u.length;r++)f=this._createSeries(),i.copy(f,u[r]),this.series.push(f);return!0}return!1},t.prototype._createSeries=function(){return new a},t.prototype._clearCachedValues=function(){for(var t,n=0;n<this._series.length;n++)t=this._series[n],t.itemsSource==null&&t._clearValues()},t.prototype._performBind=function(){var t,u,r,f,n;if(this._xDataType=null,this._xlabels.splice(0),this._xvals.splice(0),this._cv&&(t=this._cv.items,t)){for(u=t.length,r=0;r<u;r++)f=t[r],this._bindingX&&(n=f[this._bindingX],i.isNumber(n)?(this._xvals.push(i.asNumber(n)),this._xDataType=i.DataType.Number):i.isDate(n)&&(this._xvals.push(i.asDate(n).valueOf()),this._xDataType=i.DataType.Date),this._xlabels.push(f[this._bindingX]));this._xvals.length==u?this._xlabels.splice(0):this._xvals.splice(0)}},t.prototype._hitTestSeries=function(n,t){var u=this._toControl(n),i=new b(this,u),f=t,r=this._hitTester.hitTestSeries(u,t);return r&&r.area&&(i._setDataPoint(r.area.tag),i._chartElement=c.PlotArea,i._dist=r.distance),i},t.prototype._hitTestData=function(n){var r=this._toControl(n),i=new b(this,r),t=this._hitTester.hitTest(r,!0);return t&&t.area&&(i._setDataPoint(t.area.tag),i._dist=t.distance),i},t.prototype._hitTestLabels=function(n){for(var i=null,r=this._lblAreas.length,t=0;t<r;t++)if(this._lblAreas[t].contains(n)){i=this._lblAreas[t];break}return i},t._dist2=function(n,t){var i=n.x-t.x,r=n.y-t.y;return i*i+r*r},t._dist=function(n,t,i){return Math.sqrt(u._distToSegmentSquared(n,t,i))},t._distToSegmentSquared=function(n,t,r){var e=u._dist2(t,r),f;return e==0?u._dist2(n,t):(f=((n.x-t.x)*(r.x-t.x)+(n.y-t.y)*(r.y-t.y))/e,f<0)?u._dist2(n,t):f>1?u._dist2(n,r):u._dist2(n,new i.Point(t.x+f*(r.x-t.x),t.y+f*(r.y-t.y)))},t.prototype._isRotated=function(){return this._getChartType()==e.Bar?!this._rotated:this._rotated},t.prototype._getChartType=function(){return null},t.prototype._render=function(n,t){var kt,pt,l,w,r,ut,ft,p,ot,st,ht,dt,gt,d,wt,g,ct,lt,at,nt,a,v,o,vt,it,b,k;t===void 0&&(t=!0);var ti=this.hostElement,bt=this._getHostSize(),h=bt.width,c=bt.height;if((h==0||isNaN(h))&&(h=u._WIDTH),(c==0||isNaN(c))&&(c=u._HEIGHT),kt=new i.Size(h,c),n.beginRender(),h>0&&c>0){n.setViewportSize(h,c);this._hitTester.clear();pt=this.legend;r=new i.Rect(0,0,h,c);this._rectChart=r.clone();n.startGroup(u._CSS_HEADER);r=this._drawTitle(n,r,this.header,this.headerStyle,!1);n.endGroup();n.startGroup(u._CSS_FOOTER);r=this._drawTitle(n,r,this.footer,this.footerStyle,!0);n.endGroup();h=r.width;c=r.height;ut=pt._getPosition(h,c);l=pt._getDesiredSize(n,ut,h,c);switch(ut){case f.Right:h-=l.width;w=new i.Point(h,r.top+.5*(c-l.height));break;case f.Left:r.left+=l.width;h-=l.width;w=new i.Point(0,r.top+.5*(c-l.height));break;case f.Top:c-=l.height;w=new i.Point(.5*(h-l.width),r.top);r.top+=l.height;break;case f.Bottom:c-=l.height;w=new i.Point(.5*(h-l.width),r.top+c)}if(r.width=h,r.height=c,o=this._getPlotter(null),o.stacking=this._stacking,this._curPlotter!=o&&(this._curPlotter&&this._curPlotter.unload(),this._curPlotter=o),o.load(),ft=this._isRotated(),this._dataInfo.analyse(this._series,ft,o.stacking,this._xvals.length>0?this._xvals:null,this.axisX.logBase>0,this.axisY.logBase>0),p=o.adjustLimits(this._dataInfo,r.clone()),ft?(ot=this._dataInfo.getDataTypeX(),ot||(ot=this._xDataType),this.axisX._updateActualLimits(this._dataInfo.getDataTypeY(),p.left,p.right),this.axisY._updateActualLimits(ot,p.top,p.bottom,this._xlabels,this._xvals)):(st=this._dataInfo.getDataTypeX(),st||(st=this._xDataType),this.axisX._updateActualLimits(st,p.left,p.right,this._xlabels,this._xvals),this.axisY._updateActualLimits(this._dataInfo.getDataTypeY(),p.top,p.bottom)),ht=this._getAxes(),this._updateAuxAxes(ht,ft),this._layout(r,kt,n),n.startGroup(u._CSS_PLOT_AREA),n.fill='transparent',n.stroke=null,dt=this.plotAreas.length,dt>0)for(a=0;a<this.plotAreas.length;a++)gt=this.plotAreas[a],gt._render(n);else d=this._plotRect,n.drawRect(d.left,d.top,d.width,d.height);for(n.endGroup(),wt=this._series.length,this._clearPlotters(),g={},a=0;a<wt;a++)ct=this._series[a],ct.getValues(0)&&(lt=ct._getAxisY(),o=this._getPlotter(ct),!lt||lt==this.axisY||o instanceof li?o.seriesCount++:(at=lt._uniqueId,g[at]?g[at].count+=1:g[at]={count:1,index:0}));this.onRendering(new et(n));if(this._getChartType()!==e.Funnel)for(a=0;a<ht.length;a++)nt=ht[a],vt=nt.axisType==s.X?n.startGroup(u._CSS_AXIS_X):n.startGroup(u._CSS_AXIS_Y),nt._hostElement=t?vt:nt._hostElement,nt._render(n),n.endGroup();for(n.startGroup('wj-series-group'),this._plotrectId='plotRect'+(1e6*Math.random()).toFixed(),n.addClipRect(this._plotRect,this._plotrectId),a=0;a<wt;a++){v=this._series[a];v._pointIndexes=[];o=this._getPlotter(v);v._plotter=o;vt=n.startGroup(v.cssClass,o.clipping?this._plotrectId:null);v._hostElement=t?vt:v._hostElement;var ni=v.visibility,yt=v.axisX,tt=v.axisY;if(yt||(yt=this.axisX),tt||(tt=this.axisY),ni==y.Visible||ni==y.Plot){it=g[tt._uniqueId];it?(b=it.index,k=it.count,it.index++,v.onRendering(n,b,k)||o.plotSeries(n,yt,tt,v,this,b,k)):(b=o.seriesIndex,k=o.seriesCount,o.seriesIndex++,v.onRendering(n,b,k)||o.plotSeries(n,yt,tt,v,this,b,k));v.onRendered(n)}n.endGroup()}n.endGroup();this._lblAreas=[];this.dataLabel.content&&this.dataLabel.position!=rt.None&&this._renderLabels(n);l?(this._legendHost=n.startGroup(u._CSS_LEGEND),this._rectLegend=new i.Rect(w.x,w.y,l.width,l.height),n.textFill=u._FG,this.legend._render(n,w,ut,l.width,l.height),n.textFill=null,n.endGroup()):(this._legendHost=null,this._rectLegend=null);this._highlightCurrent();this.onRendered(new et(n))}n.endRender()},t.prototype._renderLabels=function(n){var r=this.series,e=r.length,u,t,f,i;for(n.stroke='null',n.fill='transparent',n.strokeWidth=1,u='wj-data-labels',n.startGroup(u),t=0;t<e;t++)f=r[t],i=this._hitTester._map[t],i&&f._renderLabels(n,i,this,this._lblAreas);n.endGroup()},t.prototype._getAxes=function(){for(var u,t,i,n=[this.axisX,this.axisY],f=this.series.length,r=0;r<f;r++)u=this.series[r],t=u.axisX,t&&n.indexOf(t)===-1&&n.push(t),i=u.axisY,i&&n.indexOf(i)===-1&&n.push(i);return n},t.prototype._clearPlotters=function(){for(var t=this._plotters.length,n=0;n<t;n++)this._plotters[n].clear()},t.prototype._initPlotter=function(n){n.chart=this;n.dataInfo=this._dataInfo;n.hitTester=this._hitTester;this._plotters.push(n)},Object.defineProperty(t.prototype,"_barPlotter",{get:function(){return this.__barPlotter===null&&(this.__barPlotter=new li,this._initPlotter(this.__barPlotter)),this.__barPlotter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_linePlotter",{get:function(){return this.__linePlotter===null&&(this.__linePlotter=new ai,this._initPlotter(this.__linePlotter)),this.__linePlotter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_areaPlotter",{get:function(){return this.__areaPlotter===null&&(this.__areaPlotter=new er,this._initPlotter(this.__areaPlotter)),this.__areaPlotter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_bubblePlotter",{get:function(){return this.__bubblePlotter===null&&(this.__bubblePlotter=new or,this._initPlotter(this.__bubblePlotter)),this.__bubblePlotter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_financePlotter",{get:function(){return this.__financePlotter===null&&(this.__financePlotter=new sr,this._initPlotter(this.__financePlotter)),this.__financePlotter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_funnelPlotter",{get:function(){return this.__funnelPlotter===null&&(this.__funnelPlotter=new hr,this._initPlotter(this.__funnelPlotter)),this.__funnelPlotter},enumerable:!0,configurable:!0}),t.prototype._getPlotter=function(n){var u=this._getChartType(),f=!1,r,t,i;n&&(r=n._getChartType(),r!==null&&r!==undefined&&r!=u&&(u=r,f=!0));switch(u){case e.Column:this._barPlotter.isVolume=!1;this._barPlotter.width=.7;t=this._barPlotter;break;case e.Bar:this._barPlotter.rotated=!this._rotated;this._barPlotter.isVolume=!1;this._barPlotter.width=.7;t=this._barPlotter;break;case e.Line:this._linePlotter.hasSymbols=!1;this._linePlotter.hasLines=!0;this._linePlotter.isSpline=!1;t=this._linePlotter;break;case e.Scatter:this._linePlotter.hasSymbols=!0;this._linePlotter.hasLines=!1;this._linePlotter.isSpline=!1;t=this._linePlotter;break;case e.LineSymbols:this._linePlotter.hasSymbols=!0;this._linePlotter.hasLines=!0;this._linePlotter.isSpline=!1;t=this._linePlotter;break;case e.Area:this._areaPlotter.isSpline=!1;t=this._areaPlotter;break;case e.Bubble:t=this._bubblePlotter;break;case e.Candlestick:i=this._financePlotter;i.isCandle=!0;i.isEqui=!1;i.isArms=!1;i.isVolume=!1;t=i;break;case e.HighLowOpenClose:i=this._financePlotter;i.isCandle=!1;i.isEqui=!1;i.isArms=!1;i.isVolume=!1;t=i;break;case e.Spline:this._linePlotter.hasSymbols=!1;this._linePlotter.hasLines=!0;this._linePlotter.isSpline=!0;t=this._linePlotter;break;case e.SplineSymbols:this._linePlotter.hasSymbols=!0;this._linePlotter.hasLines=!0;this._linePlotter.isSpline=!0;t=this._linePlotter;break;case e.SplineArea:this._areaPlotter.isSpline=!0;t=this._areaPlotter;break;case e.Funnel:t=this._funnelPlotter;break;default:throw'Invalid chart type.';}return t.rotated=this._rotated,u==e.Bar&&(t.rotated=!t.rotated),f&&(t.rotated=this._isRotated()),t},t.prototype._layout=function(n,t,i){this.plotAreas.length>0?this._layoutMultiple(n,t,i):this._layoutSingle(n,t,i)},t.prototype._layoutSingle=function(n,t,r){for(var e,rt,b,u,l,k,tt,ut,it,o=n.width,h=n.height,et=new i.Size(o,.75*h),ot=new i.Size(h,.75*o),a=0,v=0,d=o,g=h,w=0,c=0,y=o,p=h,ft=this._getAxes(),nt=0;nt<ft.length;nt++)u=ft[nt],l=u.origin,u.axisType==s.X?(e=u._getHeight(r,o),e>et.height&&(e=et.height),u._desiredSize=new i.Size(et.width,e),rt=u._hasOrigin=i.isNumber(l)&&l>this.axisY._getMinNum()&&l<this.axisY._getMaxNum(),u.position==f.Bottom?(a=Math.max(a,u._annoSize.width*.5),d=Math.min(d,o-u._annoSize.width*.5),rt?(tt=this._convertY(l,c,p),p=p-Math.max(0,tt+e-p)):p=p-e):u.position==f.Top&&(a=Math.max(a,u._annoSize.width*.5),d=Math.min(d,o-u._annoSize.width*.5),rt?(tt=this._convertY(l,c,p),c=c+Math.max(0,c-(tt-e))):c=c+e)):u.axisType==s.Y&&(e=u._getHeight(r,h),e>ot.height&&(e=ot.height),u._desiredSize=new i.Size(ot.width,e),rt=u._hasOrigin=i.isNumber(l)&&l>this.axisX._getMinNum()&&l<this.axisX._getMaxNum(),u.position==f.Left?(v=Math.max(v,u._annoSize.width*.5),g=Math.min(g,h-u._annoSize.width*.5),rt?(it=this._convertX(l,w,y),w+=Math.max(0,w-(it-e))):w+=e):u.position==f.Right&&(v=Math.max(v,u._annoSize.width*.5),g=Math.min(g,h-u._annoSize.width*.5),rt?(it=this._convertX(l,w,y),y=y-Math.max(0,it+e-y)):y=y-e));for(b=this._parseMargin(this.plotMargin),a=isNaN(b.left)?w=Math.max(a,w)+n.left:w=b.left,d=isNaN(b.right)?y=Math.min(d,y)+n.left:y=t.width-b.right,v=isNaN(b.top)?c=Math.max(v,c)+n.top:c=b.top,g=isNaN(b.bottom)?p=Math.min(g,p)+n.top:p=t.height-b.bottom,o=Math.max(1,d-a),h=Math.max(1,g-v),this._plotRect=new i.Rect(a,v,o,h),r.stroke=null,nt=0;nt<ft.length;nt++)u=ft[nt],l=u.origin,u.axisType==s.X?(u._hasOrigin?(tt=this._convertY(l,this._plotRect.top,this._plotRect.bottom),u.position==f.Bottom?(k=new i.Rect(a,tt,o,u._desiredSize.height),p+=Math.max(0,k.bottom-this._plotRect.bottom)):u.position==f.Top&&(k=new i.Rect(a,tt-u._desiredSize.height,o,u._desiredSize.height),c-=Math.max(0,this._plotRect.top-k.top))):u.position==f.Bottom?(k=new i.Rect(a,p,o,u._desiredSize.height),p+=u._desiredSize.height):u.position==f.Top?(k=new i.Rect(a,c-u._desiredSize.height,o,u._desiredSize.height),c-=u._desiredSize.height):k=new i.Rect(a,c,o,1),u._layout(k,this._plotRect)):u.axisType==s.Y&&(u._hasOrigin?(it=this._convertX(l,this._plotRect.left,this._plotRect.right),u.position==f.Left?(ut=new i.Rect(it-u._desiredSize.height,v,h,u._desiredSize.height),w-=u._desiredSize.height):u.position==f.Right&&(ut=new i.Rect(it,v,h,u._desiredSize.height),y+=u._desiredSize.height)):u.position==f.Left?(ut=new i.Rect(w-u._desiredSize.height,v,h,u._desiredSize.height),w-=u._desiredSize.height):u.position==f.Right?(ut=new i.Rect(y,v,h,u._desiredSize.height),y+=u._desiredSize.height):ut=new i.Rect(w,v,h,1),u._layout(ut,this._plotRect))},t.prototype._layoutMultiple=function(n,t,r){for(var pt,wt,lt,at,tt,h,it,dt,ut,ti,c,e,ft,u,d,gt,rt,l=n.width,a=n.height,b=[],k=[],ni=this._getAxes(),ii=ni.length,o=0;o<ii;o++)if(u=ni[o],u._plotrect=null,u.axisType==s.X){for(pt=u.plotArea?u.plotArea.column:0;b.length<=pt;)b.push(new wi);b[pt].axes.push(u)}else if(u.axisType==s.Y){for(wt=u.plotArea?u.plotArea.row:0;k.length<=wt;)k.push(new wi);k[wt].axes.push(u)}var et=b.length,ot=k.length,bt=new i.Size(l,.3*a),kt=new i.Size(a,.3*l),g=0,nt=0,ht=l,ct=a;for(h=0;h<et;h++)for(e=b[h],e.right=l,e.bottom=a,o=0;o<e.axes.length;o++)u=e.axes[o],lt=u._getHeight(r,u.axisType==s.X?l:a),lt>bt.height&&(lt=bt.height),at=new i.Size(bt.width,lt),u._desiredSize=at,h==0&&(e.left=Math.max(e.left,u._annoSize.width*.5)),h==et-1&&(e.right=Math.min(e.right,l-u._annoSize.width*.5)),u.position==f.Bottom?e.bottom-=at.height:u.position==f.Top&&(e.top+=at.height);for(c=0;c<ot;c++)for(e=k[c],e.right=l,e.bottom=a,o=0;o<e.axes.length;o++)u=e.axes[o],tt=new i.Size(kt.width,u._getHeight(r,u.axisType==s.X?l:a)),tt.height>kt.height&&(tt.height=kt.height),u._desiredSize=tt,c==0&&(e.top=Math.max(e.top,u._annoSize.width*.5)),c==ot-1&&(e.bottom=Math.min(e.bottom,a-u._annoSize.width*.5)),u.position==f.Left?e.left+=tt.height:u.position==f.Right&&(e.right-=tt.height);var v=0,y=0,p=l,w=a;for(h=0;h<et;h++)e=b[h],v=Math.max(v,e.left),y=Math.max(y,e.top),p=Math.min(p,e.right),w=Math.min(w,e.bottom);for(c=0;c<ot;c++)e=k[c],v=Math.max(v,e.left),y=Math.max(y,e.top),p=Math.min(p,e.right),w=Math.min(w,e.bottom);v=g=Math.max(g,v);p=ht=Math.min(ht,p);y=nt=Math.max(nt,y);w=ct=Math.min(ct,w);this._plotRect=new i.Rect(g,nt,ht-g,ct-nt);var vt=this._plotRect.clone(),st=g,yt=this.plotAreas._calculateWidths(this._plotRect.width,et);for(h=0;h<et;h++){for(w=ct,y=nt,e=b[h],it=yt[h],o=0;o<e.axes.length;o++)u=e.axes[o],d=new i.Rect(st,vt.top,it,vt.height),u.position==f.Bottom?(dt=new i.Rect(st,w,it,u._desiredSize.height),w+=u._desiredSize.height):u.position==f.Top&&(dt=new i.Rect(st,y-u._desiredSize.height,it,u._desiredSize.height),y-=u._desiredSize.height),u._layout(dt,d);for(o=0;o<this.plotAreas.length;o++)rt=this.plotAreas[o],rt.column==h&&rt._setPlotX(st,it);st+=it}for(ut=nt,ti=this.plotAreas._calculateHeights(this._plotRect.height,ot),c=0;c<ot;c++){for(v=g,p=ht,e=k[c],ft=ti[c],o=0;o<e.axes.length;o++)u=e.axes[o],d=new i.Rect(vt.left,ut,vt.width,ft),u._plotrect?(d.left=u._plotrect.left,d.width=u._plotrect.width):yt&&yt.length>0&&(d.width=yt[0]),u.position==f.Left?(gt=new i.Rect(v-u._desiredSize.height,ut,ft,u._desiredSize.height),v-=u._desiredSize.height):u.position==f.Right&&(gt=new i.Rect(p,ut,ft,u._desiredSize.height),p+=u._desiredSize.height),u._layout(gt,d);for(o=0;o<this.plotAreas.length;o++)rt=this.plotAreas[o],rt.row==c&&rt._setPlotY(ut,ft);ut+=ft}},t.prototype._convertX=function(n,t,i){var r=this.axisX;return r.reversed?i-(i-t)*(n-r._getMinNum())/(r._getMaxNum()-r._getMinNum()):t+(i-t)*(n-r._getMinNum())/(r._getMaxNum()-r._getMinNum())},t.prototype._convertY=function(n,t,i){var r=this.axisY;return r.reversed?t+(i-t)*(n-r._getMinNum())/(r._getMaxNum()-r._getMinNum()):i-(i-t)*(n-r._getMinNum())/(r._getMaxNum()-r._getMinNum())},t.prototype._getLabelContent=function(n,t){return i.isString(t)?this._keywords.replace(t,n):i.isFunction(t)?t(n):null},t.prototype._select=function(n,t){var r=!1,i;(n!=this._selection||t!=this._selectionIndex)&&(r=!0);this._selection&&this._highlight(this._selection,!1,this._selectionIndex);this._selection=n;this._selectionIndex=t;this._selection&&this._highlight(this._selection,!0,this._selectionIndex);this.selectionMode==nt.Point&&(i=n?n.collectionView:this._cv,i&&(this._notifyCurrentChanged=!1,i.moveCurrentToPosition(n?t:-1),this._notifyCurrentChanged=!0));r&&this.onSelectionChanged()},t.prototype._highlightCurrent=function(){var t,i,n;this.selectionMode!=nt.None&&(t=this._selection,i=-1,t&&(n=t.collectionView,n||(n=this._cv),n&&(i=n.currentPosition),this._highlight(t,!0,i)))},t.prototype._highlight=function(n,t,r){var s,f,o,e;n=i.asType(n,tt,!0);this.selectionMode==nt.Series?(s=this.series.indexOf(n),f=n.hostElement,t?f.parentNode.appendChild(f):f.parentNode.insertBefore(f,f.parentNode.childNodes.item(s)),e=this._find(f,['rect','ellipse','polyline','polygon','line','path']),this._highlightItems(e,u._CSS_SELECTION,t),n.legendElement&&this._highlightItems(this._find(n.legendElement,['rect','ellipse','line']),u._CSS_SELECTION,t)):this.selectionMode==nt.Point&&(s=this.series.indexOf(n),f=n.hostElement,t?(f.parentNode.appendChild(f),o=n.getPlotElement(r),o&&(o.nodeName!='g'&&this._highlightItems([o],u._CSS_SELECTION,t),e=this._find(o,['line','rect','ellipse','path','polygon']),this._highlightItems(e,u._CSS_SELECTION,t))):(f.parentNode.insertBefore(f,f.parentNode.childNodes.item(s)),e=this._find(f,['rect','ellipse','line','path','polygon']),this._highlightItems(e,u._CSS_SELECTION,t)))},t.prototype._updateAuxAxes=function(n,t){for(var o,h,l,f,e,u,r,a,c=2;c<n.length;c++){for(o=n[c],o._chart=this,h=[],u=0;u<this.series.length;u++)l=this.series[u],(l.axisX==o||l.axisY==o)&&h.push(l);for(u=0;u<h.length;u++)r=h[u].getDataRect()||h[u]._getDataRect(),r&&(o.axisType==s.X&&!t||o.axisType==s.Y&&t?((f===undefined||r.left<f)&&(f=r.left),(e===undefined||r.right>e)&&(e=r.right)):((f===undefined||r.top<f)&&(f=r.top),(e===undefined||r.bottom>e)&&(e=r.bottom)));a=h[0].getDataType(0);a==null&&(a=i.DataType.Number);n[c]._updateActualLimits(a,f,e)}},t._contains=function(n,t){return n&&t?t.x>=n.left&&t.x<=n.right&&t.y>=n.top&&t.y<=n.bottom:!1},t._intersects=function(n,t){return n.left>t.right||n.right<t.left||n.top>t.bottom||n.bottom<t.top?!1:!0},t._toOADate=function(n){return n.valueOf()},t._fromOADate=function(n){return new Date(n)},t._renderText=function(n,t,r,u,f,e,o,s,h){var c=n.measureString(t,e,o,s),l=r.x,a=r.y,v;switch(u){case 1:l-=.5*c.width;break;case 2:l-=c.width}switch(f){case 1:a+=.5*c.height;break;case 0:a+=c.height}return v=new i.Rect(l,a-c.height,c.width,c.height),h?h(v)?(n.drawString(t,new i.Point(l,a),e,s),v):null:(n.drawString(t,new i.Point(l,a),e,s),v)},t._renderRotatedText=function(n,t,r,u,f,e,o,s,h,c){var l=n.measureString(t,s,h,c),a=r.x,v=r.y;switch(u){case 1:a-=.5*l.width;break;case 2:a-=l.width}switch(f){case 1:v+=.5*l.height;break;case 0:v+=l.height}n.drawStringRotated(t,new i.Point(a,v),e,o,s,c)},t._CSS_AXIS_X='wj-axis-x',t._CSS_AXIS_Y='wj-axis-y',t._CSS_LINE='wj-line',t._CSS_GRIDLINE='wj-gridline',t._CSS_TICK='wj-tick',t._CSS_GRIDLINE_MINOR='wj-gridline-minor',t._CSS_TICK_MINOR='wj-tick-minor',t._CSS_LABEL='wj-label',t._CSS_LEGEND='wj-legend',t._CSS_HEADER='wj-header',t._CSS_FOOTER='wj-footer',t._CSS_TITLE='wj-title',t._CSS_SELECTION='wj-state-selected',t._CSS_PLOT_AREA='wj-plot-area',t._FG='#666',t._epoch=new Date(1899,11,30).getTime(),t._msPerDay=864e5,t}(gt);t.FlexChartCore=ot;wi=function(){function n(){this._axes=[];this.left=0;this.right=0;this.top=0;this.bottom=0}return Object.defineProperty(n.prototype,"axes",{get:function(){return this._axes},enumerable:!0,configurable:!0}),n}();h=function(){function n(){this.stackAbs={};this._xvals=null}return n.prototype.analyse=function(t,r,u,f,o,s){var vt=this,ct,b,h,et,v,d,g,ut,l,p,a,it,k,ft,ot,st;this.minY=NaN;this.maxY=NaN;this.minX=NaN;this.maxX=NaN;this.minXp=NaN;this.minYp=NaN;this.dx=0;var nt={},tt={},rt={};if(this.dataTypeX=null,this.dataTypeY=null,this._xvals=f,f!=null)for(ct=f.length,b=0;b<ct;b++)a=f[b],(isNaN(this.minX)||this.minX>a)&&(this.minX=a),(isNaN(this.maxX)||this.maxX<a)&&(this.maxX=a),a>0&&(isNaN(this.minXp)||this.minXp>a)&&(this.minXp=a),b>0&&(d=Math.abs(a-f[b-1]),!isNaN(d)&&(d<this.dx||this.dx==0)&&(this.dx=d));for(b=0;b<t.length;b++){var c=t[b],ht=c._getChartType(),lt=c.chartType!==undefined,at=c.visibility;if(at!=y.Hidden&&at!=y.Legend){if(h=c.getDataRect(),h&&(!isNaN(this.minX)&&this.minX<h.left&&(et=h.right,h.left=this.minX,h.width=et-this.minX),!isNaN(this.maxX)&&this.maxX>h.right&&(h.width=this.maxX-h.left),!isNaN(this.minY)&&this.minY<h.top&&(et=h.bottom,h.top=this.minY,h.height=et-this.minY),!isNaN(this.maxY)&&this.maxY>h.bottom&&(h.height=this.maxY-h.top)),v=null,r?c._isCustomAxisY()||(v=c.getValues(1)):c._isCustomAxisX()||(v=c.getValues(1)),v)for(this.dataTypeX||(this.dataTypeX=c.getDataType(1)),l=0;l<v.length;l++)p=v[l],n.isValid(p)&&((isNaN(this.minX)||this.minX>p)&&(this.minX=p),(isNaN(this.maxX)||this.maxX<p)&&(this.maxX=p),l>0&&(!ht||ht==e.Column||ht==e.Bar)&&(d=Math.abs(p-v[l-1]),!isNaN(d)&&d>0&&(d<this.dx||this.dx==0)&&(this.dx=d)));if(g=null,ut=!1,r?(ut=c._isCustomAxisX(),g=c.getValues(0)):(ut=c._isCustomAxisY(),g=c.getValues(0)),g&&(this.dataTypeY||ut||(this.dataTypeY=c.getDataType(0)),isNaN(this.minX)?this.minX=0:v||f||(this.minX=Math.min(this.minX,0)),isNaN(this.maxX)?this.maxX=g.length-1:v||f||(this.maxX=Math.max(this.maxX,g.length-1)),!ut))for(l=0;l<g.length;l++)p=g[l],a=v?i.asNumber(v[l],!0):f?i.asNumber(f[l],!0):l,i.isArray(p)?p.forEach(function(n){vt._parseYVal(n,a,lt,rt,nt,tt)}):this._parseYVal(p,a,lt,rt,nt,tt);it=c.getDataRect(new i.Rect(this.minX,this.minY,this.maxX-this.minX,this.maxY-this.minY),h);it&&(this.minX=it.left,this.maxX=it.right,this.minY=it.top,this.maxY=it.bottom)}}if(u==w.Stacked){for(k in nt)nt[k]>this.maxY&&(this.maxY=nt[k]);for(k in tt)tt[k]<this.minY&&(this.minY=tt[k])}else if(u==w.Stacked100pc){this.minY=0;this.maxY=1;for(k in rt)ft=rt[k],isFinite(ft)&&ft!=0&&(ot=nt[k],st=tt[k],isFinite(ot)&&(ot=Math.min(ot/ft,this.maxY)),isFinite(st)&&(st=Math.max(st/ft,this.minY)))}this.stackAbs=rt;o&&(r?this.minY=isNaN(this.minYp)?1:this.minYp:this.minX=isNaN(this.minXp)?1:this.minXp);s&&(r?this.minX=isNaN(this.minXp)?1:this.minXp:this.minY=isNaN(this.minYp)?1:this.minYp)},n.prototype._parseYVal=function(t,i,r,u,f,e){n.isValid(t)&&((isNaN(this.minY)||this.minY>t)&&(this.minY=t),(isNaN(this.maxY)||this.maxY<t)&&(this.maxY=t),r||(t>0?(isNaN(f[i])?f[i]=t:f[i]+=t,(isNaN(this.minYp)||this.minYp>t)&&(this.minYp=t)):isNaN(e[i])?e[i]=t:e[i]+=t,isNaN(u[i])?u[i]=Math.abs(t):u[i]+=Math.abs(t)))},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinXp=function(){return this.minXp},n.prototype.getMinYp=function(){return this.minYp},n.prototype.getDeltaX=function(){return this.dx},n.prototype.getDataTypeX=function(){return this.dataTypeX},n.prototype.getDataTypeY=function(){return this.dataTypeY},n.prototype.getStackedAbsSum=function(n){var t=this.stackAbs[n];return isFinite(t)?t:0},n.prototype.getXVals=function(){return this._xvals},n.isValid=function(n){return isFinite(n)},n}();t._DataInfo=h;ri=function(n){function t(){n.call(this);this._content='<b>{seriesName}</b><br/>{x} {y}';this._threshold=15}return __extends(t,n),Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(n){n!=this._content&&(this._content=n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"threshold",{get:function(){return this._threshold},set:function(n){n!=this._threshold&&(this._threshold=i.asNumber(n))},enumerable:!0,configurable:!0}),t}(i.Tooltip);t.ChartTooltip=ri,function(n){n[n.Column=0]="Column";n[n.Bar=1]="Bar";n[n.Scatter=2]="Scatter";n[n.Line=3]="Line";n[n.LineSymbols=4]="LineSymbols";n[n.Area=5]="Area";n[n.Bubble=6]="Bubble";n[n.Candlestick=7]="Candlestick";n[n.HighLowOpenClose=8]="HighLowOpenClose";n[n.Spline=9]="Spline";n[n.SplineSymbols=10]="SplineSymbols";n[n.SplineArea=11]="SplineArea";n[n.Funnel=12]="Funnel"}(t.ChartType||(t.ChartType={}));e=t.ChartType;u=function(n){function t(t,i){n.call(this,t,null);this._chartType=e.Column;this.initialize(i)}return __extends(t,n),t.prototype._getChartType=function(){return this._chartType},Object.defineProperty(t.prototype,"chartType",{get:function(){return this._chartType},set:function(n){n!=this._chartType&&(this._chartType=i.asEnum(n,e),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotated",{get:function(){return this._rotated},set:function(n){n!=this._rotated&&(this._rotated=i.asBoolean(n),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stacking",{get:function(){return this._stacking},set:function(n){n!=this._stacking&&(this._stacking=i.asEnum(n,w),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},set:function(n){n!=this._options&&(this._options=n,this.invalidate())},enumerable:!0,configurable:!0}),t}(ot);t.FlexChart=u,function(n){n[n.None=0]="None";n[n.Left=1]="Left";n[n.Top=2]="Top";n[n.Right=3]="Right";n[n.Bottom=4]="Bottom";n[n.Auto=5]="Auto"}(t.Position||(t.Position={}));f=t.Position,function(n){n[n.X=0]="X";n[n.Y=1]="Y"}(t.AxisType||(t.AxisType={}));s=t.AxisType,function(n){n[n.Auto=0]="Auto";n[n.Show=1]="Show"}(t.OverlappingLabels||(t.OverlappingLabels={}));wt=t.OverlappingLabels,function(n){n[n.None=0]="None";n[n.Outside=1]="Outside";n[n.Inside=2]="Inside";n[n.Cross=3]="Cross"}(t.TickMark||(t.TickMark={}));l=t.TickMark;st=function(){function n(t){this._GRIDLINE_WIDTH=.25;this._LINE_WIDTH=1;this._TICK_WIDTH=1;this._TICK_HEIGHT=4;this._TICK_OVERLAP=1;this._TICK_LABEL_DISTANCE=4;this._minorGrid=!1;this._labels=!0;this._axisLine=!0;this._isTimeAxis=!1;this._labelPadding=2;this.rangeChanged=new i.Event;this._customConvert=null;this._customConvertBack=null;this.__uniqueId=n._id++;this._position=t;t==f.Bottom||t==f.Top?this._axisType=s.X:(this._axisType=s.Y,this._axisLine=!1);this._minorTickMarks=l.None;this._overlap=wt.Auto}return Object.defineProperty(n.prototype,"hostElement",{get:function(){return this._hostElement},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"actualMin",{get:function(){return this._isTimeAxis?new Date(this._actualMin):this._actualMin},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"actualMax",{get:function(){return this._isTimeAxis?new Date(this._actualMax):this._actualMax},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"min",{get:function(){return this._min},set:function(n){n!=this._min&&(this._min=i.isDate(n)?i.asDate(n,!0):i.asNumber(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"max",{get:function(){return this._max},set:function(n){n!=this._max&&(this._max=i.isDate(n)?i.asDate(n,!0):i.asNumber(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"reversed",{get:function(){return this._reversed},set:function(n){this._reversed!=n&&(this._reversed=i.asBoolean(n),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"position",{get:function(){return this._position},set:function(n){n!=this._position&&(this._position=i.asEnum(n,f,!1),this._axisType=this._position==f.Bottom||this._position==f.Top?s.X:s.Y,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"majorUnit",{get:function(){return this._majorUnit},set:function(n){n!=this._majorUnit&&(this._majorUnit=i.asNumber(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"minorUnit",{get:function(){return this._minorUnit},set:function(n){n!=this._minorUnit&&(this._minorUnit=i.asNumber(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this._name},set:function(n){n!=this._name&&(this._name=i.asString(n,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"title",{get:function(){return this._title},set:function(n){n!=this._title&&(this._title=i.asString(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"format",{get:function(){return this._format},set:function(n){n!=this._format&&(this._format=i.asString(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"majorGrid",{get:function(){return this._majorGrid},set:function(n){n!=this._majorGrid&&(this._majorGrid=i.asBoolean(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"majorTickMarks",{get:function(){return this._majorTickMarks},set:function(n){n!=this._majorTickMarks&&(this._majorTickMarks=i.asEnum(n,l,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"minorGrid",{get:function(){return this._minorGrid},set:function(n){n!=this._minorGrid&&(this._minorGrid=i.asBoolean(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"minorTickMarks",{get:function(){return this._minorTickMarks},set:function(n){n!=this._minorTickMarks&&(this._minorTickMarks=i.asEnum(n,l,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"axisLine",{get:function(){return this._axisLine},set:function(n){n!=this._axisLine&&(this._axisLine=i.asBoolean(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"labels",{get:function(){return this._labels},set:function(n){n!=this._labels&&(this._labels=i.asBoolean(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"labelAlign",{get:function(){return this._labelAlign},set:function(n){n!=this._labelAlign&&(this._labelAlign=i.asString(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"labelAngle",{get:function(){return this._labelAngle},set:function(n){n!=this._labelAngle&&(this._labelAngle=i.asNumber(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"origin",{get:function(){return this._origin},set:function(n){n!=this._origin&&(this._origin=i.asNumber(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"overlappingLabels",{get:function(){return this._overlap},set:function(n){n!=this._overlap&&(this._overlap=i.asEnum(n,wt,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemsSource",{get:function(){return this._items},set:function(n){this._items!=n&&(this._cv&&(this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=n,this._cv=i.asCollectionView(n),this._cv!=null&&this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binding",{get:function(){return this._binding},set:function(n){n!=this._binding&&(this._binding=i.asString(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemFormatter",{get:function(){return this._ifmt},set:function(n){this._ifmt!=n&&(this._ifmt=i.asFunction(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"logBase",{get:function(){return this._logBase},set:function(n){n!=this._logBase&&(this._logBase=i.asNumber(n,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"plotArea",{get:function(){return this._parea},set:function(n){n!=this._parea&&(this._parea=i.asType(n,ui,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"labelPadding",{get:function(){return this._labelPadding},set:function(n){n!=this._labelPadding&&(this._labelPadding=i.asNumber(n,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_groupClass",{get:function(){return this.axisType===s.X?ot._CSS_AXIS_X:ot._CSS_AXIS_Y},enumerable:!0,configurable:!0}),n.prototype.onRangeChanged=function(n){this.rangeChanged.raise(this,n)},n.prototype._isOverlapped=function(n,t,i){var u=this._lbls,r,f,e,o;if(u!=null&&u.length>1){var s=u.length,h=this._values&&this._values.length==s?this._values:null,c=0,l=0;for(r=0;r<s;r++)if(f=h?h[r]:r,f>=this._actualMin&&f<=this._actualMax){if(e=t*(f-this._actualMin)/(this._actualMax-this._actualMin),o=n.measureString(u[r],i,this._groupClass),r>0&&Math.abs(e-c)<Math.max(o.width,l)+12)return!0;c=e;l=o.width}}return!1},n.prototype._getHeight=function(n,t){var d,g,h,nt,c,r,o,rt,a,f;this._actualAngle=undefined;var v=u._CSS_LABEL,ut=u._CSS_TITLE,tt=this._actualMax-this._actualMin,k=this._nicePrecision(tt);(k<0||k>15)&&(k=0);var y=.1*tt,p=this._lbls,w=this.labelAngle;if(this.labels&&this._chart._getChartType()!==e.Funnel){if(y=this._updateAutoFormat(y),p!=null&&p.length>0){for(d=p.length,g=this._values&&this._values.length==d?this._values:null,this._annoSize=new i.Size,h=0;h<d;h++)nt=g?g[h]:h,nt>=this._actualMin&&nt<=this._actualMax&&(r=n.measureString(p[h],v,this._groupClass),this.axisType==s.X?r.width>this._annoSize.width&&(this._annoSize.width=r.width):r.width>this._annoSize.width&&(this._annoSize.width=r.width),r.height>this._annoSize.height&&(this._annoSize.height=r.height));w===undefined&&this.axisType==s.X&&(this._isOverlapped(n,t,v)?w=this._actualAngle=-45:this._actualAngle=0)}else c=this._formatValue(this._actualMin-y),r=n.measureString(c,v,this._groupClass),this._annoSize=r,c=this._formatValue(this._actualMax+y),r=n.measureString(c,v,this._groupClass),r.width>this._annoSize.width&&(this._annoSize.width=r.width),r.height>this._annoSize.height&&(this._annoSize.height=r.height);if(w){var b=w*Math.PI/180,it=this._annoSize.width,o=this._annoSize.height;this._annoSize.width=it*Math.abs(Math.cos(b))+o*Math.abs(Math.sin(b));this._annoSize.height=it*Math.abs(Math.sin(b))+o*Math.abs(Math.cos(b))}}else this._annoSize=new i.Size;return o=2*this._labelPadding,o+=this._axisType==s.X?this._annoSize.height:this._annoSize.width+this._TICK_LABEL_DISTANCE+2,rt=this._TICK_HEIGHT,a=this._TICK_OVERLAP,f==l.Outside?a=1:f==l.Inside?a=-1:f==l.Cross&&(a=0),f=this.majorTickMarks,(f===undefined||f===null)&&(f=l.Outside),f!=l.None&&(o+=.5*(1+a)*rt),this._title&&(c=this._title,this._szTitle=n.measureString(c,ut,this._groupClass),o+=this._szTitle.height),n.fontSize=null,o},n.prototype._updateAutoFormat=function(n){if(this._isTimeAxis){var t=this.format,r=.001*(this._actualMax-this._actualMin)/10,u=new v(r*v.TicksPerSecond),i=isNaN(this._majorUnit)?vt.NiceTimeSpan(u,t):v.fromDays(this._majorUnit);t||(this._tfmt=vt.GetTimeDefaultFormat(1e3*i.TotalSeconds,0));n=i.TotalSeconds}return n},n.prototype._updateActualLimitsByChartType=function(n,t,i){if(n&&n.length>0&&!this._isTimeAxis){var r=this._chart._getChartType();r!=e.Column&&r!=e.Bar&&(t-=.5,i+=.5)}return{min:t,max:i}},n.prototype._updateActualLimits=function(n,t,r,u,f){var l,a,v,e,o,s,y,b,k,h,c,p,w;if(u===void 0&&(u=null),f===void 0&&(f=null),l=this._actualMin,a=this._actualMax,this._isTimeAxis=n==i.DataType.Date,v=this._updateActualLimitsByChartType(u,t,r),t=v.min,r=v.max,e=this._min,o=this._max,i.isDate(e)&&(e=e.valueOf()),i.isDate(o)&&(o=o.valueOf()),this._actualMin=e!==null&&e!==undefined?e:t,this._actualMax=o!==null&&o!==undefined?o:r,this._actualMin==this._actualMax&&(this._actualMin-=.5,this._actualMax+=.5),this.logBase>0&&(s=this.logBase,y=Math.log(s),this._max||(b=Math.ceil(Math.log(this._actualMax)/y),this._actualMax=Math.pow(s,b)),this._min||(k=Math.floor(Math.log(this._actualMin)/y),this._actualMin=Math.pow(s,k)),(this._actualMin<=0||isNaN(this._actualMin))&&(this._actualMin=1),this._actualMax<this._actualMin&&(this._actualMax=this._actualMin+1)),(l==this._actualMin||isNaN(l)&&isNaN(this._actualMin))&&(a==this._actualMax||isNaN(a)&&isNaN(this._actualMax))||this.onRangeChanged(),this._items){this._values=[];this._lbls=[];var nt=this._items.length,d='value',g='text';for(this.binding&&(h=this.binding.split(','),h.length==2&&(d=h[0],g=h[1])),c=0;c<nt;c++)p=this._items[c],w=p[d],i.isNumber(w)&&(this._values.push(w),this._lbls.push(p[g]))}else this._lbls=u,this._values=f},n.prototype._layout=function(n,t){var r=this.axisType==s.Y,u=this._position!=f.Top&&this._position!=f.Right;this._plotrect=t;this._axrect=r?new i.Rect(n.left,n.top,n.height,n.width):n},n.prototype._render=function(t){var e,o,a,p,nt,tt,i;if(this.position!=f.None){this._vals={};e=0;this.labelAngle&&(e=this.labelAngle,e>90?e=90:e<-90&&(e=-90));this.labelAngle===undefined&&this._actualAngle!==undefined&&(e=this._actualAngle);var ut=this.axisType==s.Y,ft=this._position!=f.Top&&this._position!=f.Right,d=u._FG,w=this._actualMax-this._actualMin;if(!isNaN(w)){o=this._calcMajorUnit();o==0&&(o=this._niceTickNumber(w)*.1);var y=Math.min(n.MAX_MAJOR,Math.floor(w/o)+1),r=[],h=[];if(this._rects=[],this._vals.major=r,this._vals.hasLbls=[],a=Math.floor(this._actualMin/o)*o,a<this._actualMin&&(a+=o),p=!1,this._lbls&&this._lbls.length>0)if(h=this._lbls,this._values.length==0)for(p=!0,i=0;i<h.length;i++)r.push(i);else r=this._values;else this._isTimeAxis?this._createTimeLabels(a,y,r,h):this.logBase?this._createLogarithmicLabels(this._actualMin,this._actualMax,this.majorUnit,r,h,!0):this._createLabels(a,y,o,r,h);y=Math.min(r.length,h.length);t.textFill=d;var g=this._TICK_HEIGHT,v=this._TICK_OVERLAP,c=this.majorTickMarks;for((c===undefined||c===null)&&(c=l.Outside),c==l.Outside?v=1:c==l.Inside?v=-1:c==l.Cross&&(v=0),nt=.5*(v-1)*g,tt=.5*(1+v)*g,i=0;i<y;i++){var it=!0,b=r[i],rt=h[i],k=this.labels;k&&(p||this.itemsSource)&&this.majorUnit&&i%this.majorUnit!=0&&(k=!1);b>=this._actualMin&&b<=this._actualMax&&(it=this._renderLabelsAndTicks(t,i,b,rt,e,c,k,nt,tt));this._vals.hasLbls.push(it)}}(this.minorGrid||this.minorTickMarks!=l.None)&&this._renderMinor(t,r,p);t.stroke=d;t.fontSize=null;this._renderLineAndTitle(t);t.stroke=null;t.fontSize=null;t.textFill=null;t.strokeWidth=null}},n.prototype._renderLineAndTitle=function(n){var h=this.axisType==s.Y,o=this._position!=f.Top&&this._position!=f.Right,r=u._CSS_TITLE,e=u._CSS_LINE,t;h?o?(this._title&&(t=new i.Point(this._axrect.left+this._szTitle.height*.5,this._axrect.top+.5*this._axrect.height),u._renderRotatedText(n,this._title,t,1,1,t,-90,r,this._groupClass)),this.axisLine&&n.drawLine(this._axrect.right,this._axrect.top,this._axrect.right,this._axrect.bottom,e)):(this._title&&(t=new i.Point(this._axrect.right-this._szTitle.height*.5,this._axrect.top+.5*this._axrect.height),u._renderRotatedText(n,this._title,t,1,1,t,90,r,this._groupClass)),this.axisLine&&n.drawLine(this._axrect.left,this._axrect.top,this._axrect.left,this._axrect.bottom,e)):o?(this.axisLine&&n.drawLine(this._axrect.left,this._axrect.top,this._axrect.right,this._axrect.top,e),this._title&&u._renderText(n,this._title,new i.Point(this._axrect.left+.5*this._axrect.width,this._axrect.bottom),1,2,r)):(this.axisLine&&n.drawLine(this._axrect.left,this._axrect.bottom,this._axrect.right,this._axrect.bottom,e),this._title&&u._renderText(n,this._title,new i.Point(this._axrect.left+.5*this._axrect.width,this._axrect.top),1,0,r))},n.prototype._renderMinor=function(n,t,i){var h=this.axisType==s.Y,c=this._position!=f.Top&&this._position!=f.Right,r,o,u,e;if(this.logBase){if(this.minorUnit>0){for(r=[],this._createLogarithmicLabels(this._actualMin,this._actualMax,this.minorUnit,r,null,!1),o=[],u=0;u<r.length;u++)e=r[u],t.indexOf(e)==-1&&e>this._actualMin&&o.push(e);this._renderMinors(n,o,h,c)}}else this._createMinors(n,t,h,c,i)},n.prototype._renderLabelsAndTicks=function(n,t,r,e,o,h,c,a,v){var k=!0,it=this.axisType==s.Y,d=this._position!=f.Top&&this._position!=f.Right,g=this.labelPadding||2,rt=this._TICK_WIDTH,nt=this._getLabelAlign(it),p=u._CSS_LABEL,ut=u._CSS_GRIDLINE,tt=u._CSS_TICK,ft=u._FG,et=u._FG,ot=this._GRIDLINE_WIDTH,st=r!=this._actualMin&&this.majorGrid,b,w,y;return it?(b=this.convert(r),st&&(n.stroke=ft,n.strokeWidth=ot,n.drawLine(this._plotrect.left,b,this._plotrect.right,b,ut)),n.stroke=et,n.strokeWidth=rt,d?(h!=l.None&&n.drawLine(this._axrect.right-a,b,this._axrect.right-v,b,tt),c&&(y=new i.Point(this._axrect.right-v-this._TICK_LABEL_DISTANCE-g,b),o>0?o==90?u._renderRotatedText(n,e,y,1,0,y,o,p,this._groupClass):u._renderRotatedText(n,e,y,2,1,y,o,p,this._groupClass):o<0?o==-90?u._renderRotatedText(n,e,y,1,2,y,o,p,this._groupClass):u._renderRotatedText(n,e,y,2,1,y,o,p,this._groupClass):this._renderLabel(n,r,e,y,2,nt,p))):(h!=l.None&&n.drawLine(this._axrect.left+a,b,this._axrect.left+v,b,tt),c&&(y=new i.Point(this._axrect.left+v+this._TICK_LABEL_DISTANCE+g,b),o>0?o==90?u._renderRotatedText(n,e,y,1,2,y,o,p,this._groupClass):u._renderRotatedText(n,e,y,0,1,y,o,p,this._groupClass):o<0?o==-90?u._renderRotatedText(n,e,y,1,0,y,o,p,this._groupClass):u._renderRotatedText(n,e,y,0,1,y,o,p,this._groupClass):this._renderLabel(n,r,e,y,0,nt,p)))):(w=this.convert(r),this.overlappingLabels==wt.Auto&&this._xCross(w)&&(c=!1),st&&(n.stroke=ft,n.strokeWidth=ot,n.drawLine(w,this._plotrect.top,w,this._plotrect.bottom,ut)),n.stroke=et,n.strokeWidth=rt,d?(k=!1,c&&(y=new i.Point(w,this._axrect.top+v+g),k=o!=0?this._renderRotatedLabel(n,e,y,o,p,d):this._renderLabel(n,r,e,y,nt,0,p)),h!=l.None&&k&&(w=this.convert(r),n.drawLine(w,this._axrect.top+a,w,this._axrect.top+v,tt))):(c&&(y=new i.Point(w,this._axrect.bottom-v-g),k=o!=0?this._renderRotatedLabel(n,e,y,o,p,d):this._renderLabel(n,r,e,y,nt,2,p)),h!=l.None&&(w=this.convert(r),n.drawLine(w,this._axrect.bottom-a,w,this._axrect.bottom-v,tt)))),k},n.prototype._xCross=function(n){for(var i,r=this._rects.length,t=0;t<r;t++)if(i=this._rects[t],n>=i.left&&n<=i.right)return!0;return!1},n.prototype._createMinors=function(t,r,u,f,e){var o;if(r&&r.length>1){var c=this.majorUnit?this._isTimeAxis?this.majorUnit*864e5:this.majorUnit:r[1]-r[0],h=i.isNumber(this.minorUnit)?this._isTimeAxis?this.minorUnit*864e5:this.minorUnit:c*.5,s=[];for(o=r[0];o>this._actualMin&&s.length<n.MAX_MINOR;o-=h)r.indexOf(o)==-1&&s.push(o);for(o=r[0]+h;o<this._actualMax&&s.length<n.MAX_MINOR;o+=h)r.indexOf(o)==-1?s.push(o):e&&this.majorUnit&&o%this.majorUnit!=0&&s.push(o);this._renderMinors(t,s,u,f)}},n.prototype._renderMinors=function(n,t,i,r){var w=this._TICK_HEIGHT,b=this._TICK_WIDTH,s=this._TICK_OVERLAP,k=u._FG,y=this.minorTickMarks,p=!0,f,e,o;this._vals.minor=t;y==l.Outside?s=1:y==l.Inside?s=-1:y==l.Cross?s=0:p=!1;var h=.5*(s-1)*w,c=.5*(1+s)*w,it=t?t.length:0,d=this.minorGrid,a=this._plotrect,g=this._GRIDLINE_WIDTH,nt=u._FG,tt=u._CSS_GRIDLINE_MINOR,v=u._CSS_TICK_MINOR;for(f=0;f<it;f++)t[f]>=this.actualMin&&t[f]<=this.actualMax&&(i?(e=this.convert(t[f]),p&&(n.stroke=k,n.strokeWidth=b,r?n.drawLine(this._axrect.right-h,e,this._axrect.right-c,e,v):n.drawLine(this._axrect.left+h,e,this._axrect.left+c,e,v)),d&&(n.stroke=nt,n.strokeWidth=g,n.drawLine(a.left,e,a.right,e,tt))):(o=this.convert(t[f]),p&&(n.stroke=k,n.strokeWidth=b,r?n.drawLine(o,this._axrect.top+h,o,this._axrect.top+c,v):n.drawLine(o,this._axrect.bottom-h,o,this._axrect.bottom-c,v)),d&&(n.stroke=nt,n.strokeWidth=g,n.drawLine(o,a.top,o,a.bottom,tt))))},n.prototype._renderLabel=function(n,t,i,r,e,o,h){var y=!1,l,c;if(this.itemFormatter&&(l=r.clone(),this.axisType==s.X?l.y=this.position==f.Top?this._plotrect.top:this._plotrect.bottom:l.x=this.position==f.Right?this._plotrect.right:this._plotrect.left,c={val:t,text:i,pos:l,cls:h},c=this.itemFormatter(n,c),c?(i=c.text,h=c.cls):i=null),i){var v=this._rects,p=this.overlappingLabels==wt.Auto&&this._actualAngle===undefined,a=u._renderText(n,i,r,e,o,h,null,null,function(n){var i,t;if(p)for(i=v.length,t=0;t<i;t++)if(u._intersects(v[t],n))return!1;return!0});a&&(a.left+=4,a.width+=8,v.push(a),y=!0)}return y},n.prototype._renderRotatedLabel=function(n,t,r,f,e,o){var v,s,c,y;if(t){var h=n.measureString(t,e,this._groupClass),l=new i.Rect(r.x,r.y,h.height+2,h.width),a=this._rects,p=this.overlappingLabels==wt.Auto;if(p)for(v=a.length,s=0;s<v;s++)if(u._intersects(a[s],l))return!1;return f!=90&&f!=-90&&(c=.5*h.height*Math.abs(Math.sin(f*Math.PI/180)),o?r.y+=c:r.y-=c),y=o?f>0?0:2:f>0?2:0,u._renderRotatedText(n,t,r,y,1,r,f,e,this._groupClass),this._rects.push(l),!0}return!1},n.prototype._getLabelAlign=function(n){var t=1,i;return this.labelAlign&&(i=this.labelAlign.toLowerCase(),n?i=='top'?t=0:i=='bottom'&&(t=2):i=='left'?t=0:i=='right'&&(t=2)),t},n.prototype.convert=function(n,t,i){var u=t==null?this._actualMax:t,r=i==null?this._actualMin:i,l,a,c;if(u==r)return 0;var o=this._axrect.left,f=this._axrect.width,h=this._axrect.top,e=this._axrect.height;return this._customConvert!=null?(l=this._customConvert(n,r,u),this.axisType==s.Y?h+l*e:o+l*f):(a=this.logBase,a?n<=0?NaN:(c=Math.log(u/r),this._reversed?this.axisType==s.Y?h+Math.log(n/r)/c*e:o+f-Math.log(n/r)/c*f:this.axisType==s.Y?h+e-Math.log(n/r)/c*e:o+Math.log(n/r)/c*f):this._reversed?this.axisType==s.Y?h+(n-r)/(u-r)*e:o+f-(n-r)/(u-r)*f:this.axisType==s.Y?h+e-(n-r)/(u-r)*e:o+(n-r)/(u-r)*f)},n.prototype.convertBack=function(n){var o;if(this._actualMax==this._actualMin)return 0;var i=this._plotrect.left,t=this._plotrect.width,r=this._plotrect.top,u=this._plotrect.height,f=this._actualMax-this._actualMin,e=this.logBase;return this._customConvertBack!=null?this.axisType==s.Y?this._customConvertBack((n-r)/u,this._actualMin,this._actualMax):this._customConvertBack((n-i)/t,this._actualMin,this._actualMax):e?(o=0,o=this._reversed?this.axisType==s.Y?(n-r)/u:1-(n-i)/t:this.axisType==s.Y?1-(n-r)/u:(n-i)/t,Math.pow(e,(Math.log(this._actualMin)+(Math.log(this._actualMax)-Math.log(this._actualMin))*o)/Math.log(e))):this._reversed?this.axisType==s.Y?this._actualMin+(n-r)*f/u:this._actualMin+(i+t-n)*f/t:this.axisType==s.Y?this._actualMax-(n-r)*f/u:this._actualMin+(n-i)*f/t},Object.defineProperty(n.prototype,"axisType",{get:function(){var n=this._chart;if(n){if(n.axisX==this)return s.X;if(n.axisY==this)return s.Y}return this._axisType},enumerable:!0,configurable:!0}),n.prototype._getMinNum=function(){return this._actualMin},n.prototype._getMaxNum=function(){return this._actualMax},n.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},n.prototype._cvCollectionChanged=function(){this._invalidate()},n.prototype._createLabels=function(n,t,i,r,u){for(var f=0;f<t;f++){var o=(n+i*f).toFixed(14),e=parseFloat(o),s=this._formatValue(e);r.push(e);u.push(s)}},n.prototype._createLogarithmicLabels=function(n,t,i,r,u,e){var s=this.logBase,w=Math.log(s),b=Math.floor(Math.log(n)/w),k=Math.ceil(Math.log(t)/w),h=s,y=!0,c,p,l,a,d,v,o;for(i>0&&(y=!1,h=i),h<s&&(h=s),c=(k-b+1)*s/h,p=1,e&&(l=this._getAnnoNumber(this.position===f.Left||this.position===f.Right),c>l?p=Math.floor(c/l+1):y&&(c<=.2*l?h=.2*s:c<=.1*l&&(h=.1*s))),a=b;a<=k;a+=p)if(y)for(d=Math.pow(s,a),v=0;v*h<s-1;v++)o=d*(1+v*h),o>=n&&o<=t&&(v==0?(r.unshift(o),u&&u.unshift(this._formatValue(o))):(r.push(o),u&&u.push(this._formatValue(o))));else o=Math.pow(h,a),o>=n&&o<=t&&(r.push(o),u&&u.push(this._formatValue(o)))},n.prototype._createTimeLabels=function(n,t,i,r){var y=this._actualMin,p=this._actualMax,h=new Date(this._actualMin),w=new Date(this._actualMax),b=this._format,k=this._getAnnoNumber(this._axisType==s.Y),nt,d,g,f,ut,c,l,u,e;k>12&&(k=12);var it=.001*(this._actualMax-this._actualMin)/k,rt=new v(it*v.TicksPerSecond),o=isNaN(this._majorUnit)?vt.NiceTimeSpan(rt,b):v.fromDays(this._majorUnit);if(b||(this._tfmt=b=vt.GetTimeDefaultFormat(1e3*o.TotalSeconds,0)),nt=o.Ticks,d=vt.RoundTime(y,o.TotalDays,!1),isFinite(d)&&(y=d),g=vt.RoundTime(p,o.TotalDays,!0),isFinite(g)&&(p=g),f=new Date(y),ut=new Date(p),o.TotalDays>=365&&isNaN(this._majorUnit))for(f=new Date(h.getFullYear(),1,1),f<h&&f.setFullYear(f.getFullYear()+1),c=o.TotalDays/365,c=c-c%1,u=f;u<=w;u.setFullYear(u.getFullYear()+c))e=u.valueOf(),i.push(e),r.push(this._formatValue(e));else if(o.TotalDays>=30&&isNaN(this._majorUnit))for(f=new Date(h.getFullYear(),h.getMonth(),1),f<h&&f.setMonth(f.getMonth()+1),l=o.TotalDays/30,l=l-l%1,u=f;u<=w;u.setMonth(u.getMonth()+l))e=u.valueOf(),i.push(e),r.push(this._formatValue(e));else{var a=1e3*nt/v.TicksPerSecond,u=f,tt=h.getTime()-u.getTime();for(tt>a&&(u=new Date(u.getTime()+Math.floor(tt/a)*a));u<=w;u=new Date(u.getTime()+a))u>=h&&(e=u.valueOf(),i.push(e),r.push(this._formatValue(e)))}},n.prototype._formatValue=function(n){if(this._isTimeAxis)return this._format?i.Globalize.format(new Date(n),this._format):i.Globalize.format(new Date(n),this._tfmt);if(this._format)return i.Globalize.format(n,this._format);var t=n==Math.round(n)?'n0':'n';return i.Globalize.format(n,t)},n.prototype._calcMajorUnit=function(){var n=this._majorUnit;if(isNaN(n)){var i=this._actualMax-this._actualMin,r=this._nicePrecision(i),t=i/this._getAnnoNumber(this.axisType==s.Y);n=this._niceNumber(2*t,-r,!0);n<t&&(n=this._niceNumber(t,-r+1,!1));n<t&&(n=this._niceTickNumber(t))}return n},n.prototype._getAnnoNumber=function(n){var i=n?this._annoSize.height:this._annoSize.width,r=n?this._axrect.height:this._axrect.width,t;return i>0&&r>0?(t=Math.floor(r/(i+6)),t<=0&&(t=1),t):10},n.prototype._nicePrecision=function(n){var i,t,r;return n<=0||isNaN(n)?0:(i=Math.log(n)/Math.LN10,t=i>=0?Math.floor(i):Math.ceil(i),r=n/Math.pow(10,t),r<3&&(t=-t+1,r=n/Math.pow(10,t),r<3&&(t=t+1)),t)},n.prototype._niceTickNumber=function(n){if(n==0)return n;n<0&&(n=-n);var u=Math.log(n)/Math.LN10,r=Math.floor(u),i=n/Math.pow(10,r),t=10;return i<=1?t=1:i<=2?t=2:i<=5&&(t=5),t*Math.pow(10,r)},n.prototype._niceNumber=function(n,t,i){if(n==0)return n;n<0&&(n=-n);var u=n/Math.pow(10,t),r=10;return i?u<1.5?r=1:u<3?r=2:u<4.5?r=4:u<7&&(r=5):u<=1?r=1:u<=2?r=2:u<=5&&(r=5),r*Math.pow(10,t)},Object.defineProperty(n.prototype,"_uniqueId",{get:function(){return this.__uniqueId},enumerable:!0,configurable:!0}),n.MAX_MAJOR=1e3,n.MAX_MINOR=2e3,n._id=0,n}();t.Axis=st;bi=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getAxis=function(n){var t=this.indexOf(n);return t>-1?this[t]:null},t.prototype.indexOf=function(n){for(var t=0;t<this.length;t++)if(this[t].name==n)return t;return-1},t}(i.ObservableArray);t.AxisCollection=bi,function(n){n[n.tickf7=-7]="tickf7";n[n.tickf6=-6]="tickf6";n[n.tickf5=-5]="tickf5";n[n.tickf4=-4]="tickf4";n[n.tickf3=-3]="tickf3";n[n.tickf2=-2]="tickf2";n[n.tickf1=-1]="tickf1";n[n.second=1]="second";n[n.minute=60]="minute";n[n.hour=3600]="hour";n[n.day=86400]="day";n[n.week=604800]="week";n[n.month=2678400]="month";n[n.year=31536e3]="year";n[n.maxtime=Number.MAX_VALUE]="maxtime"}(o||(o={}));v=function(){function n(n){this.ticks=n}return Object.defineProperty(n.prototype,"Ticks",{get:function(){return this.ticks},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"TotalSeconds",{get:function(){return this.ticks/1e7},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"TotalDays",{get:function(){return this.ticks/864e9},enumerable:!0,configurable:!0}),n.fromSeconds=function(t){return new n(t*1e7)},n.fromDays=function(t){return new n(t*864e9)},n.TicksPerSecond=1e7,n}();vt=function(){function n(n){i.isDate(n)?this.init(n):i.isNumber(n)&&this.init(u._fromOADate(n))}return n.prototype.init=function(n){this.year=n.getFullYear();this.month=n.getMonth();this.day=n.getDate();this.hour=n.getHours();this.minute=n.getMinutes();this.second=n.getSeconds()},n.prototype.getTimeAsDateTime=function(){var t=0,n=0,r=0,i;return this.hour>=24&&(this.hour-=24,this.day+=1),this.month<0?(t=-1-this.day,this.month=1):this.month>11&&(t=this.month-12,this.month=12),this.day<1?(n=-1-this.day,this.day=1):this.day>28&&this.month==2?(n=this.day-28,this.day=28):this.day>30&&(this.month==4||this.month==4||this.month==6||this.month==9||this.month==11)?(n=this.day-30,this.day=30):this.day>31&&(n=this.day-31,this.day=31),this.second>59&&(r=this.second-59,this.second=59),i=0,this.minute>59&&(i=this.minute-59,this.minute=59),new Date(this.year,this.month,this.day,this.hour,this.minute,this.second)},n.prototype.getTimeAsDouble=function(){return this.getTimeAsDateTime().valueOf()},n.tround=function(n,t,i){var r=n/t*t;return r=r-r%1,i&&r!=n&&(t=t-t%1,r+=t),r},n.RoundTime=function(t,i,r){var f=i*86400,u;if(f>0)return(u=new n(t),f<o.minute)?(u.second=this.tround(u.second,f,r),u.getTimeAsDouble()):(u.second=0,f<o.hour)?(f/=o.minute,u.minute=this.tround(u.minute,f,r),u.getTimeAsDouble()):(u.minute=0,f<o.day)?(f/=o.hour,u.hour=this.tround(u.hour,f,r),u.getTimeAsDouble()):(u.hour=0,f<o.month)?(f/=o.day,u.day=this.tround(u.day,f,r),u.getTimeAsDouble()):(u.day=1,f<o.year)?(f/=o.month,u.month!=1&&(u.month=this.tround(u.month,f,r)),u.getTimeAsDouble()):(u.month=1,f/=o.year,u.year=this.tround(u.year,f,r),u.getTimeAsDouble());var h=t,s=h-f,e=s/i*i;return r&&e!=s&&(e+=i),f+e},n.TimeSpanFromTmInc=function(n){var i=v.fromSeconds(1),t,r;if(n!=o.maxtime)if(n>o.tickf1)i=v.fromSeconds(n);else{for(t=n,r=1,t+=7;t>0;)r*=10,t--;i=new v(r)}return i},n.manualTimeInc=function(n){var t=o.second,i,u,r,f;if(n==null||n.length==0)return t;if(i=n.indexOf('f'),i>=0){if(u=-1,i>0&&n.substr(i-1,1)=='%')u=-1;else for(r=1;r<6;r++){if(i+r>=n.length)break;if(f=n.substr(i+r,1),f!='f')break;u--}t=u}else n.indexOf('s')>=0?t=o.second:n.indexOf('m')>=0?t=o.minute:n.indexOf('h')>=0||n.indexOf('H')?t=o.hour:n.indexOf('d')>=0?t=o.day:n.indexOf('M')>=0?t=o.month:n.indexOf('y')>=0&&(t=o.year);return t},n.getNiceInc=function(n,t,i){for(var u,r=0;r<n.length;r++)if(u=n[r]*i,t<=u)return u;return 0},n.NiceTimeSpan=function(t,i){var u=o.second,f,r,e;if(i!=null&&i.length>0&&(u=n.manualTimeInc(i)),f=0,r=0,u<o.second&&t.TotalSeconds<10){for(f=t.Ticks,r=n.TimeSpanFromTmInc(u).Ticks;f>10*r;)r*=10;return e=r,f>e&&(e*=2),f>e&&(e=5*r),f>e&&(e=10*r),new v(e)}if(f=Math.ceil(t.TotalSeconds),f==0)return n.TimeSpanFromTmInc(u);if(r=1,u<o.minute){if(f<o.minute&&(r=n.getNiceInc([1,2,5,10,15,30],f,u),r!=0))return v.fromSeconds(r);u=o.minute}if(u<o.hour){if(f<o.hour&&(r=n.getNiceInc([1,2,5,10,15,30],f,u),r!=0))return v.fromSeconds(r);u=o.hour}if(u<o.day){if(f<o.day&&(r=n.getNiceInc([1,3,6,12],f,u),r!=0))return v.fromSeconds(r);u=o.day}if(u<o.month){if(f<o.month&&(r=n.getNiceInc([1,2,7,14],f,u),r!=0))return v.fromSeconds(r);u=o.month}if(u<o.year){if(f<o.year&&(r=n.getNiceInc([1,2,3,4,6],f,u),r!=0))return v.fromSeconds(r);u=o.year}return r=100*o.year,f<r&&(r=n.getNiceInc([1,2,5,10,20,50],f,u),r==0&&(r=100*o.year)),v.fromSeconds(r)},n.NiceTimeUnit=function(t,i){var r=v.fromDays(t);return r=n.NiceTimeSpan(r,i),r.TotalDays},n.GetTimeDefaultFormat=function(n,t){var u;if(isNaN(n)||isNaN(t))return'';var i='s',f=v.fromSeconds(.001*(n-t)),r=f.TotalSeconds;if(r>=o.year)i='yyyy';else if(r>=o.month)i='MMM yyyy';else if(r>=o.day)i='MMM d';else if(r>=o.hour)i='ddd H:mm';else if(r>=.5*o.hour)i='H:mm';else if(r>=1)i='H:mm:ss';else if(r>0)for(u=f.Ticks,i="s.";u<v.TicksPerSecond;)u*=10,i+='f';return i},n.secInYear=86400,n}();ui=function(){function n(){this._row=0;this._col=0;this._rect=new i.Rect(0,0,0,0)}return Object.defineProperty(n.prototype,"row",{get:function(){return this._row},set:function(n){n!=this._row&&(this._row=i.asInt(n,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this._col},set:function(n){n!=this._col&&(this._col=i.asInt(n,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this._name},set:function(n){n!=this._name&&(this._name=i.asString(n,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this._width},set:function(n){n!=this._width&&(this._width=n,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},set:function(n){n!=this._height&&(this._height=n,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"style",{get:function(){return this._style},set:function(n){n!=this._style&&(this._style=n,this._invalidate())},enumerable:!0,configurable:!0}),n.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},n.prototype._render=function(n){n.drawRect(this._rect.left,this._rect.top,this._rect.width,this._rect.height,null,this.style)},n.prototype._setPlotX=function(n,t){this._rect.left=n;this._rect.width=t},n.prototype._setPlotY=function(n,t){this._rect.top=n;this._rect.height=t},n}();t.PlotArea=ui;ki=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getPlotArea=function(n){var t=this.indexOf(n);return t>-1?this[t]:null},t.prototype.indexOf=function(n){for(var t=0;t<this.length;t++)if(this[t].name==n)return t;return-1},t.prototype._getWidth=function(n){for(var t,r,i=0;i<this.length;i++)if(t=this[i],t.column==n&&t.row==0)return t.width;return r},t.prototype._getHeight=function(n){for(var t,r,i=0;i<this.length;i++)if(t=this[i],t.row==n&&t.column==0)return t.height;return r},t.prototype._calculateWidths=function(n,t){var r,i,u;if(t<=0)throw"ncols";for(r=[],i=0;i<t;i++)u=this._getWidth(i),r[i]=new di(u);return this._calculateLengths(n,t,r)},t.prototype._calculateHeights=function(n,t){var r,i,u;if(t<=0)throw"nrows";for(r=[],i=0;i<t;i++)u=this._getHeight(i),r[i]=new di(u);return this._calculateLengths(n,t,r)},t.prototype._calculateLengths=function(n,t,i){for(var s,e,u=[t],o=0,f=0,r=0;r<t;r++)i[r].isAbsolute?(u[r]=i[r].value,o+=u[r]):i[r].isStar?f+=i[r].value:i[r].isAuto&&f++;for(s=n-o,e=s/f,r=0;r<t;r++)i[r].isStar?u[r]=e*i[r].value:i[r].isAuto&&(u[r]=e),u[r]<0&&(u[r]=0);return u},t}(i.ObservableArray);t.PlotAreaCollection=ki,function(n){n[n.Auto=0]="Auto";n[n.Pixel=1]="Pixel";n[n.Star=2]="Star"}(ht||(ht={}));di=function(){function n(n){n===void 0&&(n=null);this._unitType=ht.Auto;n&&(n=n.toString(),n.indexOf('*')>=0?(this._unitType=ht.Star,n=n.replace('*',''),this._value=parseFloat(n),isNaN(this._value)&&(this._value=1)):(this._unitType=ht.Pixel,this._value=parseFloat(n),isNaN(this._value)&&(this._unitType=ht.Auto,this._value=1)))}return Object.defineProperty(n.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isStar",{get:function(){return this._unitType==ht.Star},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isAbsolute",{get:function(){return this._unitType==ht.Pixel},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isAuto",{get:function(){return this._unitType==ht.Auto},enumerable:!0,configurable:!0}),n}(),function(n){n[n.Visible=0]="Visible";n[n.Plot=1]="Plot";n[n.Legend=2]="Legend";n[n.Hidden=3]="Hidden"}(t.SeriesVisibility||(t.SeriesVisibility={}));y=t.SeriesVisibility,function(n){n[n.Dot=0]="Dot";n[n.Box=1]="Box"}(t.Marker||(t.Marker={}));yt=t.Marker;gi=function(){function n(){}return n}();t.DataArray=gi;nr=function(n){function t(t){n.call(this);this._series=i.asType(t,tt)}return __extends(t,n),Object.defineProperty(t.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),t}(i.EventArgs);t.SeriesEventArgs=nr;tt=function(){function n(){this._altStyle=null;this._symbolMarker=yt.Dot;this._visibility=y.Visible;this.rendering=new i.Event;this.rendered=new i.Event}return Object.defineProperty(n.prototype,"_chart",{get:function(){return this.__chart},set:function(n){n!==this.__chart&&(this.__chart=n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"style",{get:function(){return this._style},set:function(n){n!=this._style&&(this._style=n,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"altStyle",{get:function(){return this._altStyle},set:function(n){n!=this._altStyle&&(this._altStyle=n,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"symbolStyle",{get:function(){return this._symbolStyle},set:function(n){n!=this._symbolStyle&&(this._symbolStyle=n,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(n){n!=this._symbolSize&&(this._symbolSize=i.asNumber(n,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),n.prototype._getSymbolSize=function(){return this.symbolSize!=null?this.symbolSize:this.chart.symbolSize},Object.defineProperty(n.prototype,"symbolMarker",{get:function(){return this._symbolMarker},set:function(n){n!=this._symbolMarker&&(this._symbolMarker=i.asEnum(n,yt,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binding",{get:function(){return this._binding?this._binding:this._chart?this._chart.binding:null},set:function(n){n!=this._binding&&(this._binding=i.asString(n,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bindingX",{get:function(){return this._bindingX?this._bindingX:this._chart?this._chart.bindingX:null},set:function(n){n!=this._bindingX&&(this._bindingX=i.asString(n,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this._name},set:function(n){this._name=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemsSource",{get:function(){return this._itemsSource},set:function(n){n!=this._itemsSource&&(this._cv&&(this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._itemsSource=n,this._cv=i.asCollectionView(n),this._cv!=null&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)),this._clearValues(),this._itemsSource=n,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"collectionView",{get:function(){return this._cv?this._cv:this._chart?this._chart.collectionView:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hostElement",{get:function(){return this._hostElement},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"legendElement",{get:function(){return this._legendElement},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cssClass",{get:function(){return this._cssClass},set:function(n){this._cssClass=i.asString(n,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visibility",{get:function(){return this._visibility},set:function(n){if(n!=this._visibility&&(this._visibility=i.asEnum(n,y),this._clearValues(),this._invalidate(),this._chart))this._chart.onSeriesVisibilityChanged(new nr(this))},enumerable:!0,configurable:!0}),n.prototype.onRendering=function(n,t,i){var r=new yi(n,t,i);return this.rendering.raise(this,r),r.cancel},n.prototype.onRendered=function(n){this.rendered.raise(this,new et(n))},n.prototype.hitTest=function(n,t){return i.isNumber(n)&&i.isNumber(t)?n=new i.Point(n,t):n instanceof MouseEvent&&(n=new i.Point(n.pageX,n.pageY)),i.asType(n,i.Point),this._chart?this._chart._hitTestSeries(n,this._chart.series.indexOf(this)):null},n.prototype.getPlotElement=function(n){if(this.hostElement&&n<this._pointIndexes.length){var t=this._pointIndexes[n];if(t<this.hostElement.childNodes.length)return this.hostElement.childNodes[t]}return null},Object.defineProperty(n.prototype,"axisX",{get:function(){return this._axisX},set:function(n){if(n!=this._axisX){if(this._axisX=i.asType(n,st,!0),this._axisX){var t=this._axisX._chart=this._chart;t&&t.axes.indexOf(this._axisX)==-1&&t.axes.push(this._axisX)}this._invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"axisY",{get:function(){return this._axisY},set:function(n){if(n!=this._axisY){if(this._axisY=i.asType(n,st,!0),this._axisY){var t=this._axisY._chart=this._chart;t&&t.axes.indexOf(this._axisY)==-1&&t.axes.push(this._axisY)}this._invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_plotter",{get:function(){return this.chart&&!this.__plotter&&(this.__plotter=this.chart._getPlotter(this)),this.__plotter},set:function(n){n!=this.__plotter&&(this.__plotter=n)},enumerable:!0,configurable:!0}),n.prototype.getDataType=function(n){return n==0?this._valueDataType:n==1?this._xvalueDataType:null},n.prototype.getValues=function(n){var i,t;if(n==0)return this._values==null&&(this._valueDataType=null,this._cv!=null?(t=this._bindValues(this._cv.items,this._getBinding(0)),this._values=t.values,this._valueDataType=t.dataType):this.binding!=null&&this._chart!=null&&this._chart.collectionView!=null&&(t=this._bindValues(this._chart.collectionView.items,this._getBinding(0)),this._values=t.values,this._valueDataType=t.dataType)),this._values;if(n==1){if(this._xvalues==null&&(this._xvalueDataType=null,i=this,this.bindingX!=null))if(i._cv!=null)t=this._bindValues(i._cv.items,this.bindingX,!0),this._xvalueDataType=t.dataType,this._xvalues=t.values;else{if(this._bindingX==null)return null;i._chart!=null&&i._chart.collectionView!=null&&(t=this._bindValues(i._chart.collectionView.items,this.bindingX,!0),this._xvalueDataType=t.dataType,this._xvalues=t.values)}return this._xvalues}return null},n.prototype.drawLegendItem=function(n,t,i){var r=this._getChartType();r==null&&(r=this._chart._getChartType());r===e.Funnel?this._drawFunnelLegendItem(n,t,i,this.style,this.symbolStyle):this._drawLegendItem(n,t,r,this.name,this.style,this.symbolStyle)},n.prototype.measureLegendItem=function(n,t){var i=this._getChartType();return i==null&&(i=this._chart._getChartType()),i===e.Funnel?this._measureLegendItem(n,this._getFunnelLegendName(t)):this._measureLegendItem(n,this.name)},n.prototype.legendItemLength=function(){var n=this._getChartType();return n==null&&(n=this._chart._getChartType()),n===e.Funnel?this._chart._xlabels&&this._chart._xlabels.length?this._chart._xlabels.length:1:1},n.prototype.getDataRect=function(){return null},n.prototype._getChartType=function(){return this._chartType},n.prototype._clearValues=function(){this._values=null;this._xvalues=null;this.__plotter=null},n.prototype._getBinding=function(n){var i=null,t;return this.binding&&(t=this.binding.split(','),t&&t.length>n&&(i=t[n].trim())),i},n.prototype._getBindingValues=function(n){var t,i;return this._cv!=null?t=this._cv.items:this._chart!=null&&this._chart.collectionView!=null&&(t=this._chart.collectionView.items),i=this._bindValues(t,this._getBinding(n)),i.values},n.prototype._getItem=function(n){var i=null,t=null;return this.itemsSource!=null?t=this._cv!=null?this._cv.items:this.itemsSource:this._chart.itemsSource!=null&&(t=this._chart.collectionView!=null?this._chart.collectionView.items:this._chart.itemsSource),t!=null&&(i=t[n]),i},n.prototype._getLength=function(){var t=0,n=null;return this.itemsSource!=null?n=this._cv!=null?this._cv.items:this.itemsSource:this._chart.itemsSource!=null&&(n=this._chart.collectionView!=null?this._chart.collectionView.items:this._chart.itemsSource),n!=null&&(t=n.length),t},n.prototype._setPointIndex=function(n,t){this._pointIndexes[n]=t},n.prototype._getDataRect=function(){var s=this.getValues(0),h=this.getValues(1),e,n,u;if(s){var t=NaN,r=NaN,o=NaN,f=NaN,c=s.length;for(e=0;e<c;e++)n=s[e],isFinite(n)&&(isNaN(r)?r=f=n:n<r?r=n:n>f&&(f=n)),h&&(u=h[e],isFinite(u)&&(isNaN(t)?t=o=u:u<t?t=u:n>f&&(o=u)));if(h||(t=0,o=c-1),!isNaN(r))return new i.Rect(t,r,o-t,f-r)}return null},n.prototype._isCustomAxisX=function(){return this._axisX?this._chart?this._axisX!=this.chart.axisX:!0:!1},n.prototype._isCustomAxisY=function(){return this._axisY?this._chart?this._axisY!=this.chart.axisY:!0:!1},n.prototype._getAxisX=function(){var n=null;return this.axisX?n=this.axisX:this.chart&&(n=this.chart.axisX),n},n.prototype._getAxisY=function(){var n=null;return this.axisY?n=this.axisY:this.chart&&(n=this.chart.axisY),n},n.prototype._measureLegendItem=function(n,t){var r=new i.Size,f;return r.width=a._LEGEND_ITEM_WIDTH,r.height=a._LEGEND_ITEM_HEIGHT,this._name&&(f=n.measureString(t,u._CSS_LABEL),r.width+=f.width,r.height<f.height&&(r.height=f.height)),r.width+=3*a._LEGEND_ITEM_MARGIN,r.height+=2*a._LEGEND_ITEM_MARGIN,r},n.prototype._drawFunnelLegendItem=function(n,t,r,f,e){n.strokeWidth=1;var c=a._LEGEND_ITEM_MARGIN,o=null,s=null;o===null&&(o=this._chart._getColorLight(r));s===null&&(s=this._chart._getColor(r));n.fill=o;n.stroke=s;var l=t.top+.5*t.height,y=a._LEGEND_ITEM_WIDTH,h=a._LEGEND_ITEM_HEIGHT,v=this._getFunnelLegendName(r);n.drawRect(t.left+c,l-.5*h,y,h,null,e?e:f);v&&u._renderText(n,v,new i.Point(t.left+h+2*c,l),0,1,u._CSS_LABEL)},n.prototype._getFunnelLegendName=function(n){var t;return this._chart._xlabels&&this._chart._xlabels.length&&(t=this._chart._xlabels[n]),t||(t=this.name),t},n.prototype._drawLegendItem=function(n,t,r,f,o,s){var v,y;n.strokeWidth=1;var h=a._LEGEND_ITEM_MARGIN,w=null,b=null;w===null&&(w=this._chart._getColorLight(this._chart.series.indexOf(this)));b===null&&(b=this._chart._getColor(this._chart.series.indexOf(this)));n.fill=w;n.stroke=b;var c=t.top+.5*t.height,l=a._LEGEND_ITEM_WIDTH,p=a._LEGEND_ITEM_HEIGHT;switch(r){case e.Area:case e.SplineArea:n.drawRect(t.left+h,c-.5*p,l,p,null,o);break;case e.Bar:case e.Column:n.drawRect(t.left+h,c-.5*p,l,p,null,s?s:o);break;case e.Scatter:case e.Bubble:v=.3*l;y=.3*p;this.symbolMarker==yt.Box?n.drawRect(t.left+h+.5*l-v,c-y,2*v,2*y,null,s?s:o):n.drawEllipse(t.left+.5*l+h,c,v,y,null,s?s:o);break;case e.Line:case e.Spline:n.drawLine(t.left+h,c,t.left+l+h,c,null,o);break;case e.LineSymbols:case e.SplineSymbols:v=.3*l;y=.3*p;this.symbolMarker==yt.Box?n.drawRect(t.left+h+.5*l-v,c-y,2*v,2*y,null,s?s:o):n.drawEllipse(t.left+.5*l+h,c,v,y,null,s?s:o);n.drawLine(t.left+h,c,t.left+l+h,c,null,o);break;case e.Candlestick:case e.HighLowOpenClose:n.drawLine(t.left+h,c,t.left+l+h,c,null,s?s:o)}this._name&&u._renderText(n,f,new i.Point(t.left+p+2*h,c),0,1,u._CSS_LABEL)},n.prototype._cvCollectionChanged=function(){this._clearValues();this._invalidate()},n.prototype._cvCurrentChanged=function(){this._chart&&this._chart._notifyCurrentChanged&&this._invalidate()},n.prototype._bindValues=function(n,t,r){var e,s,o,c,f,u,h;if(r===void 0&&(r=!1),n!=null)for(c=n.length,e=new Array(n.length),f=0;f<c;f++)o=null,u=n[f],t!=null&&(u=u[t]),i.isArray(u)&&u.length>0&&(o=u,u=u[0]),i.isNumber(u)?(e[f]=u,s=i.DataType.Number):i.isDate(u)?(e[f]=u.valueOf(),s=i.DataType.Date):r&&u&&(e[f]=f,s=i.DataType.Number),i.isArray(o)&&o.length>0&&(e[f]=o);return h=new gi,h.values=e,h.dataType=s,h},n.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},n.prototype._indexToPoint=function(n){if(n>=0&&n<this._values.length){var t=this._values[n],r=this._xvalues?this._xvalues[n]:n;return new i.Point(r,t)}return null},n.prototype._getSymbolFill=function(n){var t=null;return this.symbolStyle&&(t=this.symbolStyle.fill),!t&&this.style&&(t=this.style.fill),!t&&this.chart&&(t=this.chart._getColorLight(n)),t},n.prototype._getSymbolStroke=function(n){var t=null;return this.symbolStyle&&(t=this.symbolStyle.stroke),!t&&this.style&&(t=this.style.stroke),!t&&this.chart&&(t=this.chart._getColor(n)),t},n.prototype._getAltSymbolStroke=function(){var n=null;return this.altStyle&&(n=this.altStyle.stroke),n},n.prototype._getAltSymbolFill=function(){var n=null;return this.altStyle&&(n=this.altStyle.fill),n},n.prototype._renderLabels=function(n,t,i,r){this._plotter&&this._plotter._renderLabels(n,this,t,i,r)},n._LEGEND_ITEM_WIDTH=10,n._LEGEND_ITEM_HEIGHT=10,n._LEGEND_ITEM_MARGIN=4,n._DEFAULT_SYM_SIZE=10,n}();t.SeriesBase=tt;a=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),Object.defineProperty(t.prototype,"chartType",{get:function(){return this._chartType},set:function(n){n!=this._chartType&&(this._chartType=i.asEnum(n,e,!0),this._invalidate())},enumerable:!0,configurable:!0}),t}(tt);t.Series=a;fi=function(){function n(t){this._strokeWidth=1;this._fontSize=null;this._fontFamily=null;this._savedGradient={};this._element=t;this._create();this._element.appendChild(this._svg);n._isff===undefined&&(n._isff=navigator.userAgent.toLowerCase().indexOf('firefox')>=0)}return n.prototype.beginRender=function(){while(this._svg.firstChild)this._svg.removeChild(this._svg.firstChild);this._savedGradient={};this._svg.appendChild(this._defs);this._svg.appendChild(this._textGroup)},n.prototype.endRender=function(){this._textGroup.parentNode&&this._svg.removeChild(this._textGroup)},n.prototype.setViewportSize=function(n,t){this._svg.setAttribute('width',n.toString());this._svg.setAttribute('height',t.toString())},Object.defineProperty(n.prototype,"element",{get:function(){return this._svg},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fill",{get:function(){return this._fill},set:function(n){this._fill=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fontSize",{get:function(){return this._fontSize},set:function(n){this._fontSize=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(n){this._fontFamily=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"stroke",{get:function(){return this._stroke},set:function(n){this._stroke=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(n){this._strokeWidth=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textFill",{get:function(){return this._textFill},set:function(n){this._textFill=n},enumerable:!0,configurable:!0}),n.prototype.addClipRect=function(t,i){if(t&&i){var u=document.createElementNS(n.svgNS,'clipPath'),r=document.createElementNS(n.svgNS,'rect');r.setAttribute('x',(t.left-1).toFixed());r.setAttribute('y',(t.top-1).toFixed());r.setAttribute('width',(t.width+2).toFixed());r.setAttribute('height',(t.height+2).toFixed());u.appendChild(r);u.setAttribute('id',i);this._svg.appendChild(u)}},n.prototype.drawEllipse=function(t,i,r,u,f,e){var o=document.createElementNS(n.svgNS,'ellipse');return this._applyColor(o,'stroke',this._stroke),this._strokeWidth!==null&&o.setAttribute('stroke-width',this._strokeWidth.toString()),this._applyColor(o,'fill',this._fill),o.setAttribute('cx',t.toFixed(1)),o.setAttribute('cy',i.toFixed(1)),o.setAttribute('rx',r.toFixed(1)),o.setAttribute('ry',u.toFixed(1)),f&&o.setAttribute('class',f),this._applyStyle(o,e),this._appendChild(o),o},n.prototype.drawRect=function(t,i,r,u,f,e,o){var s=document.createElementNS(n.svgNS,'rect');return this._applyColor(s,'fill',this._fill),this._applyColor(s,'stroke',this._stroke),this._strokeWidth!==null&&s.setAttribute('stroke-width',this._strokeWidth.toString()),s.setAttribute('x',t.toFixed(1)),s.setAttribute('y',i.toFixed(1)),r>0&&r<.05?s.setAttribute('width','0.1'):s.setAttribute('width',r.toFixed(1)),u>0&&u<.05?s.setAttribute('height','0.1'):s.setAttribute('height',u.toFixed(1)),o&&s.setAttribute('clip-path','url(#'+o+')'),f&&s.setAttribute('class',f),this._applyStyle(s,e),this._appendChild(s),s},n.prototype.drawLine=function(t,i,r,u,f,e){var o=document.createElementNS(n.svgNS,'line');return this._applyColor(o,'stroke',this._stroke),this._strokeWidth!==null&&o.setAttribute('stroke-width',this._strokeWidth.toString()),o.setAttribute('x1',t.toFixed(1)),o.setAttribute('x2',r.toFixed(1)),o.setAttribute('y1',i.toFixed(1)),o.setAttribute('y2',u.toFixed(1)),f&&o.setAttribute('class',f),this._applyStyle(o,e),this._appendChild(o),o},n.prototype.drawLines=function(t,i,r,u,f){var s,e,h,o;if(t&&i&&(s=Math.min(t.length,i.length),s>0)){for(e=document.createElementNS(n.svgNS,'polyline'),this._applyColor(e,'stroke',this._stroke),this._strokeWidth!==null&&e.setAttribute('stroke-width',this._strokeWidth.toString()),e.setAttribute('fill','none'),h='',o=0;o<s;o++)h+=t[o].toFixed(1)+','+i[o].toFixed(1)+' ';return e.setAttribute('points',h),r&&e.setAttribute('class',r),f&&e.setAttribute('clip-path','url(#'+f+')'),this._applyStyle(e,u),this._appendChild(e),e}return null},n.prototype.drawSplines=function(t,i,r,u,f){var e,s,o;if(t&&i){var v=new ei(t,i),h=v.calculate(),c=h.xs,l=h.ys,a=Math.min(c.length,l.length);if(a>0){for(e=document.createElementNS(n.svgNS,'polyline'),this._applyColor(e,'stroke',this._stroke),this._strokeWidth!==null&&e.setAttribute('stroke-width',this._strokeWidth.toString()),e.setAttribute('fill','none'),s='',o=0;o<a;o++)s+=c[o].toFixed(1)+','+l[o].toFixed(1)+' ';return e.setAttribute('points',s),r&&e.setAttribute('class',r),f&&e.setAttribute('clip-path','url(#'+f+')'),this._applyStyle(e,u),this._appendChild(e),e}}return null},n.prototype.drawPolygon=function(t,i,r,u,f){var s,e,h,o;if(t&&i&&(s=Math.min(t.length,i.length),s>0)){for(e=document.createElementNS(n.svgNS,'polygon'),this._applyColor(e,'stroke',this._stroke),this._strokeWidth!==null&&e.setAttribute('stroke-width',this._strokeWidth.toString()),this._applyColor(e,'fill',this._fill),h='',o=0;o<s;o++)h+=t[o].toFixed(1)+','+i[o].toFixed(1)+' ';return e.setAttribute('points',h),r&&e.setAttribute('class',r),f&&e.setAttribute('clip-path','url(#'+f+')'),this._applyStyle(e,u),this._appendChild(e),e}return null},n.prototype.drawPieSegment=function(t,r,u,f,e,o,s,h){var c,l,y,a,p,v;return e>=Math.PI*2?this.drawEllipse(t,r,u,u,o,s):(c=document.createElementNS(n.svgNS,'path'),this._applyColor(c,'fill',this._fill),this._applyColor(c,'stroke',this._stroke),this._strokeWidth!==null&&c.setAttribute('stroke-width',this._strokeWidth.toString()),l=new i.Point(t,r),l.x+=u*Math.cos(f),l.y+=u*Math.sin(f),y=f+e,a=new i.Point(t,r),a.x+=u*Math.cos(y),a.y+=u*Math.sin(y),p=' 0 0,1 ',Math.abs(e)>Math.PI&&(p=' 0 1,1 '),v='M '+l.x.toFixed(1)+','+l.y.toFixed(1),v+=' A '+u.toFixed(1)+','+u.toFixed(1)+p,v+=a.x.toFixed(1)+','+a.y.toFixed(1),v+=' L '+t.toFixed(1)+','+r.toFixed(1)+' z',c.setAttribute('d',v),h&&c.setAttribute('clip-path','url(#'+h+')'),o&&c.setAttribute('class',o),this._applyStyle(c,s),this._appendChild(c),c)},n.prototype.drawDonutSegment=function(t,r,u,f,e,o,s,h,c){var k=!1,l,y,p,w,v,b,d,g,a;return o>=Math.PI*2&&(k=!0,o-=.001),l=document.createElementNS(n.svgNS,'path'),this._applyColor(l,'fill',this._fill),this._applyColor(l,'stroke',this._stroke),this._strokeWidth!==null&&l.setAttribute('stroke-width',this._strokeWidth.toString()),y=new i.Point(t,r),y.x+=u*Math.cos(e),y.y+=u*Math.sin(e),p=e+o,w=new i.Point(t,r),w.x+=u*Math.cos(p),w.y+=u*Math.sin(p),v=new i.Point(t,r),v.x+=f*Math.cos(p),v.y+=f*Math.sin(p),b=new i.Point(t,r),b.x+=f*Math.cos(e),b.y+=f*Math.sin(e),d=' 0 0,1 ',g=' 0 0,0 ',Math.abs(o)>Math.PI&&(d=' 0 1,1 ',g=' 0 1,0 '),a='M '+y.x.toFixed(3)+','+y.y.toFixed(3),a+=' A '+u.toFixed(3)+','+u.toFixed(3)+d,a+=w.x.toFixed(3)+','+w.y.toFixed(3),a+=k?' M '+v.x.toFixed(3)+','+v.y.toFixed(3):' L '+v.x.toFixed(3)+','+v.y.toFixed(3),a+=' A '+f.toFixed(3)+','+f.toFixed(3)+g,a+=b.x.toFixed(3)+','+b.y.toFixed(3),k||(a+=' z'),l.setAttribute('d',a),c&&l.setAttribute('clip-path','url(#'+c+')'),s&&l.setAttribute('class',s),this._applyStyle(l,h),this._appendChild(l),l},n.prototype.drawString=function(n,t,i,r){var u=this._createText(t,n),f;return i&&u.setAttribute('class',i),this._applyStyle(u,r),this._appendChild(u),f=this._getBBox(u),u.setAttribute('y',(t.y-(f.y+f.height-t.y)).toFixed(1)),u},n.prototype.drawStringRotated=function(t,i,r,u,f,e){var o=this._createText(i,t),s,h;return f&&o.setAttribute('class',f),this._applyStyle(o,e),s=document.createElementNS(n.svgNS,'g'),s.setAttribute('transform','rotate('+u.toFixed(1)+','+r.x.toFixed(1)+','+r.y.toFixed(1)+')'),s.appendChild(o),this._appendChild(s),h=this._getBBox(o),o.setAttribute('y',(i.y-(h.y+h.height-i.y)).toFixed(1)),o},n.prototype.measureString=function(n,t,r,u){var f=new i.Size(0,0),e,o;if(this._fontSize&&this._text.setAttribute('font-size',this._fontSize),this._fontFamily&&this._text.setAttribute('font-family',this._fontFamily),t&&this._text.setAttribute('class',t),r&&this._textGroup.setAttribute('class',r),this._applyStyle(this._text,u),this._setText(this._text,n),e=this._getBBox(this._text),f.width=e.width,f.height=e.height,this._text.removeAttribute('font-size'),this._text.removeAttribute('font-family'),this._text.removeAttribute('class'),u)for(o in u)this._text.removeAttribute(this._deCase(o));return this._textGroup.removeAttribute('class'),this._text.textContent=null,f},n.prototype.startGroup=function(t,i,r){r===void 0&&(r=!1);var u=document.createElementNS(n.svgNS,'g');return t&&u.setAttribute('class',t),i&&u.setAttribute('clip-path','url(#'+i+')'),this._appendChild(u),r&&u.transform.baseVal.appendItem(this._svg.createSVGTransform()),this._group=u,u},n.prototype.endGroup=function(){if(this._group){var n=this._group.parentNode;this._group=n==this._svg?null:n}},n.prototype.drawImage=function(t,i,r,u,f){var e=document.createElementNS(n.svgNS,'image');return e.setAttributeNS(n.xlinkNS,'href',t),e.setAttribute('x',i.toFixed(1)),e.setAttribute('y',r.toFixed(1)),e.setAttribute('width',u.toFixed(1)),e.setAttribute('height',f.toFixed(1)),this._appendChild(e),e},n.prototype._appendChild=function(n){var t=this._group;t||(t=this._svg);t.appendChild(n)},n.prototype._create=function(){this._svg=document.createElementNS(n.svgNS,'svg');this._defs=document.createElementNS(n.svgNS,'defs');this._svg.appendChild(this._defs);this._text=this._createText(new i.Point(-1e3,-1e3),'');this._textGroup=document.createElementNS(n.svgNS,'g');this._textGroup.appendChild(this._text);this._svg.appendChild(this._textGroup)},n.prototype._setText=function(n,t){var i=t?t.toString():null;if(i&&i.indexOf('tspan')>=0)try{n.textContent=null;for(var u=new DOMParser,f='<svg xmlns="http://www.w3.org/2000/svg\">'+i+'</svg>',e=u.parseFromString(f,'text/xml').documentElement,r=e.firstChild;r;)n.appendChild(n.ownerDocument.importNode(r,!0)),r=r.nextSibling}catch(o){throw new Error('Error parsing XML string.');}else n.textContent=i},n.prototype._createText=function(t,i){var r=document.createElementNS(n.svgNS,'text');return this._setText(r,i),r.setAttribute('fill',this._textFill),r.setAttribute('x',t.x.toFixed(1)),r.setAttribute('y',t.y.toFixed(1)),this._fontSize&&r.setAttribute('font-size',this._fontSize),this._fontFamily&&r.setAttribute('font-family',this._fontFamily),r},n.prototype._applyStyle=function(n,t){if(t)for(var i in t)i==='fill'||i==='stroke'?this._applyColor(n,i,t[i]):n.setAttribute(this._deCase(i),t[i])},n.prototype._deCase=function(n){return n.replace(/[A-Z]/g,function(n){return'-'+n.toLowerCase()})},n.prototype._getBBox=function(t){if(n._isff)try{return t.getBBox()}catch(i){return{x:0,y:0,width:0,height:0}}else return t.getBBox()},n.prototype._applyColor=function(t,r,u){var f=lr.tryParse(u),o,e;f!=null&&(i.isString(f)?t.setAttribute(r,f):(this._savedGradient[u]==null&&(o='gc'+(1e6*Math.random()).toFixed(),f.x1!=null?(e=document.createElementNS(n.svgNS,'linearGradient'),['x1','y1','x2','y2','gradientUnits'].forEach(function(n){f[n]!=null&&e.setAttribute(n,f[n])})):f.r!=null&&(e=document.createElementNS(n.svgNS,'radialGradient'),['cx','cy','r','fx','fy','fr','gradientUnits'].forEach(function(n){f[n]!=null&&e.setAttribute(n,f[n])})),f.colors&&f.colors&&f.colors.length>0&&f.colors.forEach(function(t){var i=document.createElementNS(n.svgNS,'stop');t.color!=null&&i.setAttribute('stop-color',t.color);t.offset!=null&&i.setAttribute('offset',t.offset);t.opacity!=null&&i.setAttribute('stop-opacity',t.opacity);e.appendChild(i)}),e.setAttribute('id',o),this._defs.appendChild(e),this._savedGradient[u]=o),t.setAttribute(r,'url(#'+this._savedGradient[u]+')')))},n.svgNS='http://www.w3.org/2000/svg',n.xlinkNS='http://www.w3.org/1999/xlink',n}();t._SvgRenderEngine=fi;lr=function(){function n(){}return n.tryParse=function(t){var o;if(n.parsedColor[t])return n.parsedColor[t];if(t==null||t.indexOf('-')===-1)return t;var e=t.replace(/\s+/g,'').split(/\-/g),u=e[0][0],f=!1,i,r=e[0].match(/\(\S+\)/)[0].replace(/[\(\\)]/g,'').split(/\,/g);return u==='l'||u==='L'?(i={x1:'0',y1:'0',x2:'0',y2:'0',colors:[]},u==='l'&&(f=!0),['x1','y1','x2','y2'].forEach(function(n,t){r[t]!=null&&(i[n]=f?+r[t]*100+'%':r[t]+'')})):(u==='r'||u==='R')&&(i={cx:'0',cy:'0',r:'0',colors:[]},u==='r'&&(f=!0),['cx','cy','r','fx','fy','fr'].forEach(function(n,t){r[t]!=null&&r[t]!==''&&(i[n]=f?+r[t]*100+'%':r[t]+'')})),f||(i.gradientUnits="userSpaceOnUse"),n.parsedColor[t]=i,o=e.length-1,e.forEach(function(n,t){n.indexOf(')')>-1&&(n=n.match(/\)\S+/)[0].replace(')',''));var r=n.split(':'),u={color:'black'};r[0]!=null&&(u.color=r[0]);u.offset=r[1]!=null?f?+r[1]*100+'%':r[1]+'':t/o*100+'%';r[2]!=null&&(u.opacity=r[2]);i.colors.push(u)}),i},n.parsedColor={},n}();kt=function(){function n(n){this._position=f.Right;this._areas=[];this._sz=new i.Size;this._colRowLens=[];this._chart=n}return Object.defineProperty(n.prototype,"position",{get:function(){return this._position},set:function(n){this._position!=n&&(this._position=i.asEnum(n,f),this._chart&&this._chart.invalidate())},enumerable:!0,configurable:!0}),n.prototype._getDesiredSize=function(n,t,i,r){if(t==f.None)return null;var u=t==f.Right||t==f.Left;if(this._chart instanceof ot)this._sz=this._getDesiredSizeSeriesChart(n,u,i,r);else if(this._chart instanceof at)this._sz=this._getDesiredSizePieChart(n,u,i,r);else return null;return this._sz},n.prototype._getDesiredSizeSeriesChart=function(n,t,r,u){for(var h,a,p,c,s,f=new i.Size,v=this._chart.series,w=v.length,e=0,o=0,l=0;l<w;l++)if(h=i.tryCast(v[l],tt),a=h.visibility,h.name&&a!=y.Hidden&&a!=y.Plot)for(p=h.legendItemLength(),c=0;c<p;c++)s=h.measureLegendItem(n,c),t?(e+s.height>u?(f.width+=o,o=0,f.height<e&&(f.height=e),e=0):e+=s.height,o<s.width&&(o=s.width)):(o+s.width>r?(f.height+=e,e=0,f.width<o&&(f.width=o),o=s.width):o+=s.width,e<s.height&&(e=s.height));return t?(f.height<e&&(f.height=e),f.width+=o):(f.width<o&&(f.width=o),f.height+=e),f},n.prototype._renderSeriesChart=function(n,t,r,u,f){for(var e,s,k,v,h,o,w,b=this._chart.series,d=b.length,c=t.clone(),l=0,a=0,p=0;p<d;p++)if(e=i.tryCast(b[p],tt),e){if(s=e.visibility,!e.name||s==y.Hidden||s==y.Plot){e._legendElement=null;this._areas.push(null);continue}for(k=e.legendItemLength(),v=n.startGroup(e.cssClass),s==y.Legend?(v.setAttribute('opacity','0.5'),e._legendElement=v):e._legendElement=s==y.Visible?v:null,h=0;h<k;h++)o=e.measureLegendItem(n,h),r?t.y+o.height>c.y+f&&(t.y=c.y,t.x+=a,a=0):t.x+o.width>c.x+u&&(t.x=c.x,t.y+=l,l=0),w=new i.Rect(t.x,t.y,o.width,o.height),(s==y.Legend||s==y.Visible)&&e.drawLegendItem(n,w,h),this._areas.push(w),r?(t.y+=o.height,a<o.width&&(a=o.width)):(t.x+=o.width,l<o.height&&(l=o.height));n.endGroup()}},n.prototype._getDesiredSizePieChart=function(n,t,r,u){var o=new i.Size,a=this._chart,c=new i.Size(r,u),v=a._getLabelsForLegend(),l=v.length,f=0,e=0,h,s;for(this._colRowLens=[],h=0;h<l;h++)s=a._measureLegendItem(n,v[h]),t?(f<s.width&&(f=s.width),e+s.height>c.height&&(o.height=c.height,this._colRowLens.push(f),e=0,f=0),e+=s.height,h===l-1&&(o.height<e&&(o.height=e),this._colRowLens.push(f))):(e<s.height&&(e=s.height),f+s.width>c.width&&(o.width=c.width,this._colRowLens.push(e),e=0,f=0),f+=s.width,h===l-1&&(o.width<f&&(o.width=f),this._colRowLens.push(e))),t?o.width=this._colRowLens.reduce(function(n,t){return n+t},0):o.height=this._colRowLens.reduce(function(n,t){return n+t},0);return o},n.prototype._renderPieChart=function(n,t,r){for(var f,l,o=this._chart,s=o._rectLegend,c=o._getLabelsForLegend(),a=c.length,h=0,u=t.clone(),e=0;e<a;e++)f=o._measureLegendItem(n,c[e]),r?u.y+f.height>s.top+s.height+1&&(u.x+=this._colRowLens[h],h++,u.y=t.y):u.x+f.width>s.left+s.width+1&&(u.y+=this._colRowLens[h],h++,u.x=t.x),l=new i.Rect(u.x,u.y,f.width,f.height),o._drawLegendItem(n,l,e,c[e]),this._areas.push(l),r?u.y+=f.height:u.x+=f.width},n.prototype._getPosition=function(n,t){return this.position==f.Auto?n>=t?f.Right:f.Bottom:this.position},n.prototype._render=function(n,t,i,r,u){this._areas=[];var e=i==f.Right||i==f.Left;if(n.fill='transparent',n.stroke=null,n.drawRect(t.x,t.y,this._sz.width,this._sz.height),this._chart instanceof ot)this._renderSeriesChart(n,t,e,r,u);else if(this._chart instanceof at)this._renderPieChart(n,t,e);else return null},n.prototype._hitTest=function(n){for(var i=this._areas,t=0;t<i.length;t++)if(i[t]&&ot._contains(i[t],n))return t;return null},n}();t.Legend=kt,function(n){n[n.PlotArea=0]="PlotArea";n[n.AxisX=1]="AxisX";n[n.AxisY=2]="AxisY";n[n.ChartArea=3]="ChartArea";n[n.Legend=4]="Legend";n[n.Header=5]="Header";n[n.Footer=6]="Footer";n[n.Series=7]="Series";n[n.SeriesSymbol=8]="SeriesSymbol";n[n.DataLabel=9]="DataLabel";n[n.None=10]="None"}(t.ChartElement||(t.ChartElement={}));c=t.ChartElement;b=function(){function n(n,t,i){this._pointIndex=null;this._chartElement=c.None;this._chart=n;this._pt=t;this._chartElement=i}return Object.defineProperty(n.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pointIndex",{get:function(){return this._pointIndex},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"chartElement",{get:function(){return this._chartElement},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"distance",{get:function(){return this._dist},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"item",{get:function(){if(this._item==null&&this.pointIndex!==null)if(this.series!=null)this._item=this.series._getItem(this.pointIndex);else if(this._chart instanceof at){var t=this._chart,n=null;n=t._cv!=null?t._cv.items:t.itemsSource;n&&this.pointIndex<n.length&&(this._item=n[this.pointIndex])}return this._item},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"x",{get:function(){return this._x===undefined&&(this._x=this._getValue(1,!1)),this._x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y===undefined&&(this._y=this._getValue(0,!1)),this._y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){if(this._chart instanceof at){var n=this._chart;return n._values[this.pointIndex]}return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){if(this._name===undefined){if(this._chart instanceof at){var n=this._chart;return n._labels[this.pointIndex]}return this.series.name}return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_xfmt",{get:function(){return this.__xfmt===undefined&&(this.__xfmt=this._getValue(1,!0)),this.__xfmt},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_yfmt",{get:function(){return this.__yfmt===undefined&&(this.__yfmt=this._getValue(0,!0)),this.__yfmt},enumerable:!0,configurable:!0}),n.prototype._setData=function(n,t){this._series=n;this._pointIndex=t},n.prototype._setDataPoint=function(n){if(n=i.asType(n,p,!0),n){this._pointIndex=n.pointIndex;var r=i.asType(this._chart,ot,!0),t=n.seriesIndex;t!==null&&t>=0&&t<r.series.length&&(this._series=r.series[t]);n.item!=null&&(this._item=n.item);n.x!=null&&(this._x=n.x);n.y!=null&&(this._y=n.y);n.xfmt!=null&&(this.__xfmt=n.xfmt);n.yfmt!=null&&(this.__yfmt=n.yfmt);n.name!=null&&(this._name=n.name)}},n.prototype._getValue=function(n,t){var o,e,s;if(this._chart instanceof at)return o=this._chart,o._values[this.pointIndex];var r=null,u=this._chart,f=this.pointIndex,h=u._isRotated();return this.series!==null&&f!==null&&(e=this.series.getValues(n),s=this.series.getDataType(n),e&&this.pointIndex<e.length?(r=e[this.pointIndex],s!=i.DataType.Date||t||(r=new Date(r))):n==1&&(u._xlabels&&u._xlabels.length>0&&f<u._xlabels.length?r=u._xlabels[f]:u._xvals&&f<u._xvals.length&&(r=u._xvals[f],u._xDataType!=i.DataType.Date||t||(r=new Date(r))))),r!==null&&t&&(h?n==0?r=u.axisX._formatValue(r):n==1&&(r=u.axisY._formatValue(r)):n==0?r=u.axisY._formatValue(r):n==1&&(r=u.axisX._formatValue(r))),r},n}();t.HitTestInfo=b;tr=function(){function n(){}return n.standard=['#88bde6','#fbb258','#90cd97','#f6aac9','#bfa554','#bc99c7','#eddd46','#f07e6e','#8c8c8c'],n.cocoa=['#466bb0','#c8b422','#14886e','#b54836','#6e5944','#8b3872','#73b22b','#b87320','#141414'],n.coral=['#84d0e0','#f48256','#95c78c','#efa5d6','#ba8452','#ab95c2','#ede9d0','#e96b7d','#888888'],n.dark=['#005fad','#f06400','#009330','#e400b1','#b65800','#6a279c','#d5a211','#dc0127','#000000'],n.highcontrast=['#ff82b0','#0dda2c','#0021ab','#bcf28c','#19c23b','#890d3a','#607efd','#1b7700','#000000'],n.light=['#ddca9a','#778deb','#cb9fbb','#b5eae2','#7270be','#a6c7a7','#9e95c7','#95b0c7','#9b9b9b'],n.midnight=['#83aaca','#e37849','#14a46a','#e097da','#a26d54','#a584b7','#d89c54','#e86996','#2c343b'],n.modern=['#2d9fc7','#ec993c','#89c235','#e377a4','#a68931','#a672a6','#d0c041','#e35855','#68706a'],n.organic=['#9c88d9','#a3d767','#8ec3c0','#e9c3a9','#91ab36','#d4ccc0','#61bbd8','#e2d76f','#80715a'],n.slate=['#7493cd','#f99820','#71b486','#e4a491','#cb883b','#ae83a4','#bacc5c','#e5746a','#505d65'],n.zen=['#7bb5ae','#e2d287','#92b8da','#eac4cb','#7b8bbd','#c7d189','#b9a0c8','#dfb397','#a9a9a9'],n.cyborg=['#2a9fd6','#77b300','#9933cc','#ff8800','#cc0000','#00cca3','#3d6dcc','#525252','#000000'],n.superhero=['#5cb85c','#f0ad4e','#5bc0de','#d9534f','#9f5bde','#46db8c','#b6b86e','#4e5d6c','#2b3e4b'],n.flatly=['#18bc9c','#3498db','#f39c12','#6cc1be','#99a549','#8f54b5','#e74c3c','#8a9899','#2c3e50'],n.darkly=['#375a7f','#00bc8c','#3498db','#f39c12','#e74c3c','#8f61b3','#b08725','#4a4949','#000000'],n.cerulan=['#033e76','#87c048','#59822c','#53b3eb','#fc6506','#d42323','#e3bb00','#cccccc','#222222'],n}();t.Palettes=tr;ei=function(){function n(n,t){var s,r;if(this.k=.002,this._a=[],this._b=[],this._c=[],this._d=[],this.m=[[-1*.5,3*.5,-3*.5,1*.5],[2*.5,-5*.5,4*.5,-1*.5],[-1*.5,0,1*.5,0],[0,2*.5,0,0],],this._x=n,this._y=t,s=this._len=Math.min(n.length,t.length),s>3)for(r=0;r<s-1;r++){var u=r==0?new i.Point(n[r],t[r]):new i.Point(n[r-1],t[r-1]),f=new i.Point(n[r],t[r]),e=new i.Point(n[r+1],t[r+1]),o=r==s-2?new i.Point(n[r+1],t[r+1]):new i.Point(n[r+2],t[r+2]),h=new i.Point,c=new i.Point,l=new i.Point,a=new i.Point;h.x=u.x*this.m[0][0]+f.x*this.m[0][1]+e.x*this.m[0][2]+o.x*this.m[0][3];c.x=u.x*this.m[1][0]+f.x*this.m[1][1]+e.x*this.m[1][2]+o.x*this.m[1][3];l.x=u.x*this.m[2][0]+f.x*this.m[2][1]+e.x*this.m[2][2]+o.x*this.m[2][3];a.x=u.x*this.m[3][0]+f.x*this.m[3][1]+e.x*this.m[3][2]+o.x*this.m[3][3];h.y=u.y*this.m[0][0]+f.y*this.m[0][1]+e.y*this.m[0][2]+o.y*this.m[0][3];c.y=u.y*this.m[1][0]+f.y*this.m[1][1]+e.y*this.m[1][2]+o.y*this.m[1][3];l.y=u.y*this.m[2][0]+f.y*this.m[2][1]+e.y*this.m[2][2]+o.y*this.m[2][3];a.y=u.y*this.m[3][0]+f.y*this.m[3][1]+e.y*this.m[3][2]+o.y*this.m[3][3];this._a.push(h);this._b.push(c);this._c.push(l);this._d.push(a)}}return n.prototype.calculatePoint=function(n){var t=Math.floor(n);t<0&&(t=0);t>this._len-2&&(t=this._len-2);var i=n-t,r=((this._a[t].x*i+this._b[t].x)*i+this._c[t].x)*i+this._d[t].x,u=((this._a[t].y*i+this._b[t].y)*i+this._c[t].y)*i+this._d[t].y;return{x:r,y:u}},n.prototype.calculate=function(){var f,e,i,n;if(this._len<=3)return{xs:this._x,ys:this._y};var r=[],u=[],t=this.calculatePoint(0);for(r.push(t.x),u.push(t.y),f=this._len*this.k,e=3,i=f;i<=this._len-1;i+=f)n=this.calculatePoint(i),(Math.abs(t.x-n.x)>=e||Math.abs(t.y-n.y)>=e)&&(r.push(n.x),u.push(n.y),t=n);return{xs:r,ys:u}},n}();t._Spline=ei,function(n){n[n.None=0]="None";n[n.Left=1]="Left";n[n.Top=2]="Top";n[n.Right=3]="Right";n[n.Bottom=4]="Bottom";n[n.Center=5]="Center"}(t.LabelPosition||(t.LabelPosition={}));rt=t.LabelPosition,function(n){n[n.None=0]="None";n[n.Inside=1]="Inside";n[n.Center=2]="Center";n[n.Outside=3]="Outside"}(t.PieLabelPosition||(t.PieLabelPosition={}));ut=t.PieLabelPosition;ir=function(n){function t(t,i,r,u){n.call(this,t);this.cancel=!1;this._ht=i;this._pt=r;this._text=u}return __extends(t,n),Object.defineProperty(t.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hitTestInfo",{get:function(){return this._ht},enumerable:!0,configurable:!0}),t}(et);t.DataLabelRenderEventArgs=ir;oi=function(){function n(){this.rendering=new i.Event}return Object.defineProperty(n.prototype,"content",{get:function(){return this._content},set:function(n){n!=this._content&&(this._content=n,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"border",{get:function(){return this._bdr},set:function(n){n!=this._bdr&&(this._bdr=i.asBoolean(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"offset",{get:function(){return this._off},set:function(n){n!=this._off&&(this._off=i.asNumber(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"connectingLine",{get:function(){return this._line},set:function(n){n!=this._line&&(this._line=i.asBoolean(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),n.prototype.onRendering=function(n){return this.rendering.raise(this,n),n.cancel},n.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},n}();t.DataLabelBase=oi;si=function(n){function t(){n.apply(this,arguments);this._pos=rt.Top}return __extends(t,n),Object.defineProperty(t.prototype,"position",{get:function(){return this._pos},set:function(n){n!=this._pos&&(this._pos=i.asEnum(n,rt),this._invalidate())},enumerable:!0,configurable:!0}),t}(oi);t.DataLabel=si;rr=function(n){function t(){n.apply(this,arguments);this._pos=ut.Center}return __extends(t,n),Object.defineProperty(t.prototype,"position",{get:function(){return this._pos},set:function(n){n!=this._pos&&(this._pos=i.asEnum(n,ut),this._invalidate())},enumerable:!0,configurable:!0}),t}(oi);t.PieDataLabel=rr;ar=function(){function n(){this._moveMarker=function(n){var r=n.currentTarget,u=this._markers,t=r.getAttribute('data-markerIndex'),i;t!=null&&(i=u[t],i.forEach(function(t){t._moveMarker(n)}))};this._markers=[];this._bindMoveMarker=this._moveMarker.bind(this)}return n.prototype.attach=function(n){var r=n.chart.hostElement,u=this._markers,f=r.getAttribute('data-markerIndex'),e,t;f!=null?(t=u[f],t&&i.isArray(t)?t.push(n):(u[f]=[n],this._bindMoveEvent(r))):(e=u.length,t=[n],u.push(t),r.setAttribute('data-markerIndex',e),this._bindMoveEvent(r))},n.prototype.detach=function(n){var u=n.chart.hostElement,r=this._markers,f=u.getAttribute('data-markerIndex'),t,i;f!=null&&(i=r[f],t=i.indexOf(n),t>-1&&i.splice(t,1),i.length===0&&(t=r.indexOf(i),t>-1&&(r[t]=undefined),this._unbindMoveEvent(u)))},n.prototype._unbindMoveEvent=function(n){var t=this._bindMoveMarker;n.removeEventListener('mousemove',t);'ontouchstart'in window&&n.removeEventListener('touchmove',t)},n.prototype._bindMoveEvent=function(n){var t=this._bindMoveMarker;n.addEventListener('mousemove',t);'ontouchstart'in window&&n.addEventListener('touchmove',t)},n}();ur=new ar,function(n){n[n.None=0]="None";n[n.Vertical=1]="Vertical";n[n.Horizontal=2]="Horizontal";n[n.Both=3]="Both"}(t.LineMarkerLines||(t.LineMarkerLines={}));k=t.LineMarkerLines,function(n){n[n.None=0]="None";n[n.Move=1]="Move";n[n.Drag=2]="Drag"}(t.LineMarkerInteraction||(t.LineMarkerInteraction={}));d=t.LineMarkerInteraction,function(n){n[n.Auto=2]="Auto";n[n.Right=0]="Right";n[n.Left=1]="Left";n[n.Bottom=4]="Bottom";n[n.Top=6]="Top"}(t.LineMarkerAlignment||(t.LineMarkerAlignment={}));hi=t.LineMarkerAlignment;vr=function(){function n(n,t){this._wrapperMousedown=null;this._wrapperMouseup=null;this.positionChanged=new i.Event;var r=this;r._chart=n;n.rendered.addHandler(r._initialize,r);r._resetDefaultValue();i.copy(this,t);r._initialize()}return Object.defineProperty(n.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isVisible",{get:function(){return this._isVisible},set:function(n){var t=this;n!==t._isVisible&&(t._isVisible=i.asBoolean(n),t._marker)&&t._toggleVisibility()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"seriesIndex",{get:function(){return this._seriesIndex},set:function(n){var t=this;n!==t._seriesIndex&&(t._seriesIndex=i.asNumber(n,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"horizontalPosition",{get:function(){return this._horizontalPosition},set:function(n){var t=this;if(n!==t._horizontalPosition){if(t._horizontalPosition=i.asNumber(n,!0),t._horizontalPosition<0||t._horizontalPosition>1)throw'horizontalPosition\'s value should be in (0, 1).';t._marker&&t._updateMarkerPosition()}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"x",{get:function(){var n=this,t=n._targetPoint.x-n._plotRect.left,i=n._chart.axisX;return i.convertBack(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){var n=this,t=n._targetPoint.y-n._plotRect.top,i=n._chart.axisY;return i.convertBack(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"content",{get:function(){return this._content},set:function(n){n!==this._content&&(this._content=i.asFunction(n),this._updateMarkerPosition())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"verticalPosition",{get:function(){return this._verticalPosition},set:function(n){var t=this;if(n!==t._verticalPosition){if(t._verticalPosition=i.asNumber(n,!0),t._verticalPosition<0||t._verticalPosition>1)throw'verticalPosition\'s value should be in (0, 1).';t._marker&&t._updateMarkerPosition()}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"alignment",{get:function(){return this._alignment},set:function(n){var t=this;n!==t._alignment&&(t._alignment=n,t._marker)&&t._updatePositionByAlignment()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lines",{get:function(){return this._lines},set:function(n){var t=this;n!==t._lines&&(t._lines=i.asEnum(n,k),t._marker)&&t._resetLinesVisibility()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"interaction",{get:function(){return this._interaction},set:function(n){var t=this;n!==t._interaction&&(t._marker&&t._detach(),t._interaction=i.asEnum(n,d),t._marker&&t._attach(),t._toggleElesDraggableClass(t._interaction===d.Drag))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dragThreshold",{get:function(){return this._dragThreshold},set:function(n){n!=this._dragThreshold&&(this._dragThreshold=i.asNumber(n))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dragContent",{get:function(){return this._dragContent},set:function(t){var r=this;t!==r._dragContent&&(r._dragContent=i.asBoolean(t));i.toggleClass(r._dragEle,n._CSS_LINE_DRAGGABLE,r._interaction===d.Drag&&r._dragContent&&r._lines!==k.None)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dragLines",{get:function(){return this._dragLines},set:function(n){n!=this._dragLines&&(this._dragLines=i.asBoolean(n))},enumerable:!0,configurable:!0}),n.prototype.onPositionChanged=function(n){this.positionChanged.raise(this,n)},n.prototype.remove=function(){var n=this,t=n._chart;n._marker&&(t.rendered.removeHandler(n._initialize,n),n._detach(),n._removeMarker(),n._wrapperMoveMarker=null,n._wrapperMousedown=null,n._wrapperMouseup=null)},n.prototype._attach=function(){var t=this,r=t._chart.hostElement;this._interaction!==d.None?i.addClass(r,n._CSS_TOUCH_DISABLED):i.removeClass(r,n._CSS_TOUCH_DISABLED);ur.attach(t);t._attachDrag()},n.prototype._attachDrag=function(){var n=this;n._interaction===d.Drag&&(n._wrapperMousedown||(n._wrapperMousedown=n._onMousedown.bind(n)),n._wrapperMouseup||(n._wrapperMouseup=n._onMouseup.bind(n)),n._toggleDragEventAttach(!0))},n.prototype._detach=function(){var t=this;i.removeClass(t._chart.hostElement,n._CSS_TOUCH_DISABLED);ur.detach(t);t._detachDrag()},n.prototype._detachDrag=function(){var n=this;n._interaction===d.Drag&&n._toggleDragEventAttach(!1)},n.prototype._toggleDragEventAttach=function(n){var t=this,r=t._chart.hostElement,i=n?'addEventListener':'removeEventListener';r[i]('mousedown',t._wrapperMousedown);document[i]('mouseup',t._wrapperMouseup);'ontouchstart'in window&&r[i]('touchstart',t._wrapperMousedown);'ontouchend'in window&&document[i]('touchend',t._wrapperMouseup)},n.prototype._onMousedown=function(t){var r=this,u=r._getEventPoint(t),f,e,o,s,h;r._interaction===d.Drag&&(f=i.getElementRect(r._hLine),s=!(f.width===0||f.height===0),e=i.getElementRect(r._vLine),h=!(e.width===0||e.height===0),o=i.getElementRect(r._markerContent),r._dragContent&&r._pointInRect(u,o)?(r._capturedEle=r._markerContent,r._contentDragStartPoint=new i.Point(u.x,u.y),r._mouseDownCrossPoint=new i.Point(r._targetPoint.x,r._targetPoint.y)):s&&(Math.abs(f.top-u.y)<=r._dragThreshold||Math.abs(u.y-f.top-f.height)<=r._dragThreshold||u.y>=f.top&&u.y<=f.top+f.height)?(r._capturedEle=r._hLine,r._contentDragStartPoint=undefined,i.addClass(r._chart.hostElement,n._CSS_LINE_DRAGGABLE)):h&&(Math.abs(e.left-u.x)<=r._dragThreshold||Math.abs(u.x-e.left-e.width)<=r._dragThreshold||u.x>=e.left&&u.x<=e.left+e.width)&&(r._capturedEle=r._vLine,r._contentDragStartPoint=undefined,i.addClass(r._chart.hostElement,n._CSS_LINE_DRAGGABLE)),t.preventDefault())},n.prototype._onMouseup=function(){var t=this,r=t._alignment===hi.Auto&&t._capturedEle===t._markerContent&&t._lines!==k.None;t._capturedEle=undefined;t._contentDragStartPoint=undefined;t._mouseDownCrossPoint=undefined;r&&(t._updatePositionByAlignment(),t._updatePositionByAlignment());i.removeClass(t._chart.hostElement,n._CSS_LINE_DRAGGABLE)},n.prototype._moveMarker=function(n){var t=this,o=t._chart,r=t._getEventPoint(n),f=t._plotRect,c=t._interaction===d.Drag,l=t._lines===k.Horizontal,a=t._lines===k.Vertical,s=t._seriesIndex,h,v=i.getElementRect(o.hostElement),e,y,p,w,b;if(f&&t._isVisible&&t._interaction!==d.None&&(t._interaction!==d.Drag||t._capturedEle&&t._lines!==k.None)){if(c&&(t._contentDragStartPoint?(r.x=l?t._targetPoint.x:t._mouseDownCrossPoint.x+r.x-t._contentDragStartPoint.x,r.y=a?t._targetPoint.y:t._mouseDownCrossPoint.y+r.y-t._contentDragStartPoint.y):l||!t._dragLines&&t._capturedEle===t._hLine?r.x=t._targetPoint.x:(a||!t._dragLines&&t._capturedEle===t._vLine)&&(r.y=t._targetPoint.y)),c&&t._lines===k.Horizontal||!t._dragLines&&t._capturedEle===t._hLine){if(r.y<=f.top||r.y>=f.top+f.height)return}else if(c&&t._lines===k.Vertical||!t._dragLines&&t._capturedEle===t._vLine){if(r.x<=f.left||r.x>=f.left+f.width)return}else if(r.x<=f.left||r.y<=f.top||r.x>=f.left+f.width||r.y>=f.top+f.height)return;if(s!=null&&s>=0&&s<o.series.length){if(h=o.series[s],e=h.hitTest(new i.Point(r.x,NaN)),e==null||e.x==null||e.y==null)return;y=h.axisX||o.axisX;p=h._getAxisY();w=i.isDate(e.x)?u._toOADate(e.x):e.x;b=i.isDate(e.y)?u._toOADate(e.y):e.y;r.x=y.convert(w)+v.left;r.y=p.convert(b)+v.top}t._updateMarkerPosition(r);n.preventDefault()}},n.prototype._show=function(n){var t=n?n:this._marker;t.style.display='block'},n.prototype._hide=function(n){var t=n?n:this._marker;t.style.display='none'},n.prototype._toggleVisibility=function(){this._isVisible?this._show():this._hide()},n.prototype._resetDefaultValue=function(){var n=this;n._isVisible=!0;n._alignment=hi.Auto;n._lines=k.None;n._interaction=d.None;n._horizontalPosition=null;n._verticalPosition=null;n._content=null;n._seriesIndex=null;n._dragThreshold=15;n._dragContent=!1;n._dragLines=!1;n._targetPoint=new i.Point},n.prototype._initialize=function(){var n=this,t=n._chart.hostElement.querySelector("."+u._CSS_PLOT_AREA),r;n._plot=t;n._marker||n._createMarker();t&&(n._plotRect=i.getElementRect(t),r=t.getBBox(),n._plotRect.width=r.width,n._plotRect.height=r.height,n._updateMarkerSize(),n._updateLinesSize());n._updateMarkerPosition();n._wrapperMoveMarker=n._moveMarker.bind(n);n._attach()},n.prototype._createMarker=function(){var t=this,r,u;r=document.createElement('div');i.addClass(r,n._CSS_MARKER);u=t._getContainer();u.appendChild(r);t._markerContainer=u;t._marker=r;t._createChildren()},n.prototype._removeMarker=function(){var n=this,t=n._markerContainer;t.removeChild(n._marker);n._content=null;n._hLine=null;n._vLine=null;t.hasChildNodes()||(n._chart.hostElement.removeChild(n._markerContainer),n._markerContainer=null);n._marker=null},n.prototype._getContainer=function(){var t=this._chart.hostElement.querySelector(n._CSS_MARKER_CONTAINER);return t||(t=this._createContainer()),t},n.prototype._createContainer=function(){var t=document.createElement('div'),r=this._chart.hostElement;return i.addClass(t,n._CSS_MARKER_CONTAINER),r.insertBefore(t,r.firstChild),t},n.prototype._createChildren=function(){var t=this,u=t._marker,f,e,o,r;r=document.createElement('div');r.style.position='absolute';r.style.height='100%';r.style.width='100%';u.appendChild(r);t._dragEle=r;f=document.createElement('div');i.addClass(f,n._CSS_MARKER_CONTENT);u.appendChild(f);t._markerContent=f;e=document.createElement('div');i.addClass(e,n._CSS_MARKER_HLINE);u.appendChild(e);t._hLine=e;o=document.createElement('div');i.addClass(o,n._CSS_MARKER_VLINE);u.appendChild(o);t._vLine=o;t._toggleElesDraggableClass(t._interaction===d.Drag);t._resetLinesVisibility()},n.prototype._toggleElesDraggableClass=function(t){var r=this;i.toggleClass(r._hLine,n._CSS_LINE_DRAGGABLE,t);i.toggleClass(r._vLine,n._CSS_LINE_DRAGGABLE,t);i.toggleClass(r._dragEle,n._CSS_LINE_DRAGGABLE,t&&r._dragContent&&r._lines!==k.None)},n.prototype._updateMarkerSize=function(){var n=this,t=n._plotRect,r=n._chart.hostElement,u=window.getComputedStyle(r,null),f=i.getElementRect(r);n._marker&&(n._marker.style.marginTop=t.top-f.top-(parseFloat(u.getPropertyValue('padding-top'))||0)+'px',n._marker.style.marginLeft=t.left-f.left-(parseFloat(u.getPropertyValue('padding-left'))||0)+'px')},n.prototype._updateLinesSize=function(){var n=this,t=n._plotRect;n._hLine&&n._vLine&&(n._hLine.style.width=t.width+'px',n._vLine.style.height=t.height+'px')},n.prototype._resetLinesVisibility=function(){var n=this;n._hLine&&n._vLine&&(n._hide(n._hLine),n._hide(n._vLine),(n._lines===k.Horizontal||n._lines===k.Both)&&n._show(n._hLine),(n._lines===k.Vertical||n._lines===k.Both)&&n._show(n._vLine))},n.prototype._updateMarkerPosition=function(n){var t=this,u=t._plotRect,f=t._targetPoint,i,r,e=!1,o=t._interaction===d.Drag;t._plot&&(i=u.left+u.width*(t._horizontalPosition||0),r=u.top+u.height*(t._verticalPosition||0),t._horizontalPosition==null&&n&&(i=n.x),t._verticalPosition==null&&n&&(r=n.y),(i!==f.x||r!==f.y)&&(e=!0),f.x=i,f.y=r,t._toggleVisibility(),t._content&&t._updateContent(),e&&t._raisePositionChanged(i,r),t._updatePositionByAlignment(n?!0:!1))},n.prototype._updateContent=function(){var n=this,r=n._chart,t=n._targetPoint,u=r.hitTest(t),i;i=n._content.call(null,u,t);n._markerContent.innerHTML=i||''},n.prototype._raisePositionChanged=function(n,t){var r=this._plotRect;this.onPositionChanged(new i.Point(n,t))},n.prototype._updatePositionByAlignment=function(){var n=this,s=n._alignment,r=n._targetPoint,e=n._marker,t=0,i=0,f=e.clientWidth,o=e.clientHeight,u=n._plotRect,h=12;n._plot&&(!n._capturedEle||n._capturedEle&&n._capturedEle!==n._markerContent?(s===hi.Auto?(r.x+f+h>u.left+u.width&&r.x-f>=0&&(i=f),t=o,r.y-o<u.top&&(t=0)):((1&s)==1&&(i=f),(2&s)==2&&(t=o)),n._interaction===d.Move&&t===0&&i===0&&(i=-h)):(parseInt(n._hLine.style.top)>0&&(t=o),parseInt(n._vLine.style.left)>0&&(i=f)),e.style.left=r.x-i-u.left+'px',e.style.top=r.y-t-u.top+'px',n._hLine.style.top=t+'px',n._hLine.style.left=u.left-r.x+i+'px',n._vLine.style.top=u.top-r.y+t+'px',n._vLine.style.left=i+'px')},n.prototype._getEventPoint=function(n){return n instanceof MouseEvent?new i.Point(n.pageX,n.pageY):new i.Point(n.changedTouches[0].pageX,n.changedTouches[0].pageY)},n.prototype._pointInRect=function(n,t){return!n||!t?!1:n.x>=t.left&&n.x<=t.left+t.width&&n.y>=t.top&&n.y<=t.top+t.height?!0:!1},n._CSS_MARKER='wj-chart-linemarker',n._CSS_MARKER_HLINE='wj-chart-linemarker-hline',n._CSS_MARKER_VLINE='wj-chart-linemarker-vline',n._CSS_MARKER_CONTENT='wj-chart-linemarker-content',n._CSS_MARKER_CONTAINER='wj-chart-linemarker-container',n._CSS_LINE_DRAGGABLE='wj-chart-linemarker-draggable',n._CSS_TOUCH_DISABLED='wj-flexchart-touch-disabled',n}();t.LineMarker=vr;p=function(){function n(n,t,i,r){this._seriesIndex=n;this._pointIndex=t;this._dataX=i;this._dataY=r}return Object.defineProperty(n.prototype,"seriesIndex",{get:function(){return this._seriesIndex},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pointIndex",{get:function(){return this._pointIndex},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dataX",{get:function(){return this._dataX},set:function(n){n!==this._dataX&&(this._dataX=n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dataY",{get:function(){return this._dataY},set:function(n){n!==this._dataY&&(this._dataY=n)},enumerable:!0,configurable:!0}),n}();t._DataPoint=p,function(n){n[n.X=0]="X";n[n.Y=1]="Y";n[n.XY=2]="XY"}(t._MeasureOption||(t._MeasureOption={}));ct=t._MeasureOption;g=function(){function n(n){this._rect=n}return Object.defineProperty(n.prototype,"rect",{get:function(){return this._rect},enumerable:!0,configurable:!0}),n.prototype.contains=function(n){var t=this._rect;return n.x>=t.left&&n.x<=t.right&&n.y>=t.top&&n.y<=t.bottom},n.prototype.pointDistance=function(n,t,i){var r=t.x-n.x,u=t.y-n.y;return i==ct.X?Math.abs(r):i==ct.Y?Math.abs(u):Math.sqrt(r*r+u*u)},n.prototype.distance=function(n){var r=ct.XY,t;return n.x===null?r=ct.Y:n.y===null&&(r=ct.X),t=this._rect,n.x<t.left?n.y<t.top?this.pointDistance(n,new i.Point(t.left,t.top),r):n.y>t.bottom?this.pointDistance(n,new i.Point(t.left,t.bottom),r):r==ct.Y?0:t.left-n.x:n.x>t.right?n.y<t.top?this.pointDistance(n,new i.Point(t.right,t.top),r):n.y>t.bottom?this.pointDistance(n,new i.Point(t.right,t.bottom),r):r==ct.Y?0:n.x-t.right:r==ct.X?0:n.y<t.top?t.top-n.y:n.y>t.bottom?n.y-t.bottom:0},n}();t._RectArea=g;pt=function(){function n(n,t){this._center=n;this.setRadius(t)}return n.prototype.setRadius=function(n){this._rad=n;this._rad2=n*n},Object.defineProperty(n.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),n.prototype.contains=function(n){var t=this._center.x-n.x,i=this._center.y-n.y;return t*t+i*i<=this._rad2},n.prototype.distance=function(n){var t=isNaN(n.x)?0:this._center.x-n.x,i=isNaN(n.y)?0:this._center.y-n.y,r=t*t+i*i;return r<=this._rad2?0:Math.sqrt(r)-this._rad},n}();t._CircleArea=pt;lt=function(){function n(n,t){this._x=[];this._y=[];this._x=n;this._y=t}return n.prototype.contains=function(){return!1},n.prototype.distance=function(n){for(var f,r=NaN,t=0;t<this._x.length-1;t++)f=u._dist(n,new i.Point(this._x[t],this._y[t]),new i.Point(this._x[t+1],this._y[t+1])),(isNaN(r)||f<r)&&(r=f);return r},n}();t._LinesArea=lt;ci=function(){function n(){}return n}();t._HitResult=ci;fr=function(){function n(n){this._map={};this._chart=n}return n.prototype.add=function(n,t){this._map[t]&&(n.tag||(n.tag=new p(t,NaN,NaN,NaN)),this._map[t].push(n))},n.prototype.clear=function(){var t,n;for(this._map={},t=this._chart.series,n=0;n<t.length;n++)t[n].hitTest===a.prototype.hitTest&&(this._map[n]=[])},n.prototype.hitTest=function(n,t){var u,f,l,e,o,c,s;t===void 0&&(t=!1);var h=null,r=Number.MAX_VALUE,a=this._chart.series;for(u=a.length-1;u>=0;u--)if(f=this._map[u],f){for(l=f.length,e=l-1;e>=0;e--)if((o=f[e],!i.tryCast(o,lt)||t)&&(c=o.distance(n),c<r&&(r=c,h=o,r==0)))break;if(r==0)break}return h?(s=new ci,s.area=h,s.distance=r,s):null},n.prototype.hitTestSeries=function(n,t){var f=null,i=Number.MAX_VALUE,e=this._map[t],h,r,o,s,u;if(e)for(h=e.length,r=h-1;r>=0;r--)if(o=e[r],s=o.distance(n),s<i&&(i=s,f=o,i==0))break;return f?(u=new ci,u.area=f,u.distance=i,u):null},n}();t._HitTester=fr;ft=function(){function n(){this._DEFAULT_WIDTH=2;this._DEFAULT_SYM_SIZE=10;this.clipping=!0}return n.prototype.clear=function(){this.seriesCount=0;this.seriesIndex=0},n.prototype._renderLabels=function(n,t,r,u,f){var l=r.length,e=u.dataLabel,a=e.border,o=e.offset,v=e.connectingLine,s,h,c;for(o===undefined&&(o=v?16:0),a&&(o-=2),s=0;s<l;s++)h=r[s],c=i.asType(h.tag,p,!0),c&&this._renderLabel(n,h,c,u,e,t,o,f)},n.prototype._renderLabel=function(n,t,i,r,u,f,e,o){var y=u.position,p=u.border,w=u.connectingLine,l=new b(r,s),h,s,c,a,v;(l._setDataPoint(i),h=r._getLabelContent(l,u.content),s=this._getLabelPoint(f,i),this._getPointAndPosition(s,y,t,r),r._plotRect.contains(s))&&(c=new ir(n,l,s,h),u.onRendering(c)||(h=c.text,s=c.point,a=this._renderLabelAndBorder(n,h,y,e,s,w,2,p),a&&(v=new g(a),v.tag=i,o.push(v))))},n.prototype._getPointAndPosition=function(n,t,i,r){if(i instanceof g){var u=i;r._isRotated()?n.y=u.rect.top+.5*u.rect.height:n.x=u.rect.left+.5*u.rect.width}},n.prototype._getLabelPoint=function(n,t){var r=n._getAxisX(),u=n._getAxisY();return new i.Point(r.convert(t.dataX),u.convert(t.dataY))},n.prototype._renderLabelAndBorder=function(n,t,i,r,f,e,o,s){var h,c='wj-data-label',l='wj-data-label-line';switch(i){case rt.Top:e&&n.drawLine(f.x,f.y,f.x,f.y-r,l);f.y-=o+r;h=u._renderText(n,t,f,1,2,c);break;case rt.Bottom:e&&n.drawLine(f.x,f.y,f.x,f.y+r,l);f.y+=o+r;h=u._renderText(n,t,f,1,0,c);break;case rt.Left:e&&n.drawLine(f.x,f.y,f.x-r,f.y,l);f.x-=o+r;h=u._renderText(n,t,f,2,1,c);break;case rt.Right:e&&n.drawLine(f.x,f.y,f.x+r,f.y,l);f.x+=o+r;h=u._renderText(n,t,f,0,1,c);break;case rt.Center:h=u._renderText(n,t,f,1,1,c)}return s&&h&&n.drawRect(h.left-o,h.top-o,h.width+2*o,h.height+2*o,'wj-data-label-border'),h},n.prototype.getNumOption=function(n,t){var r=this.chart.options;return(t&&(r=r?r[t]:null),r&&r[n])?i.asNumber(r[n],!0):undefined},n.cloneStyle=function(n,t){var r,i;if(!n)return n;r={};for(i in n)t&&t.indexOf(i)>=0||(r[i]=n[i]);return r},n.prototype.isValid=function(n,t){return h.isValid(n)&&h.isValid(t)&&u._contains(this.chart._plotRect,new i.Point(n,t))},n.prototype.load=function(){},n.prototype.unload=function(){},n}();t._BasePlotter=ft;li=function(n){function t(){n.apply(this,arguments);this.origin=0;this.width=.7;this.isVolume=!1;this._volHelper=null;this.stackPosMap={};this.stackNegMap={};this.stacking=w.None}return __extends(t,n),t.prototype.clear=function(){n.prototype.clear.call(this);this.stackNegMap[this.chart.axisY._uniqueId]={};this.stackPosMap[this.chart.axisY._uniqueId]={};this._volHelper=null},t.prototype.load=function(){var t,f,u,s,l,r,h,o,a,v,c;if(n.prototype.load.call(this),this.isVolume)for(a=null,v=null,r=0;r<this.chart.series.length;r++){if(t=this.chart.series[r],l=t.getDataType(1)||t.chart._xDataType,f=t._getAxisX(),u=t._getChartType(),u=u===null||i.isUndefined(u)?this.chart._getChartType():u,s=u===e.Column?t._getBindingValues(1):u===e.Candlestick?t._getBindingValues(4):null,l===i.DataType.Date)for(h=[],o=[],r=0;r<t._getLength();r++)c=t._getItem(r)[t.bindingX].valueOf(),h.push(c),o.push({value:c,text:i.Globalize.format(new Date(c),f.format||"d")});else h=this.dataInfo.getXVals();if(a=this.dataInfo.getMinX(),v=this.dataInfo.getMaxX(),s&&s.length>0){this._volHelper=new vi(s,h,a,v,l);f._customConvert=this._volHelper.convert.bind(this._volHelper);f._customConvertBack=this._volHelper.convertBack.bind(this._volHelper);o&&o.length>0&&(this._itemsSource=f.itemsSource=o);break}}},t.prototype.unload=function(){var r,t,i;for(n.prototype.unload.call(this),i=0;i<this.chart.series.length;i++)r=this.chart.series[i],t=r._getAxisX(),t&&(t._customConvert=null,t._customConvertBack=null,t.itemsSource&&t.itemsSource==this._itemsSource&&(this._itemsSource=t.itemsSource=null))},t.prototype.adjustLimits=function(n){this.dataInfo=n;var f=n.getMinX(),t=n.getMinY(),o=n.getMaxX(),r=n.getMaxY(),u=n.getDeltaX();return u<=0&&(u=1),this.isVolume&&(this.chart._getChartType()===e.Column||this.chart._getChartType()===e.Candlestick)?this.load():this.unload(),this.rotated?(this.chart.axisY.logBase||(this.origin>r?r=this.origin:this.origin<t&&(t=this.origin)),new i.Rect(t,f-.5*u,r-t,o-f+u)):(this.chart.axisY.logBase||(this.origin>r?r=this.origin:this.origin<t&&(t=this.origin)),new i.Rect(f-.5*u,t,o-f+u,r-t))},t.prototype.plotSeries=function(n,t,r,u,f,e,o,s){var vt=[],ot=this.chart.series.indexOf(u),lt=i.asType(u,tt),gi=this.chart.options,ft=this.width,et=0,ri,yt,ut,ci,oi,wi,a,l,v,y,k,b,pi,nt,it,d,si,c,ii,rt,di,ht;e=e||0;o=o||1;gi&&gi.groupWidth&&(ri=gi.groupWidth,i.isNumber(ri)?(ut=i.asNumber(ri),isFinite(ut)&&ut>0&&(et=ut,ft=1)):i.isString(ri)&&(yt=i.asString(ri),yt&&yt.indexOf('%')>=0?(yt=yt.replace('%',''),ut=parseFloat(yt),isFinite(ut)&&(ut<0?ut=0:ut>100&&(ut=100),et=0,ft=ut/100)):(ut=parseFloat(yt),isFinite(ut)&&ut>0&&(et=ut,ft=1))));var ui=ft/o,nr=lt._getAxisY()._uniqueId,bt=this.stackNegMap[nr],kt=this.stackPosMap[nr],hi=u.getValues(0),ct=u.getValues(1);if(hi){ct||(ct=this.dataInfo.getXVals());ct&&(ci=this.dataInfo.getDeltaX(),ci>0&&(ft*=ci,ui*=ci));var pt=lt._getSymbolFill(ot),dt=lt._getAltSymbolFill(ot)||pt,wt=lt._getSymbolStroke(ot),gt=lt._getAltSymbolStroke(ot)||wt,ni=hi.length;ct!=null&&(ni=Math.min(ni,ct.length));var st=this.origin,at=0,li,ai,fi=this.stacking!=w.None,ei=this.stacking==w.Stacked100pc;if(lt._getChartType()!==undefined&&(fi=ei=!1),this.rotated){st<t.actualMin?st=t.actualMin:st>t.actualMax&&(st=t.actualMax);lt._isCustomAxisY()&&(fi=ei=!1);var ti=t.convert(st),bi=r.actualMin,ki=r.actualMax;for(a=0;a<ni;a++)if(l=ct?ct[a]:a,v=hi[a],this._getSymbolOrigin&&(ti=r.convert(this._getSymbolOrigin(st,a))),this._getSymbolStyles&&(y=this._getSymbolStyles(a),pt=y&&y.fill?y.fill:pt,dt=y&&y.fill?y.fill:dt,wt=y&&y.stroke?y.fill:wt,gt=y&&y.stroke?y.fill:gt),li=v>0?pt:dt,ai=v>0?wt:gt,n.fill=li,n.stroke=ai,h.isValid(l)&&h.isValid(v))if(fi){if(it=l-.5*ft,d=l+.5*ft,it<bi&&d<bi||it>ki&&d>ki)continue;it=r.convert(it);d=r.convert(d);ei&&(pi=this.dataInfo.getStackedAbsSum(l),v=v/pi);nt=0;v>0?(nt=isNaN(kt[l])?0:kt[l],k=t.convert(nt),b=t.convert(nt+v),kt[l]=nt+v):(nt=isNaN(bt[l])?0:bt[l],k=t.convert(nt),b=t.convert(nt+v),bt[l]=nt+v);s&&vt.push(new i.Point(b,r.convert(l)));c=new i.Rect(Math.min(k,b),Math.min(it,d),Math.abs(b-k),Math.abs(d-it));et>0&&(rt=1-et/c.height,rt<0&&(rt=0),di=c.top+.5*c.height,c.top+=(di-c.top)*rt,c.height=Math.min(et,c.height));ht=new g(c);this.drawSymbol(n,c,u,a,new i.Point(b,c.top+.5*c.height));u._setPointIndex(a,at);at++;ht.tag=new p(ot,a,nt+v,l);this.hitTester.add(ht,ot)}else{if(it=l-.5*ft+e*ui,d=l-.5*ft+(e+1)*ui,it<bi&&d<bi||it>ki&&d>ki)continue;it=r.convert(it);d=r.convert(d);si=t.convert(v);c=new i.Rect(Math.min(si,ti),Math.min(it,d),Math.abs(ti-si),Math.abs(d-it));s&&vt.push(new i.Point(si,(it+d)/2));et>0&&(ii=et/o,rt=1-ii/c.height,rt<0&&(rt=0),di=r.convert(l),c.top+=(di-c.top)*rt,c.height=Math.min(ii,c.height));ht=new g(c);this.drawSymbol(n,c,u,a,new i.Point(si,c.top+.5*c.height));u._setPointIndex(a,at);at++;ht.tag=new p(ot,a,v,l);this.hitTester.add(ht,ot)}}else{st<r.actualMin?st=r.actualMin:st>r.actualMax&&(st=r.actualMax);var ti=r.convert(st),vi=t.actualMin,yi=t.actualMax;for(lt._isCustomAxisY()&&(fi=ei=!1),a=0;a<ni;a++)if(l=ct?ct[a]:a,v=hi[a],this._getSymbolOrigin&&(ti=r.convert(this._getSymbolOrigin(st,a,ni))),this._getSymbolStyles&&(y=this._getSymbolStyles(a,ni),pt=y&&y.fill?y.fill:pt,dt=y&&y.fill?y.fill:dt,wt=y&&y.stroke?y.stroke:wt,gt=y&&y.stroke?y.stroke:gt),li=v>0?pt:dt,ai=v>0?wt:gt,n.fill=li,n.stroke=ai,h.isValid(l)&&h.isValid(v))if(fi){if(k=l-.5*ft,b=l+.5*ft,k<vi&&b<vi||k>yi&&b>yi)continue;if(k=t.convert(k),b=t.convert(b),!h.isValid(k)||!h.isValid(b))continue;ei&&(pi=this.dataInfo.getStackedAbsSum(l),v=v/pi);nt=0;v>0?(nt=isNaN(kt[l])?0:kt[l],it=r.convert(nt),d=r.convert(nt+v),kt[l]=nt+v):(nt=isNaN(bt[l])?0:bt[l],it=r.convert(nt),d=r.convert(nt+v),bt[l]=nt+v);s&&vt.push(new i.Point(t.convert(l),d));c=new i.Rect(Math.min(k,b),Math.min(it,d),Math.abs(b-k),Math.abs(d-it));et>0&&(rt=1-et/c.width,rt<0&&(rt=0),wi=c.left+.5*c.width,c.left+=(wi-c.left)*rt,c.width=Math.min(et,c.width));ht=new g(c);this.drawSymbol(n,c,u,a,new i.Point(c.left+.5*c.width,d));u._setPointIndex(a,at);at++;ht.tag=new p(ot,a,l,nt+v);this.hitTester.add(ht,ot)}else{if(k=l-.5*ft+e*ui,b=l-.5*ft+(e+1)*ui,k<vi&&b<vi||k>yi&&b>yi)continue;if(k=t.convert(k),b=t.convert(b),!h.isValid(k)||!h.isValid(b))continue;oi=r.convert(v);c=new i.Rect(Math.min(k,b),Math.min(oi,ti),Math.abs(b-k),Math.abs(ti-oi));s&&vt.push(new i.Point((k+b)/2,oi));et>0&&(ii=et/o,rt=1-ii/c.width,rt<0&&(rt=0),wi=t.convert(l),c.left+=(wi-c.left)*rt,c.width=Math.min(ii,c.width));ht=new g(c);this.drawSymbol(n,c,u,a,new i.Point(c.left+.5*c.width,oi));u._setPointIndex(a,at);at++;ht.tag=new p(ot,a,l,v);this.hitTester.add(ht,ot)}}s&&vt&&vt.length&&s(vt)}},t.prototype.drawSymbol=function(n,t,i,r,u){var e=this,f;this.chart.itemFormatter?(n.startGroup(),f=new b(this.chart,u,c.SeriesSymbol),f._setData(i,r),this.chart.itemFormatter(n,f,function(){e.drawDefaultSymbol(n,t,i)}),n.endGroup()):this.drawDefaultSymbol(n,t,i)},t.prototype.drawDefaultSymbol=function(n,t,i){n.drawRect(t.left,t.top,t.width,t.height,null,i.symbolStyle)},t}(ft);t._BarPlotter=li;ai=function(n){function t(){n.call(this);this.hasSymbols=!1;this.hasLines=!0;this.isSpline=!1;this.stacking=w.None;this.stackPos={};this.stackNeg={};this.clipping=!1}return __extends(t,n),t.prototype.clear=function(){n.prototype.clear.call(this);this.stackNeg={};this.stackPos={}},t.prototype.adjustLimits=function(n){var f;this.dataInfo=n;var r=n.getMinX(),t=n.getMinY(),e=n.getMaxX(),u=n.getMaxY();return this.isSpline&&!this.chart.axisY.logBase&&(f=.1*(u-t),t-=f,u+=f),this.rotated?new i.Rect(t,r,u-t,e-r):new i.Rect(r,t,e-r,u-t)},t.prototype.plotSeries=function(n,t,r,u,f,e,o,s){var ot=[],y=i.asType(u,tt),v=this.chart.series.indexOf(u),ut=u.getValues(0),nt=u.getValues(1),et,ct,ii,at,kt,ri,dt,rt,b,g,vt,c,l,a;if(ut){nt||(nt=this.dataInfo.getXVals());var yt=ft.cloneStyle(u.style,['fill']),it=ut.length,gt=!0;nt?it=Math.min(it,nt.length):(gt=!1,nt=new Array(it));var ui=this._DEFAULT_WIDTH,st=y._getSymbolFill(v),fi=y._getAltSymbolFill(v)||st,wt=y._getSymbolStroke(v),ei=y._getAltSymbolStroke(v)||wt,bt=y._getSymbolSize();n.stroke=wt;n.strokeWidth=ui;n.fill=st;var k=[],d=[],ht=[],oi=this.rotated,ni=this.stacking!=w.None&&!y._isCustomAxisY(),ti=this.stacking==w.Stacked100pc&&!y._isCustomAxisY();for(y._getChartType()!==undefined&&(ni=ti=!1),et=this.chart.interpolateNulls,ct=!1,c=0;c<it;c++)l=gt?nt[c]:c,a=ut[c],h.isValid(l)&&h.isValid(a)?(ni&&(ti&&(ii=this.dataInfo.getStackedAbsSum(l),a=a/ii),a>=0?(at=isNaN(this.stackPos[l])?0:this.stackPos[l],a=this.stackPos[l]=at+a):(at=isNaN(this.stackNeg[l])?0:this.stackNeg[l],a=this.stackNeg[l]=at+a)),oi?(kt=new p(v,c,a,l),ri=t.convert(a),a=r.convert(l),l=ri):(kt=new p(v,c,l,a),l=t.convert(l),a=r.convert(a)),isNaN(l)||isNaN(a)?(ct=!0,et!==!0&&(k.push(undefined),d.push(undefined)),ht.push(!0)):(k.push(l),d.push(a),ht.push(!1),s&&ot.push(new i.Point(l,a)),dt=new pt(new i.Point(l,a),.5*bt),dt.tag=kt,this.hitTester.add(dt,v))):(ct=!0,et!==!0&&(k.push(undefined),d.push(undefined)),ht.push(!0));if(rt=0,this.hasLines)if(n.fill=null,ct&&et!==!0){for(b=[],g=[],c=0;c<it;c++)k[c]===undefined?(b.length>1&&(this._drawLines(n,b,g,null,yt,this.chart._plotrectId),this.hitTester.add(new lt(b,g),v),rt++),b=[],g=[]):(b.push(k[c]),g.push(d[c]));b.length>1&&(this._drawLines(n,b,g,null,yt,this.chart._plotrectId),this.hitTester.add(new lt(b,g),v),rt++)}else this._drawLines(n,k,d,null,yt,this.chart._plotrectId),this.hitTester.add(new lt(k,d),v),rt++;if((this.hasSymbols||this.chart.itemFormatter)&&bt>0)for(n.fill=st,vt=0,c=0;c<it;c++)et&&ht[c]||(l=k[vt],a=d[vt],this.hasLines===!1&&(n.fill=ut[c]>0?st:fi,n.stroke=ut[c]>0?wt:ei),this.isValid(l,a,t,r)&&(this._drawSymbol(n,l,a,bt,y,c),u._setPointIndex(c,rt),rt++),vt++);s&&ot&&ot.length&&s(ot)}},t.prototype._drawLines=function(n,t,i,r,u,f){this.isSpline?n.drawSplines(t,i,r,u,f):n.drawLines(t,i,r,u,f)},t.prototype._drawSymbol=function(n,t,r,u,f,e){var s=this,o;this.chart.itemFormatter?(n.startGroup(),o=new b(this.chart,new i.Point(t,r),c.SeriesSymbol),o._setData(f,e),this.chart.itemFormatter(n,o,function(){s.hasSymbols&&s._drawDefaultSymbol(n,t,r,u,f.symbolMarker,f.symbolStyle)}),n.endGroup()):this._drawDefaultSymbol(n,t,r,u,f.symbolMarker,f.symbolStyle)},t.prototype._drawDefaultSymbol=function(n,t,i,r,u,f){u==yt.Dot?n.drawEllipse(t,i,.5*r,.5*r,null,f):u==yt.Box&&n.drawRect(t-.5*r,i-.5*r,r,r,null,f)},t}(ft);t._LinePlotter=ai;er=function(n){function t(){n.call(this);this.stacking=w.None;this.isSpline=!1;this.stackPos={};this.stackNeg={}}return __extends(t,n),t.prototype.adjustLimits=function(n){var f;this.dataInfo=n;var r=n.getMinX(),t=n.getMinY(),e=n.getMaxX(),u=n.getMaxY();return this.isSpline&&(f=.1*(u-t),this.chart.axisY.logBase||(t-=f),u+=f),this.rotated?new i.Rect(t,r,u-t,e-r):new i.Rect(r,t,e-r,u-t)},t.prototype.clear=function(){n.prototype.clear.call(this);this.stackNeg={};this.stackPos={}},t.prototype.plotSeries=function(n,t,r,f,e,o,s,c){var wt=[],tt=this.chart.series.indexOf(f),dt=f,gt=f.getValues(0),et=f.getValues(1),ot,ni,y,d,g,hi,nt,it,at,l,b,k,rt,ei;if(gt&&(ot=gt.length,ot)){et||(et=this.dataInfo.getXVals());ni=!0;et?et.length<ot&&(ot=et.length):(ni=!1,et=new Array(ot));var a=[],v=[],st=[],ht=[],ut=this.stacking!=w.None&&!dt._isCustomAxisY(),oi=this.stacking==w.Stacked100pc&&!dt._isCustomAxisY();dt._getChartType()!==undefined&&(ut=oi=!1);var ct=this.rotated,bt=!1,kt=this.chart.interpolateNulls,vt=null,yt=null,si=this.chart._plotRect;for(k=0;k<ot;k++)y=ni?et[k]:k,d=gt[k],(vt===null||y>vt)&&(vt=y),(yt===null||y<yt)&&(yt=y),h.isValid(y)&&h.isValid(d)?(g=ct?r.convert(y):t.convert(y),ut&&(oi&&(hi=this.dataInfo.getStackedAbsSum(y),d=d/hi),nt=0,d>=0?(nt=isNaN(this.stackPos[y])?0:this.stackPos[y],d=this.stackPos[y]=nt+d):(nt=isNaN(this.stackNeg[y])?0:this.stackNeg[y],d=this.stackNeg[y]=nt+d),ct?(nt<t.actualMin&&(nt=t.actualMin),st.push(t.convert(nt)),ht.push(g)):(st.push(g),nt<r.actualMin&&(nt=r.actualMin),ht.push(r.convert(nt)))),ct?(it=t.convert(d),isNaN(g)||isNaN(it)?(bt=!0,ut||kt===!0||(a.push(undefined),v.push(undefined))):(a.push(it),v.push(g),u._contains(si,new i.Point(it,g))&&(at=new pt(new i.Point(it,g),this._DEFAULT_SYM_SIZE),at.tag=new p(tt,k,d,y),this.hitTester.add(at,tt)))):(it=r.convert(d),isNaN(g)||isNaN(it)?(bt=!0,ut||kt===!0||(a.push(undefined),v.push(undefined))):(a.push(g),v.push(it),u._contains(si,new i.Point(g,it))&&(at=new pt(new i.Point(g,it),this._DEFAULT_SYM_SIZE),at.tag=new p(tt,k,y,d),this.hitTester.add(at,tt))))):(bt=!0,ut||kt===!0||(a.push(undefined),v.push(undefined)));c&&a.forEach(function(n,t){n!=null&&wt.push(new i.Point(n,v[t]))});var ti=this._DEFAULT_WIDTH,ii=e._getColorLight(tt),ri=e._getColor(tt),ui=ft.cloneStyle(f.style,['fill']),fi=ft.cloneStyle(f.style,['stroke']);if(!ut&&kt!==!0&&bt){for(l=[],b=[],k=0;k<ot;k++)a[k]===undefined?(l.length>1&&(this.isSpline&&(rt=this._convertToSpline(l,b),l=rt.xs,b=rt.ys),n.stroke=ri,n.strokeWidth=ti,n.fill='none',n.drawLines(l,b,null,ui),this.hitTester.add(new lt(l,b),tt),ct?(l.push(t.convert(t.actualMin),t.convert(t.actualMin)),b.push(r.convert(r.actualMax),r.convert(r.actualMin))):(l.push(l[l.length-1],l[0]),b.push(r.convert(r.actualMin),r.convert(r.actualMin))),n.fill=ii,n.stroke='none',n.drawPolygon(l,b,null,fi)),l=[],b=[]):(l.push(a[k]),b.push(v[k]));l.length>1&&(this.isSpline&&(rt=this._convertToSpline(l,b),l=rt.xs,b=rt.ys),n.stroke=ri,n.strokeWidth=ti,n.fill='none',n.drawLines(l,b,null,ui),this.hitTester.add(new lt(l,b),tt),ct?(l.push(t.convert(t.actualMin),t.convert(t.actualMin)),b.push(r.convert(r.actualMax),r.convert(r.actualMin))):(l.push(l[l.length-1],l[0]),b.push(r.convert(r.actualMin),r.convert(r.actualMin))),n.fill=ii,n.stroke='none',n.drawPolygon(l,b,null,fi))}else this.isSpline&&(rt=this._convertToSpline(a,v),a=rt.xs,v=rt.ys),ut?(this.isSpline&&(ei=this._convertToSpline(st,ht),st=ei.xs,ht=ei.ys),a=a.concat(st.reverse()),v=v.concat(ht.reverse())):ct?(a.push(t.convert(t.actualMin),t.convert(t.actualMin)),v.push(r.convert(vt),r.convert(yt))):(a.push(t.convert(vt),t.convert(yt)),v.push(r.convert(r.actualMin),r.convert(r.actualMin))),n.fill=ii,n.stroke='none',n.drawPolygon(a,v,null,fi),ut?(a=a.slice(0,a.length-st.length),v=v.slice(0,v.length-ht.length)):(a=a.slice(0,a.length-2),v=v.slice(0,v.length-2)),n.stroke=ri,n.strokeWidth=ti,n.fill='none',n.drawLines(a,v,null,ui),this.hitTester.add(new lt(a,v),tt);this._drawSymbols(n,f,tt);c&&wt&&wt.length&&c(wt)}},t.prototype._convertToSpline=function(n,t){if(n&&t){var r=new ei(n,t),i=r.calculate();return{xs:i.xs,ys:i.ys}}return{xs:n,ys:t}},t.prototype._drawSymbols=function(n,t,r){var e,u,f,s,o;if(this.chart.itemFormatter!=null)for(e=this.hitTester._map[r],u=0;u<e.length;u++)f=i.tryCast(e[u],pt),f&&(s=f.tag,n.startGroup(),o=new b(this.chart,f.center,c.SeriesSymbol),o._setDataPoint(s),this.chart.itemFormatter(n,o,function(){}),n.endGroup())},t}(ft);t._AreaPlotter=er;or=function(n){function t(){n.call(this);this._MIN_SIZE=5;this._MAX_SIZE=30;this.hasLines=!1;this.hasSymbols=!0;this.clipping=!0}return __extends(t,n),t.prototype.adjustLimits=function(t,i){var v=this.getNumOption('minSize','bubble'),c,s,p,r,w,u,b,l,k,a;this._minSize=v?v:this._MIN_SIZE;c=this.getNumOption('maxSize','bubble');this._maxSize=c?c:this._MAX_SIZE;var y=this.chart.series,d=y.length,e=NaN,o=NaN;for(s=0;s<d;s++)if(p=y[s],r=p._getBindingValues(1),r)for(w=r.length,u=0;u<w;u++)h.isValid(r[u])&&((isNaN(e)||r[u]<e)&&(e=r[u]),(isNaN(o)||r[u]>o)&&(o=r[u]));this._minValue=e;this._maxValue=o;var f=n.prototype.adjustLimits.call(this,t,i),g=this.chart.axisX,nt=this.chart.axisY;return g.logBase<=0&&(b=i.width-this._maxSize,l=b/f.width,f.left-=this._maxSize*.5/l,f.width+=this._maxSize/l),nt.logBase<=0&&(k=i.height-this._maxSize,a=k/f.height,f.top-=this._maxSize*.5/a,f.height+=this._maxSize/a),f},t.prototype._drawSymbol=function(n,t,r,u,f,e){var nt=this,a,v,y,p,u,d,w,o,g,s,l,k;if(this._minSize==null&&(a=this.getNumOption('minSize','bubble'),this._minSize=a?a:this._MIN_SIZE),this._maxSize==null&&(v=this.getNumOption('maxSize','bubble'),this._maxSize=v?v:this._MAX_SIZE),y=f._getItem(e),y&&(p=f._getBinding(1),p&&(u=y[p],h.isValid(u)&&(d=this._minValue==this._maxValue?1:Math.sqrt((u-this._minValue)/(this._maxValue-this._minValue)),u=this._minSize+(this._maxSize-this._minSize)*d,this.chart.itemFormatter?(w=new b(this.chart,new i.Point(t,r),c.SeriesSymbol),w._setData(f,e),n.startGroup(),this.chart.itemFormatter(n,w,function(){nt._drawDefaultSymbol(n,t,r,u,f.symbolMarker,f.symbolStyle)}),n.endGroup()):this._drawDefaultSymbol(n,t,r,u,f.symbolMarker,f.symbolStyle),o=this.hitTester._map[this.chart.series.indexOf(f)],o!=null))))for(g=o.length,s=g-1;s>=0;s--)l=o[s],l.tag&&l.tag.pointIndex==e&&(k=i.tryCast(l,pt),k&&k.setRadius(.5*u))},t}(ai);t._BubblePlotter=or;sr=function(n){function t(){n.apply(this,arguments);this.isCandle=!0;this.isArms=!1;this.isEqui=!1;this.isVolume=!1;this._volHelper=null;this._symWidth=.7}return __extends(t,n),t.prototype.clear=function(){n.prototype.clear.call(this);this._volHelper=null},t.prototype.load=function(){var t,f,u,s,l,r,h,o,a,v,c;if(n.prototype.load.call(this),this.isVolume)for(a=null,v=null,r=0;r<this.chart.series.length;r++){if(t=this.chart.series[r],l=t.getDataType(1)||t.chart._xDataType,f=t._getAxisX(),u=t._getChartType(),u=u===null||i.isUndefined(u)?this.chart._getChartType():u,s=u===e.Column?t._getBindingValues(1):u===e.Candlestick?t._getBindingValues(4):null,l===i.DataType.Date)for(h=[],o=[],r=0;r<t._getLength();r++)c=t._getItem(r)[t.bindingX].valueOf(),h.push(c),o.push({value:c,text:i.Globalize.format(new Date(c),f.format||"d")});else h=this.dataInfo.getXVals();if(a=this.dataInfo.getMinX(),v=this.dataInfo.getMaxX(),s&&s.length>0){this._volHelper=new vi(s,h,a,v,l);f._customConvert=this._volHelper.convert.bind(this._volHelper);f._customConvertBack=this._volHelper.convertBack.bind(this._volHelper);o&&o.length>0&&(this._itemsSource=f.itemsSource=o);break}}},t.prototype.unload=function(){var r,t,i;for(n.prototype.unload.call(this),i=0;i<this.chart.series.length;i++)r=this.chart.series[i],t=r._getAxisX(),t&&(t._customConvert=null,t._customConvertBack=null,t.itemsSource&&t.itemsSource==this._itemsSource&&(this._itemsSource=t.itemsSource=null))},t.prototype.parseSymbolWidth=function(n){var u,r,t;this._isPixel=undefined;n&&(i.isNumber(n)?(u=i.asNumber(n),isFinite(u)&&u>0&&(this._symWidth=u,this._isPixel=!0)):i.isString(n)&&(r=i.asString(n),r&&r.indexOf('%')>=0?(r=r.replace('%',''),t=parseFloat(r),isFinite(t)&&(t<0?t=0:t>100&&(t=100),this._symWidth=t/100,this._isPixel=!1)):(t=parseFloat(n),isFinite(t)&&t>0&&(this._symWidth=t,this._isPixel=!0))))},t.prototype.adjustLimits=function(n){var v,r,s,y,c,it,o,l,p;this.dataInfo=n;var u=n.getMinX(),t=n.getMinY(),w=n.getMaxX(),f=n.getMaxY(),a=n.getDeltaX(),rt=this.chart._xDataType;a<=0&&(a=1);var b=this.chart.series,ut=b.length,k=0;for(this.parseSymbolWidth(this.symbolWidth),this.isVolume&&(this.chart._getChartType()===e.Column||this.chart._getChartType()===e.Candlestick)?this.load():this.unload(),v=0;v<ut;v++)if(r=b[v],!r._isCustomAxisY()){var d=r._getBinding(1),g=r._getBinding(2),nt=r._getBinding(3),tt=r._getLength();if(tt)for(s=r._getSymbolSize(),s>k&&(k=s),y=0;y<tt;y++)c=r._getItem(y),c&&(it=[d?c[d]:null,g?c[g]:null,nt?c[nt]:null],it.forEach(function(n){h.isValid(n)&&n!==null&&((isNaN(t)||n<t)&&(t=n),(isNaN(f)||n>f)&&(f=n))}))}return o=w-u,l=this.chart._plotRect,l&&l.width&&!this.isVolume&&(s+=2,p=l.width/(l.width-s)*o,u=u-.5*(p-o),o=p),rt===i.DataType.Date&&this.isVolume&&(this.chart._getChartType()===e.Column||this.chart._getChartType()===e.Candlestick)?new i.Rect(u-.5*a,t,w-u+a,f-t):this.chart._isRotated()?new i.Rect(t,u,f-t,o):new i.Rect(u,t,o,f-t)},t.prototype.plotSeries=function(n,t,r,u){var bt=this,e=i.asType(u,tt),v=this.chart.series.indexOf(u),nt=u.getValues(0),l=u.getValues(1),st=this._symWidth,ht=this.chart._isRotated(),it,y,rt,f,a,ot;if(nt){l||(l=this.dataInfo.getXVals());l&&(it=this.dataInfo.getDeltaX(),it>0&&this._isPixel===!1&&(st*=it));y=nt.length;rt=!0;l?y=Math.min(y,l.length):(rt=!1,l=new Array(y));var kt=this._DEFAULT_WIDTH,ut=e._getSymbolFill(v),ct=e._getAltSymbolFill(v)||"transparent",k=e._getSymbolStroke(v),lt=e._getAltSymbolStroke(v)||k,at=this._isPixel===undefined?e._getSymbolSize():st;n.stroke=k;n.strokeWidth=kt;n.fill=ut;var vt=e._getBinding(1),yt=e._getBinding(2),s=e._getBinding(3),dt=ht?r.actualMin:t.actualMin,gt=ht?r.actualMax:t.actualMax,pt=0,p,ft,o=null,w=null;for(f=0;f<y;f++)if(o=e._getItem(f),o){if(a=rt?l[f]:f,h.isValid(a)&&dt<=a&&a<=gt){var et=nt[f],wt=vt?o[vt]:null,d=yt?o[yt]:null,g=s?o[s]:null;n.startGroup();this.isEqui&&w!==null?w[s]!==o[s]&&(p=w[s]<o[s]?ct:ut,ft=w[s]<o[s]?lt:k):(p=d<g?ct:ut,ft=d<g?lt:k);n.fill=p;n.stroke=ft;this.chart.itemFormatter?(ot=new b(this.chart,new i.Point(t.convert(a),r.convert(et)),c.SeriesSymbol),ot._setData(e,f),this.chart.itemFormatter(n,ot,function(){bt._drawSymbol(n,t,r,v,f,p,at,a,et,wt,d,g)})):this._drawSymbol(n,t,r,v,f,p,at,a,et,wt,d,g);n.endGroup();u._setPointIndex(f,pt);pt++}w=o}}},t.prototype._drawSymbol=function(n,t,r,u,f,e,o,s,c,l,a,v){var tt=new p(u,f,s,c),d,y=null,b=null,w=null,k=null,nt=this.chart._isRotated(),it,rt;nt&&(it=r,r=t,t=it);this._isPixel===!1&&(w=t.convert(s-.5*o),k=t.convert(s+.5*o),w>k&&(rt=w,w=k,k=rt));s=t.convert(s);this._isPixel!==!1&&(w=s-.5*o,k=s+.5*o);this.isCandle?(h.isValid(a)&&h.isValid(v)&&(a=r.convert(a),v=r.convert(v),y=Math.min(a,v),b=y+Math.abs(a-v),nt?(n.drawRect(y,w,b-y,k-w),d=new g(new i.Rect(y,w,b-y,k-w))):(n.drawRect(w,y,k-w,b-y),d=new g(new i.Rect(w,y,k-w,b-y))),d.tag=tt,this.hitTester.add(d,u)),h.isValid(c)&&(c=r.convert(c),y!==null&&(nt?n.drawLine(b,s,c,s):n.drawLine(s,y,s,c))),h.isValid(l)&&(l=r.convert(l),b!==null&&(nt?n.drawLine(y,s,l,s):n.drawLine(s,b,s,l)))):this.isEqui?h.isValid(c)&&h.isValid(l)&&(c=r.convert(c),l=r.convert(l),y=Math.min(c,l),b=y+Math.abs(c-l),n.drawRect(w,y,k-w,b-y),d=new g(new i.Rect(w,y,k-w,b-y)),d.tag=tt,this.hitTester.add(d,u)):this.isArms?(h.isValid(a)&&h.isValid(v)&&(a=r.convert(a),v=r.convert(v),y=Math.min(a,v),b=y+Math.abs(a-v),n.drawRect(w,y,k-w,b-y)),h.isValid(c)&&y!==null&&(c=r.convert(c),n.drawLine(s,y,s,c)),h.isValid(l)&&b!==null&&(l=r.convert(l),n.drawLine(s,b,s,l)),h.isValid(c)&&h.isValid(l)&&(n.fill="transparent",y=Math.min(c,l),b=y+Math.abs(c-l),n.drawRect(w,y,k-w,b-y),d=new g(new i.Rect(w,y,k-w,b-y)),d.tag=tt,this.hitTester.add(d,u))):(h.isValid(c)&&h.isValid(l)&&(c=r.convert(c),l=r.convert(l),y=Math.min(c,l),b=y+Math.abs(c-l),nt?(n.drawLine(l,s,c,s),d=new g(new i.Rect(y,w,b-y,k-w))):(n.drawLine(s,l,s,c),d=new g(new i.Rect(w,y,k-w,b-y))),d.tag=tt,this.hitTester.add(d,u)),h.isValid(a)&&(a=r.convert(a),nt?n.drawLine(a,w,a,s):n.drawLine(w,a,s,a)),h.isValid(v)&&(v=r.convert(v),nt?n.drawLine(v,s,v,k):n.drawLine(s,v,k,v)))},t}(ft);t._FinancePlotter=sr;hr=function(n){function t(){n.apply(this,arguments);this.stacking=w.None}return __extends(t,n),t.prototype.adjustLimits=function(n){this.dataInfo=n;var t=n.getMinX(),r=n.getMinY(),u=n.getMaxX(),f=n.getMaxY();return this.rotated?new i.Rect(r,t,f-r,u-t):new i.Rect(t,r,u-t,f-r)},t.prototype.plotSeries=function(n,t,r,u){var at=this.chart.series.indexOf(u),d,yt,wt,kt,gt,ct,o,lt;if(!(at>0)){var g=i.asType(u,tt),w=this.chart.options,vt=u.getValues(0),nt=u.getValues(1),a=this.chart._plotRect,it=w&&w.funnel&&w.funnel.neckWidth!=null?w.funnel.neckWidth:.2,rt=w&&w.funnel&&w.funnel.neckHeight!=null?w.funnel.neckHeight:0,v=it*a.width,f=0,ii=0,ri=0,pt=0,ui,ot,y,c,b,s=a.left,e=a.top,l=a.width,fi=a.height;if(vt){for(v=v?v:1,nt||(nt=this.dataInfo.getXVals()),d=vt.length,nt!=null&&(d=Math.min(d,nt.length)),f=0;f<d;f++)ii+=vt[f];if(yt=0,w&&w.funnel&&w.funnel.type==='rectangle')for(rt=fi/d,it=l,f=0;f<d;f++){var dt=nt?nt[f]:f,k=vt[f],ut,ft=g._getSymbolFill(f),st=g._getAltSymbolFill(f)||ft,et=g._getSymbolStroke(f),ht=g._getAltSymbolStroke(f)||et;this._getSymbolStyles&&(o=this._getSymbolStyles(f,d),ft=o&&o.fill?o.fill:ft,st=o&&o.fill?o.fill:st,et=o&&o.stroke?o.stroke:et,ht=o&&o.stroke?o.stroke:ht);wt=k>0?ft:st;kt=k>0?et:ht;n.fill=wt;n.stroke=kt;h.isValid(dt)&&h.isValid(k)&&(gt||(gt=l/k),ct=gt*k,s=s+(it-ct)/2,n.drawRect(s,e,ct,rt),ut=new bt(new i.Point(s,e),ct,rt,ct,rt),e=e+rt,it=ct,ut.tag=new p(at,f,dt,k),this.hitTester.add(ut,at),u._setPointIndex(f,yt),yt++)}else for(ri=a.left+a.width*(1-it)/2,pt=a.top+a.height*(1-rt),ot=(1-it)*a.width/2/(a.height*(1-rt)),(isNaN(ot)||!isFinite(ot))&&(l=v,s=ri,e=pt),ui=a.width*it*a.height+a.width*(1-it)/2*a.height*(1-rt),f=0;f<d;f++){var dt=nt?nt[f]:f,k=vt[f],ni=[],ti=[],ut,ft=g._getSymbolFill(f),st=g._getAltSymbolFill(f)||ft,et=g._getSymbolStroke(f),ht=g._getAltSymbolStroke(f)||et;this._getSymbolStyles&&(o=this._getSymbolStyles(f,d),ft=o&&o.fill?o.fill:ft,st=o&&o.fill?o.fill:st,et=o&&o.stroke?o.stroke:et,ht=o&&o.stroke?o.stroke:ht);wt=k>0?ft:st;kt=k>0?et:ht;n.fill=wt;n.stroke=kt;h.isValid(dt)&&h.isValid(k)&&(lt=ui*k/ii,l>v?(c=this._getTrapezoidOffsetY(l,lt,ot),e+c<pt?(y=ot*c,ni=[s,s+y,s+l-y,s+l],ti=[e,e+c,e+c,e],ut=new bt(new i.Point(s,e),l,c,l-y*2,0),l=l-2*y,s=s+y,e=e+c):(c=pt-e,y=ot*c,lt=lt-this._getTrapezoidArea(l,ot,c),b=lt/v,ni.push(s,s+y,s+y,s+y+v,s+y+v,s+l),ti.push(e,e+c,e+c+b,e+c+b,e+c,e),ut=new bt(new i.Point(s,e),l,c+b,v,b),l=v,s=s+y,e=e+c+b),n.drawPolygon(ni,ti)):(b=lt/v,n.drawRect(s,e,l,b),ut=new bt(new i.Point(s,e),v,b,v,b),e=e+b),ut.tag=new p(at,f,dt,k),this.hitTester.add(ut,at),u._setPointIndex(f,yt),yt++)}}}},t.prototype._getTrapezoidArea=function(n,t,i){var r=i*t;return r*i+(n-2*r)*i},t.prototype._getTrapezoidOffsetY=function(n,t,i){var r=Math.pow(n/2/i,2)-t/i;return n/2/i-Math.sqrt(r>=0?r:0)},t.prototype.drawSymbol=function(n,t,i,r,u){var e=this,f;this.chart.itemFormatter?(n.startGroup(),f=new b(this.chart,u,c.SeriesSymbol),f._setData(i,r),this.chart.itemFormatter(n,f,function(){e.drawDefaultSymbol(n,t,i)}),n.endGroup()):this.drawDefaultSymbol(n,t,i)},t.prototype.drawDefaultSymbol=function(n,t,i){n.drawRect(t.left,t.top,t.width,t.height,null,i.symbolStyle)},t.prototype._getPointAndPosition=function(n,t,i){var r=i;n.x=r.center.x;n.y=r.center.y;t=t==null?rt.Center:t},t}(ft);t._FunnelPlotter=hr;bt=function(){function n(n,t,r,u,f){this._startPoint=n;this._width=t;this._height=r;this._neckWidth=u;this._neckHeight=f;this._center=new i.Point(this._startPoint.x+t/2,this._startPoint.y+r/2);this._offsetX=(t-u)/2;this._offsetY=r-f}return n.prototype.contains=function(n){var t=this._startPoint,i=this._offsetX,r=this._offsetY;if(n.x>=t.x&&n.x<=t.x+this._width&&n.y>=t.y&&n.y<=t.y+this._height){if(n.x>=t.x+i&&n.x<=t.x+this._width-i)return!0;if(n.y>t.y+r)return!1;if(n.x<this._center.x)return(n.y-t.y)/(n.x-t.x)<r/i;if(n.x>this._center.x)return(n.y-t.y)/(t.x+this._width-n.x)<r/i}return!1},n.prototype.distance=function(n){if(this.contains(n))return 0;var t=this._startPoint,i=this._width,f=this._height,r=this._offsetX,u=this._offsetY;if(n.y<t.y)return n.x<t.x?Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)):n.x>t.x+i?Math.sqrt(Math.pow(n.x-t.x-i,2)+Math.pow(t.y-n.y,2)):t.y-n.y;if(n.y>t.y+f)return n.x<t.x?Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(n.y-t.y-f,2)):n.x>t.x+i?Math.sqrt(Math.pow(n.x-t.x-i,2)+Math.pow(n.y-t.y-f,2)):n.y-t.y-f;if(n.y>t.y+u){if(n.x<t.x+r)return t.x+r-n.x;if(n.x>t.x+i-r)return n.x-t.x-i+r}else return n.x<t.x+r?Math.min(Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(n.y-t.y,2)),Math.sqrt(Math.pow(n.x-r/2-t.x,2)+Math.pow(n.y-u/2-t.y,2)),Math.sqrt(Math.pow(n.x-r-t.x,2)+Math.pow(n.y-u-t.y,2))):Math.min(Math.sqrt(Math.pow(n.x-i-t.x,2)+Math.pow(n.y-t.y,2)),Math.sqrt(Math.pow(n.x-i+r/2-t.x,2)+Math.pow(n.y-u/2-t.y,2)),Math.sqrt(Math.pow(n.x-i+r-t.x,2)+Math.pow(n.y-u-t.y,2)));return undefined},Object.defineProperty(n.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),n}();t._FunnelSegment=bt;vi=function(){function n(n,t,r,u,f){this._volumes=i.asArray(n);this._xVals=i.asArray(t);this._xDataMin=i.asNumber(r,!0,!1);this._xDataMax=i.asNumber(u,!0,!1);this._xDataType=i.asEnum(f,i.DataType,!0);this._calcData=[];this._init()}return n.prototype.convert=function(t,r,u){var s=undefined,o=this._calcData.length,f=-1,e;if(this._hasXs&&this._xDataType===i.DataType.Date){if(f=this._xVals.indexOf(t),f===-1)for(e=0;e<this._xVals.length;e++)if(e<this._xVals.length-1&&this._xVals[e]<=t&&t<=this._xVals[e+1]){f=e;break}else if(e===0&&t<=this._xVals[e]){f=e;break}else if(e===this._xVals.length-1&&this._xVals[e]<=t){f=e;break}f===-1&&(f=this._xVals.indexOf(Math.floor(t)),f=i.clamp(f,0,o-1))}else this._hasXs?(f=this._xVals.indexOf(t),f===-1&&(f=this._xVals.indexOf(Math.floor(t)),f=i.clamp(f,0,o-1))):f=i.clamp(Math.round(t),0,o-1);return 0<=f&&f<o&&(this._hasXs&&(t=n.convertToRange(t,0,o-1,this._xDataMin,this._xDataMax)),s=this._calcData[f].value+(t-f)*this._calcData[f].width-.5*this._calcData[f].width,r=this._getXVolume(r),u=this._getXVolume(u),s=(s-r)/(u-r)),s},n.prototype.convertBack=function(t){for(var u=undefined,f=this._calcData.length,r=-1,i=0;i<f;i++)if(this._calcData[i].x1<=t&&t<=this._calcData[i].x2||i===0&&t<=this._calcData[i].x2||i===f-1&&this._calcData[i].x1<=t){r=i;break}return 0<=r&&r<f&&(u=t/this._calcData[r].width-this._calcData[r].value/this._calcData[r].width+.5+i,this._hasXs&&(u=n.convertToRange(u,this._xDataMin,this._xDataMax,0,f-1))),u},n.prototype._init=function(){var r,u,t;this._hasXs=this._xVals!==null&&this._xVals.length>0;this._hasXs&&!i.isNumber(this._xDataMin)&&(this._xDataMin=Math.min.apply(null,this._xVals));this._hasXs&&!i.isNumber(this._xDataMax)&&(this._xDataMax=Math.max.apply(null,this._xVals));this._hasXs&&(this._hasXs=i.isNumber(this._xDataMin)&&i.isNumber(this._xDataMax));this._hasXs&&this._xDataType===i.DataType.Date&&this._fillGaps();for(var f=0,n=0,e=this._volumes!==null&&this._volumes.length>0?this._volumes.length:0,n=0;n<e;n++)f+=this._volumes[n];for(t=0,n=0;n<e;n++)u=this._volumes[n]/f,r=t+u,this._calcData.push({value:r,width:u,x1:t,x2:r}),t=this._calcData[n].value},n.prototype._getXVolume=function(t){var f=this._calcData.length,u=-1,r;if(this._hasXs)for(u=this._xVals.indexOf(t),r=0;r<this._xVals.length;r++)if(r<this._xVals.length-1&&this._xVals[r]<=t&&t<=this._xVals[r+1]){u=r;break}else if(r===0&&t<=this._xVals[r]){u=r;break}else if(r===this._xVals.length-1&&this._xVals[r]<=t){u=r;break}return this._hasXs&&(t=n.convertToRange(t,0,f-1,this._xDataMin,this._xDataMax)),u===-1&&(u=i.clamp(Math.round(t),0,f-1)),this._calcData[u].value+(t-u)*this._calcData[u].width-.5*this._calcData[u].width},n.convertToRange=function(n,t,i,r,u){return t===i||r===u?0:(n-r)*(i-t)/(u-r)+t},n.prototype._fillGaps=function(){if(this._xDataType===i.DataType.Date&&this._xVals!==null&&!(this._xVals.length<=0))for(var n=this._xDataMin,r=this._xDataMax,t=1;n<r;t++)n=new Date(n),n.setDate(n.getDate()+1),n=n.valueOf(),n!==this._xVals[t]&&(this._xVals.splice(t,0,n),this._volumes.splice(t,0,0))},n}();t._VolumeHelper=vi})